<!doctype html><html lang=ja-jp><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>PL | ツイートするには長すぎる</title>
<link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=manifest href=/images/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/images/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta property="og:title" content="PL"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://blog.nfurudono.com/tags/pl/"><meta property="og:image" content="https://blog.nfurudono.com/images/thumbnail.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.nfurudono.com/images/thumbnail.png"><meta name=twitter:title content="PL"><meta name=twitter:description content><meta name=description content="PLに関連する記事の一覧です。"><meta property="og:description" content="PLに関連する記事の一覧です。"><meta name=twitter:description content="PLに関連する記事の一覧です。"><link rel=stylesheet href=https://blog.nfurudono.com/css/main.min.a79a9980bf6a2555cd25257529ebf4dc249efbb3e5e45c6d0fbc51e0b157807f.css><link rel=alternate type=application/rss+xml href=https://blog.nfurudono.com/tags/pl/index.xml title=ツイートするには長すぎる><script async src="https://www.googletagmanager.com/gtag/js?id=G-ES42FPF4D5"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ES42FPF4D5",{anonymize_ip:!1})}</script></head><body><nav><header><div class=site-title><a href=/>ツイートするには長すぎる</a></div></header><div class=nav-menu><a class="color-link nav-link" href=/profile/>Profile</a>
<a class="color-link nav-link" href=/tags/>Tags</a>
<a class="color-link nav-link" href=/about/>about</a>
<a class="color-link nav-link" href=https://blog.nfurudono.com/index.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons><a class=social-icon href=https://twitter.com/furudono2 target=_blank rel=noopener title=Twitter><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M8.991284 24.971612c10.189152.0 15.761088-8.441388 15.761088-15.761088C24.752372 8.970656 24.747512 8.731868 24.736496 8.494376 25.818008 7.712564 26.758256 6.737 27.5 5.62622c-.992628.440856-2.060748.738072-3.181248.871992 1.14372-.685584 2.02176-1.770768 2.435832-3.064176-1.070496.6345-2.25558 1.095984-3.517344 1.344492-1.010772-1.076652-2.450412-1.75014-4.043412-1.75014-3.059424.0-5.540292 2.480868-5.540292 5.539104.0.434808.0487079999999995.857412.14364 1.26306C9.19346 9.599108 5.11106 7.39472 2.3792 4.04294c-.476172.818424-.750168 1.769688-.750168 2.784132.0 1.921968.97794 3.61854 2.464992 4.61106C3.185528 11.41016 2.331788 11.160464 1.585184 10.745096 1.583888 10.768208 1.583888 10.791428 1.583888 10.815728c0 2.683152 1.909764 4.922856 4.4442 5.43078C5.562932 16.373084 5.07326 16.44134 4.56782 16.44134 4.210988 16.44134 3.863876 16.406024 3.526484 16.34144c.70524 2.200824 2.750112 3.802356 5.174928 3.8475-1.896264 1.485756-4.284576 2.37114-6.879924 2.37114C1.374476 22.56008.93362 22.534592.5 22.4834c2.451708 1.571076 5.362524 2.488212 8.491284 2.488212"/></svg>
</a><a class=social-icon href=https://www.instagram.com/donofuru/ target=_blank rel=noopener title=Instagram><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M14.0000238 2.00378571c3.2579524.0 3.6664762.0138095300000001 4.946.0721904800000002C20.222881 2.13421429 21.0949286 2.33702381 21.8579762 2.63359524 22.6468333 2.94011905 23.3158333 3.35030952 23.9827857 4.01721429 24.6496905 4.68416667 25.059881 5.35316667 25.3664524 6.14202381 25.6629762 6.90507143 25.8657857 7.77711905 25.9240238 9.05397619 25.9824048 10.3335 25.9962143 10.7420238 25.9962143 14.0000238 25.9962143 17.2579762 25.9824048 17.6665 25.9240238 18.9460238 25.8657857 20.222881 25.6629762 21.0949286 25.3664524 21.8579762 25.059881 22.6468333 24.6496905 23.3158333 23.9827857 23.9827857 23.3158333 24.6496905 22.6468333 25.059881 21.8579762 25.3664524 21.0949286 25.6629762 20.222881 25.8657857 18.9460238 25.9240238 17.6665 25.9824048 17.2579762 25.9962143 14.0000238 25.9962143 10.7420238 25.9962143 10.3335 25.9824048 9.05397619 25.9240238 7.77711905 25.8657857 6.90507143 25.6629762 6.14202381 25.3664524 5.35316667 25.059881 4.68416667 24.6496905 4.01721429 23.9827857c-.66690477-.6669524-1.07709524-1.3359524-1.38361905-2.1248095-.29657143-.7630476-.49938095-1.6350952-.55761905-2.9119524C2.01759524 17.6665 2.00378571 17.2579762 2.00378571 14.0000238 2.00378571 10.7420238 2.01759524 10.3335 2.07597619 9.05397619 2.13421429 7.77711905 2.33702381 6.90507143 2.63359524 6.14202381c.30652381-.78885714.71671428-1.45785714 1.38361905-2.12480952.66695238-.66690477 1.33595238-1.07709524 2.12480952-1.38361905C6.90507143 2.33702381 7.77711905 2.13421429 9.05397619 2.07597619 10.3335 2.01759524 10.7420238 2.00378571 14.0000238 2.00378571zm0 2.16147619C10.796881 4.1652619 10.4174524 4.1775 9.1525 4.23521429 7.98288095 4.28854762 7.34769048 4.48397619 6.92497619 4.6482619 6.36502381 4.86588095 5.96540476 5.12583333 5.54564286 5.54564286c-.41980953.4197619-.67976191.81938095-.89738096 1.37933333-.16428571.42271429-.35971428 1.05790476-.41304761 2.22752381C4.1775 10.4174524 4.1652619 10.796881 4.1652619 14.0000238 4.1652619 17.203119 4.1775 17.5825476 4.23521429 18.8475 4.28854762 20.017119 4.48397619 20.6523095 4.6482619 21.0750238 4.86588095 21.6349762 5.12588095 22.0345952 5.54564286 22.4543571 5.96540476 22.8741667 6.36502381 23.134119 6.92497619 23.3517381 7.34769048 23.5160238 7.98288095 23.7114524 9.1525 23.7647857 10.4173095 23.8225 10.7966429 23.8347381 14.0000238 23.8347381 17.2033571 23.8347381 17.5827381 23.8225 18.8475 23.7647857 20.017119 23.7114524 20.6523095 23.5160238 21.0750238 23.3517381 21.6349762 23.134119 22.0345952 22.8741667 22.4543571 22.4543571 22.8741667 22.0345952 23.134119 21.6349762 23.3517381 21.0750238 23.5160238 20.6523095 23.7114524 20.017119 23.7647857 18.8475 23.8225 17.5825476 23.8347381 17.203119 23.8347381 14.0000238 23.8347381 10.796881 23.8225 10.4174524 23.7647857 9.1525 23.7114524 7.98288095 23.5160238 7.34769048 23.3517381 6.92497619 23.134119 6.36502381 22.8741667 5.96540476 22.4543571 5.54564286 22.0345952 5.12583333 21.6349762 4.86588095 21.0750238 4.6482619 20.6523095 4.48397619 20.017119 4.28854762 18.8475 4.23521429 17.5825476 4.1775 17.203119 4.1652619 14.0000238 4.1652619zm0 13.8334762c2.2084286.0 3.9987143-1.7902857 3.9987143-3.9987143.0-2.2084762-1.7902857-3.9987619-3.9987143-3.9987619-2.2084762.0-3.9987619 1.7902857-3.9987619 3.9987619.0 2.2084286 1.7902857 3.9987143 3.9987619 3.9987143zm0-10.15895239c3.4021905.0 6.1601905 2.75799999 6.1601905 6.16023809.0 3.4021905-2.758 6.1601905-6.1601905 6.1601905-3.4022381.0-6.16023809-2.758-6.16023809-6.1601905.0-3.4022381 2.75799999-6.16023809 6.16023809-6.16023809zm7.8431429-.24338095c0 .79504762-.644523800000002 1.43952381-1.4395715 1.43952381C19.6085952 9.03592857 18.9640714 8.39145238 18.9640714 7.59640476S19.6085952 6.15683333 20.4035952 6.15683333c.795047699999998.0 1.4395715.64452381 1.4395715 1.43957143z"/></svg>
</a><a class=social-icon href=https://www.linkedin.com/in/naoya-furudono target=_blank rel=noopener title=LinkedIn><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M2 3.654102c0-.95502059.79442509-1.73012354 1.77383592-1.73012354H24.2261641C25.2058917 1.92397846 26 2.69908141 26 3.654102V24.3462148C26 25.3015521 25.2058917 26.0760215 24.2261641 26.0760215H3.77383592C2.79442509 26.0760215 2 25.3015521 2 24.3465315V3.65378524 3.654102zM9.27526132 22.1415901V11.2356668H5.65030092V22.1415901H9.27557808 9.27526132zM7.46341463 9.74691162c1.2638581.0 2.05068103-.83750395 2.05068103-1.88406715C9.49033893 6.79252455 8.72727273 5.97846056 7.48748812 5.97846056c-1.24073487.0-2.05099778.81406399-2.05099778 1.88438391.0 1.0465632.78650618 1.88406715 2.00316756 1.88406715h.02343998H7.46341463zM11.2815965 22.1415901h3.6246436v-6.089642C14.9062401 15.7263225 14.9299968 15.4000634 15.0256573 15.1675641c.261957499999999-.6515679.8584099-1.3259423 1.8599936-1.3259423 1.3113716.0 1.836237 1 1.836237 2.4662654v5.8337029h3.6246436V15.8885017c0-3.349699-1.7880899-4.9084574-4.172949-4.9084574-1.9553373.0-2.814064 1.0928097-3.2910991 1.8371872H14.9065569v-1.581248H11.2819132C11.3291099 12.2591067 11.2815965 22.1419069 11.2815965 22.1419069V22.1415901z"/></svg>
</a><a class=social-icon href=https://github.com/naoyafurudono target=_blank rel=noopener title=GitHub><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M13.9988029 1.32087331C6.82105037 1.32087331 1 7.14112562 1 14.3212723c0 5.7436386 3.72454649 10.6157955 8.89038951 12.3348169C10.5408085 26.7757983 10.7778323 26.374374 10.7778323 26.0296121 10.7778323 25.7215609 10.7666595 24.9035493 10.760275 23.8189856 7.14426471 24.6042767 6.38131925 22.0760223 6.38131925 22.0760223c-.59136253-1.5019491-1.44369072-1.9017772-1.44369072-1.9017772C3.75729765 19.3682044 5.02701126 19.3841656 5.02701126 19.3841656 6.33183953 19.4759425 7.01817121 20.7241085 7.01817121 20.7241085c1.15958133 1.9863716 3.04300319 1.4125664 3.78360289 1.0797753.1181129-.8395592.4540962-1.4125663.8251942-1.7373768C8.74038491 19.7385043 5.70536235 18.6228163 5.70536235 13.6413251c0-1.4189508.50676816-2.5801283 1.33834679-3.4883207C6.90963504 9.82420367 6.46351945 8.50181809 7.17139875 6.71256734c0 0 1.09094816-.34955032 3.57451115 1.33276037C11.78259 7.75642995 12.8950858 7.61277914 14.000399 7.60719272 15.1049142 7.61277914 16.2166119 7.75642995 17.2548881 8.04532771c2.4819669-1.68231069 3.571319-1.33276037 3.571319-1.33276037C21.5356825 8.50181809 21.0895669 9.82420367 20.9562909 10.1530044 21.7894656 11.0611968 22.2922435 12.2223743 22.2922435 13.6413251c0 4.9942601-3.039811 6.0931889-5.935173 6.4148071.4660671.401424200000001.8818564 1.194696.8818564 2.4077473C17.2389269 24.2012564 17.2229657 25.603448 17.2229657 26.0296121 17.2229657 26.3775663 17.4575954 26.7821827 18.116793 26.6552912 23.2786458 24.9322794 27 20.0633148 27 14.3212723 27 7.14112562 21.1789496 1.32087331 13.9988029 1.32087331"/></svg></a></div><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io target=_blank rel=noopener>source of this
site</a></p><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p><p>©2023 Naoya Furudono</p><script src=https://blog.nfurudono.com/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script><a target=_blank rel="noopener noreferrer" href=https://github.com/naoyafurudono/naoyafurudono.github.io/actions><img src=https://github.com/naoyafurudono/naoyafurudono.github.io/actions/workflows/gh-pages.yml/badge.svg alt="github pages deploy status" style=max-width:100%></a><p><a href="https://www.amazon.jp/hz/wishlist/ls/1JBRXP4JZZ21T?ref_=wl_share">欲しい本リスト</a></p><p><a href="https://www.amazon.jp/hz/wishlist/ls/3TT5GR81VZPHP?ref_=wl_share">欲しいものリスト</a></p></footer></nav><div id=content class=content-container><h1>Tagged "PL"</h1><article><h2><a href=https://blog.nfurudono.com/daily/2023-12-26/>2023-12-26</a></h2><div><p><h2><a href=#%e3%83%a1%e3%83%a2 id=メモ class=anchor aria-hidden=true>メモ</a></h2><p>ついったで同僚が <code>panicIndex</code> と言っていて、なんだそれと思ったので調べた。golangの文脈だったので想像はある程度ついて、golangのランタイムの一部として？実装されている関数でインデックスに関するパニックを投げる関数だった。</p><p><a href=https://go.dev/src/runtime/panic.go>https://go.dev/src/runtime/panic.go</a></p><h2><a href=#%e6%9d%a5%e5%b9%b4%e3%81%ae%e4%bb%95%e8%be%bc%e3%81%bf id=来年の仕込み class=anchor aria-hidden=true>来年の仕込み</a></h2><p>来年はついに配属される。小Rまでもそうだったけど求められることが変わるので楽しみ。今度は長くなるので、そこで効きそうな技術を特に強くしておきたい気持ちと、自分の主張を通しやすそうな環境なので好き勝手とがりたい気持ちがある。</p><p>どっちもやればいいかな。</p></p></div><div class=post-footer><time>December 26, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/fav-racket-features/>推し言語機能 Racket編</a></h2><div><p><p>この記事は<a href=https://adventar.org/calendars/8634>GMOペパボエンジニア Advent Calendar 2023 🎅会場</a>の19日の記事です！</p><p>昨日はyagijinさんのReactやってる人向けのSwiftUI入門でした。
Swiftに興味があるReact信者の僕のために書いてくれたのかと錯覚しました。これを期にSwift UI入門しようと思います。
Swift UIは双方向バインディングを採用しているとのことなので、Vueとの類似もありそうですね。</p><p>Reactを書いている時間は癒しの時間です。ところでReactは関数型言語からインスパイアされた機能が多いですよね。今日の記事はそんな関数型言語の中でも僕の好きなRacket言語の記事です。僕が一推しするRacketの言語機能を紹介します。</p><h2><a href=#%e5%89%8d%e6%9b%b8%e3%81%8d id=前書き class=anchor aria-hidden=true>前書き</a></h2><p>好きなRacket言語の言語機能を紹介します。ざっくりとした紹介なので、ここでの知識を人に話したりプログラミングで活用する前に、節々で参照する公式ドキュメントを参照してもらえると嬉しいです。</p><ul><li>契約</li><li>named let</li><li>動的束縛</li></ul><h2><a href=#%e5%a5%91%e7%b4%84 id=契約 class=anchor aria-hidden=true>契約</a></h2><p>ここでいう契約とは、関数の入出力の性質を関数定義の際に宣言しておくことで、関数を呼び出しを実行する際に入出力の値を検証し、違反していた場合にエラーを投げる言語機能のことです。余談ですが、契約と型は対応する概念です。契約の検証は実行時に行いますが、型検査はコンパイル時に行います。静的に型をつける言語では関数定義の際にその型を宣言することで、関数呼び出しのあるコードの入出力の方を検証し、違反する呼び出しを特定します。
ContractのRacket Guideを貼っておきます。<a href=https://docs.racket-lang.org/guide/contracts.html>https://docs.racket-lang.org/guide/contracts.html</a></p><p>ここでは <a href=https://docs.racket-lang.org/reference/function-contracts.html>https://docs.racket-lang.org/reference/function-contracts.html</a> の例をお借りして説明します。</p><pre><code class=language-racket>&gt; (define/contract (maybe-invert i b)
    (-&gt; integer? boolean? integer?)
    (if b ( -i) i))
&gt; (maybe-invert 1 #t)
-1
&gt; (maybe-invert #f 1)
maybe-invert: contract violation
  expected: integer?
  given: #f
  in: the 1st argument of
      (-&gt; integer? boolean? integer?)
  contract from: (function maybe-invert)
  blaming: top-level
   (assuming the contract is correct)
  at: eval:2:0
</code></pre><p>冒頭の <code>define/contract</code> で始まるS式では、関数定義をしつつ、その関数の契約を宣言します。二つの引数 <code>i</code>, <code>b</code> をとる関数 <code>maybe-invert</code> を定義していて、<code>b</code>がtruthyなら<code>-i</code>を返し<code>b</code>がfalthyなら<code>i</code>を返す関数として<strong>実装</strong>しています。この関数の契約は<code>(-> integer? boolean? integer?)</code> と宣言されています。これは<code>integer?</code>を満たす値と<code>boolean?</code>を満たす値を引数に取り、<code>integer?</code>を満たす値を返す関数である、と読みます。</p><p><code>(maybe-invert 1 #t)</code> という関数呼び出し式では第一引数に <code>1</code>, 第二引数に <code>#t</code> を渡しているので入力に関する契約を満たしていて、返り値は<code>-1</code>になるので出力に関する契約も満たしています。そのためエラーが出ずに何事もなく計算結果の　<code>-1</code>が表示されます。</p><p>一方で、 <code>(maybe-invert #f 1)</code> という関数呼び出しでは引数の順序を間違えて渡しているようです。第一引数にfalseを表す <code>#f</code> を渡しています。<code>#f</code> は <code>integer?</code> を満たさない（そういうふうに <code>integer?</code>が定義されている）のでRacket処理系は契約に違反している旨をエラーとして表示しています。</p><p>こういうのが契約です。ちゃんと確認していませんが、PHPで型注釈を書いた際にも実行時の検査が行われるそうなのでPHPは契約を言語機能としてサポートしているといえそうです。他にはD言語も契約をサポートします。</p><p>入力値のバリデーションはコードを書くときに当たり前に行う作業ですが、それをシステマチックに行うためのフレームワークを言語が提供してくれるのは魅力的だと思っています。また、契約は型システムや漸進的型つけとも密接に関わりがある楽しい概念です。</p><h2><a href=#named-let id=named-let class=anchor aria-hidden=true>named-let</a></h2><p>次はnamed-letです。これについても公式ドキュメントを貼っておきます。<a href=https://docs.racket-lang.org/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29>https://docs.racket-lang.org/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29</a></p><p>RacketやSchemeなどのLisp系言語で勉強しているとwhileやforは習いませんが、再帰を習います。例えば整数のリストを受け取って、その和を返す関数<code>sum</code>を定義するにはこんな感じで書きます。</p><pre><code class=language-racket>&gt; (define (sum lst)
          (if (nil? lst)
              0
              (+ (car lst) (sum (cdr lst)))))
&gt; (sum '(1 2 3 4 5 6 7 8 9 10))
55
</code></pre><p><code>nil?</code>はリストが空を判定し、<code>car</code>はリストの先頭要素をとる関数で、<code>cdr</code>はリストの先頭を除いた部分をとる関数です。先頭の値とそれ以降の和をたすことで、リスト全体の和を得ています。</p><p>このように再帰があればループはかけるのですが、関数を定義してその直後にその関数を呼び出す、そしてその後その関数は使わない、みたいなケースがしばしばあります。そういうときに役立つのがnamed-letです。以下のように再帰関数の定義と関数呼び出しを同時に行うことができます。</p><pre><code class=language-racket>&gt; (let sum ((lst '(1 2 3 4 5 6 7 8 9 10))
       (if (nil? lst)
           0
           (+ (car lst) (sum (cdr lst))))))
55
</code></pre><p>再帰関数を使ってループを書くことでループの中での再代入を避けることができます。そのためループ不変条件を把握するのが楽になります。そしてnamed-letを使うことで、不要な関数定義を省くことができます。スコープにある変数は少ないほど嬉しいです。ここだけで使う再帰関数なんだということが一目でわかります。あと書いてみるとわかるのですが、named-letを書くととても気分がいいです。</p><h2><a href=#%e5%8b%95%e7%9a%84%e6%9d%9f%e7%b8%9b id=動的束縛 class=anchor aria-hidden=true>動的束縛</a></h2><p>最後は動的束縛です。emacs lispの変数束縛は動的だということで有名ですし、最近だとReactのContextが動的束縛っぽいかなと思います。やはり公式ドキュメントのリンクを貼っておきます。<a href=https://docs.racket-lang.org/guide/parameterize.html>https://docs.racket-lang.org/guide/parameterize.html</a></p><p>誤解を恐れながらいうと、環境変数みたいなやつをコードの中で設定できる機能です。公式ドキュメントの例をそのまま貼り付けます。</p><pre><code class=language-racket>&gt; (parameterize ([error-print-width 5])
    (car (expt 10 1024)))
car: contract violation
  expected: pair?
  given: 10...
&gt; (parameterize ([error-print-width 10])
    (car (expt 10 1024)))
car: contract violation
  expected: pair?
  given: 1000000...
</code></pre><p>REPLで2回プログラムを実行しています。<code>(expt x y)</code> は <code>x</code> の <code>y</code> 乗です。それのcarを取ろうとしています（<code>car</code>はリストの先頭要素を返す関数でした）が、<code>(expt x y)</code>の計算結果は数値であってリストでないので<code>car</code>の契約に違反します。そのためエラーメッセージが表示されています。今回フォーカスしたいのは動的束縛です。<code>parameterize</code> で <code>error-print-width</code>の値をそれぞれの実行で <code>5</code> や<code>10</code>に指定しています。その結果表示されるエラーメッセージの幅が5になったり10になったりしています(<code>10...</code> と <code>1000000...</code>)。おそらくエラーメッセージを表示する関数の中で <code>error-print-width</code>が参照されているのでしょう。</p><p>このように関数を呼び出すタイミング側でその振る舞いを変えられるのが動的束縛の旨みです。関数の引数で渡す必要がないので、動的変数を参照する関数と設定する関数の間の関数たちが余分な引数を取らなくても良いわけです。</p><p>グローバル変数を使ってもこのような引数を介さない設定はできますが、動的束縛を使う方が衛生的です。例えば一つのプログラムの中でグローバル変数の値を変えたい場合、グローバル変数の値を書き換えることになります。これは悪名高い可変なグローバル変数を使うことを意味します。可変なグローバル変数は無関係に見えるプログラムの実行順序がクリティカルにプログラムの振る舞いを左右するのでよくないです。</p><p>一方で動的束縛では関数呼び出しごとに値を設定するため実行順序のことは気にしなくて良いです。値を設定した呼び出しの範囲下ではそれが反映されるし、その範囲外ではその設定は無効化されます。このように衛生的に、かつ疲れない形で広い範囲で参照する値を設定できることがグローバル変数と比較した際のメリットだと思います。</p><h3><a href=#%e3%82%a8%e3%83%95%e3%82%a7%e3%82%af%e3%83%88%e3%83%8f%e3%83%b3%e3%83%89%e3%83%a9%e3%81%a8%e3%82%a8%e3%83%95%e3%82%a7%e3%82%af%e3%83%88%e3%82%b7%e3%82%b9%e3%83%86%e3%83%a0 id=エフェクトハンドラとエフェクトシステム class=anchor aria-hidden=true>エフェクトハンドラとエフェクトシステム</a></h3><p>動的束縛される変数を参照する場合、呼び出し側の不慮の事故によって変数の定義もれでプログラムが正常に動作しないかもしれません。環境変数を設定し忘れるとアプリケーションが動かないのと同じです。こういう事故は実行する前、例えばコンパイルしたり型検査のタイミングで気がつけると嬉しいですよね。</p><p>Racketでこの課題を解決できるかは知らないのですが、エフェクトハンドラとエフェクトシステムを使えば型検査の中で解決できます！
その説明をしたい気持ちが溢れているのですが、そろそろ日を跨ぎそうなので興味がある方は僕に声をかけてくれると嬉しいです。</p><h2><a href=#%e3%81%82%e3%81%a8%e3%81%8c%e3%81%8d id=あとがき class=anchor aria-hidden=true>あとがき</a></h2><p>プログラミング言語の言語機能、いいですよね。言語設計者が思う表現のベストプラクティスが詰まっていて触れるたびに嬉しくなります。</p><p>明日のアドベントカレンダーは冷静沈着なTepiさんがTextのJetpack Composeで画像表示した話を書く予定とのことです。
Jetpack Composeは名前しか聞いたことがないので、新しい概念を見られそうで楽しみです！</p><p>それでは良いクリスマスを！</p></p></div><div class=post-footer><time>December 19, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-09-12/>2023-09-12</a></h2><div><p><h2><a href=#rust%e9%9b%a3%e3%81%97%e3%81%84 id=rust難しい class=anchor aria-hidden=true>rust難しい</a></h2><p>以下のあたりを完全に理解したらだいぶ楽になる気がする。</p><ul><li>エラー処理</li><li>イテレータ</li><li>借用とcopy</li></ul><p>エラー処理やイテレータの周りはrustに限らずどの言語でも乗り越える一つの壁な気がする。例えばpythonに入門したときは、フランクにExceptionを継承したクラスを定義して、それを投げたりキャッチしたりすることを覚えたり、ジェネレータやリスト内包表記を覚えたりしたときに楽になった。そのほかはモジュールとかパッケージ周りの仕組みが新しく言語を学ぶときの障壁だと思っている。</p><p>借用とcopyは割とrust特有な気がする。似たところで、rubyの構文はその言語特有の難しさだと思う。
rubyの構文は慣れないとパースが難しいと思っている。実際に書いてみると、そう書きたくなる気持ちはわかるし書いていて気持ちいのだけど。</p><h2><a href=#%e3%82%a8%e3%82%a2%e3%83%80%e3%82%b9%e3%82%bf%e3%83%bc%e3%81%99%e3%81%94%e3%81%84 id=エアダスターすごい class=anchor aria-hidden=true>エアダスターすごい</a></h2><p>エアダスターを買ってノートパソコンのキーボードを掃除したら幸せになれた。ちょっと前にUキーの裏にゴミが入って、たまにかちゃかちゃ言って鬱陶しかった。そして週末にオリエンの都合で外でパソコンしたときに、たくさんゴミが入った気がする。</p><p>Amazonで400円くらいのエアダスターを買って使ってみたら、なんとなくよくなった気がする。昔の自分だったら圧縮した気体を吹き出すために400円かけるなんて、とか思っていただろうから成長した。手段ではなくそれがもたらす価値に対してお金を払えるようになったので偉い。</p><p>この価値観は、賢く生きるためには逆手に取ったり取られないようにしたりしないといけないんだろうなと思う。例えば自分が提供する価値を売るときには、この価値観を持つ人に対して安価な手段で高い見返りを得られると良いし、自分が目的を達成するために人のリソースを買うときは、リソースの売り手が想像もつかないような価値を見出すと有利だろう。</p><h2><a href=#ast%e3%82%a4%e3%83%b3%e3%82%bf%e3%83%bc%e3%83%97%e3%83%aa%e3%82%bf-vs-bytecode%e3%82%a4%e3%83%b3%e3%82%bf%e3%83%bc%e3%83%97%e3%83%aa%e3%82%bf%e3%81%ae%e8%ab%96%e6%96%87%e3%82%92%e8%aa%ad%e3%82%93%e3%81%a7%e3%81%84%e3%82%8b id=astインタープリタ-vs-bytecodeインタープリタの論文を読んでいる class=anchor aria-hidden=true>ASTインタープリタ v.s. bytecodeインタープリタの論文を読んでいる</a></h2><p>読んでいる。<a href=https://dl.acm.org/doi/10.1145/2660193.2660223>https://dl.acm.org/doi/10.1145/2660193.2660223</a></p><p>threaded codeの何がいいかを理解しないまま今に至っていたけど、ループ構造を変えることで分岐予測の精度を高めるみたいなことが書かれていて、そうなんだとなった。バイトコードハンドラのディスパッチをループの末尾で行うようにするらしい。ループの末尾でディスパッチするってどういうことだ？
それぞれのハンドラが相互再帰な関数として定義されていて、全てのハンドラの末尾で次のバイトコードを読み込み次のハンドラを末尾位置で呼び出す、みたいな感じかな。分岐予測の仕組みは僕の中でブラックボックスになってしまっているのだが、めっちゃすごいやつだと思うことにすると、コードパスと次に実行されやすいハンドラの間に確かに相関が生まれそうなので、分岐予測の精度は上がる道理があるかもしれない、という気持ちになる。逆にループの頭でディスパッチすることにすると、ハンドラの末尾でループ先頭への無条件ジャンプを経由してからディスパッチすることになる。この一回挟まる無条件ジャンプが邪魔なのかな。この論文に飽きたら答え合わせしよう。</p></p></div><div class=post-footer><time>September 12, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/contract-programming/>契約と型検査</a></h2><div><p><p>プログラミングの型検査・契約・テストについて書きます。お酒を飲みながら書きました。注意は払ったつもりですが、変なところがあるかもしれません。</p><ul><li>契約とは何か<ul><li>例を含める</li></ul></li><li>どんな嬉しさがあるか</li><li>型検査との兼ね合い</li></ul><h2><a href=#%e5%a5%91%e7%b4%84%e3%81%a8%e3%81%af%e4%bd%95%e3%81%8b id=契約とは何か class=anchor aria-hidden=true>契約とは何か</a></h2><p>契約 (contract) とはプラグラムの関数の入出力に関する規約のことです。例えば整数の割り算をする <code>div</code> 関数は、二つの整数を受け取って商を返す関数だとしましょう。このとき、入力の二つの値は</p><ol><li>どちらも整数</li><li>二つ目の整数は0ではない</li></ol><p>ことが求められます。また、整数の割り算を行なっているので、<code>div(a,b)</code> の値は例えば</p><ol><li><code>a</code> の絶対値以下であること</li></ol><p>が求められます（もっと細かい要求をしても良いでしょうが）。箇条書きで示したような <code>div</code> 関数について求められる性質のことを契約とよぶことが多いです。</p><p>ここまでで例を示しました。例のことは忘れて一旦抽象的な定義を試みましょう。契約は関数を呼び出す側と呼ばれる定義の間の約束事です。関数を<strong>正しく</strong>呼べば<strong>正しい結果</strong>を返すことを規定します。どんな呼び出しが正しくて、正しい呼び出しをされたと仮定とした上でどんな結果が正しいかを規定するのが<strong>契約</strong>です。</p><p>先ほどの例を考えると、 <code>div</code> 関数の第二引数に0を渡すのは呼び出し側の契約違反で、<code>div(168,4)</code> の結果が42にならないのは関数定義の契約違反です。契約は、関数呼び出しにおける呼び出し側と定義側との間の規約を表明し、検査します。</p><p>多くの言語でコードを書く際は、関数の冒頭で引数のチェックをして、呼び出し側の責任を追及するスタイルでコードを書くことになりがちです。言語によっては組み込みの機能でいい感じに契約を書いて、実行時に検査できます。
D言語とかRacketがいい例です。</p><p>例えばRacketだと、モジュールでエクスポートする関数を表明する箇所で、関数の契約を書きます。完全に雰囲気ですが、おそらくこんな感じで書くんじゃないかったかと思います。正確にはRacket GuideかRacket Referenceをご覧ください。</p><pre><code class=language-racket>#lang racket

(export
  (div (-&gt; (and int (lambda (x) (&lt; 0 x) )) int  int)))

...

(define (div a b)
  (/ a b))
</code></pre><h2><a href=#%e5%a5%91%e7%b4%84%e3%81%ae%e5%ac%89%e3%81%97%e3%81%95 id=契約の嬉しさ class=anchor aria-hidden=true>契約の嬉しさ</a></h2><p>契約を書いておくと何が嬉しいでしょうか。問題の切り分けが楽になることが嬉しいですね。<a href=https://dl.acm.org/doi/10.1145/3371133>Blame shifting</a>ができます。みなさん人生で一回は <code>Segmentation fault</code> とか <code>Null pointer exception</code> とか <code>car: cannot apply for nil</code> みたなエラーに遭遇したことがあるかと思います。これらのエラーは契約をちゃんと関数に書いていないから起きるはずで、まともなライブラリを使っていればあまりみないはずです。これらのエラーが出たときには割と深く絶望して、どの関数が悪さをしているか探す旅が始まります。</p><p>もし真面目に契約を書いていれば関数が許さないnilを受け取った時点で呼び出し側に責任があることを即座にエラーを起こしたり、変な結果を返しそうになったら返す直前に同様にエラーを起こします。</p><p>これが契約の嬉しさです。反対に、関数を動かして契約違反で怒られない限り、その契約を実装が遵守していることが保証されます。これもまた契約の嬉しさの一つです。契約はプロダクション環境で生きているドキュメントとして機能します。</p><p>テストとの違いは、契約は実行時に検査をすることが大きいでしょう。テストはテストを走らせるときにしか検証を行いませんが、契約は実行時にも検査を行います。プロダクション環境で関数を呼び出すときにも契約は検査されるのです。</p><h2><a href=#%e5%9e%8b%e6%a4%9c%e6%9f%bb%e3%81%a8%e3%81%ae%e5%85%bc%e3%81%ad%e5%90%88%e3%81%84 id=型検査との兼ね合い class=anchor aria-hidden=true>型検査との兼ね合い</a></h2><p>契約はいいものであることがわかったと思います。関数定義の性質を保証して、何かあれば<strong>すぐに</strong>検出し、何もなければ、すべてのそれまでの実行で違反したケースがないことを保証します。</p><p>この観点で見たときに、型検査はテストよりも契約に近しい存在だと言えるでしょう。型検査は、コンパイルのたびに型制約が満たされていることを検証します。健全な（まともな）型システムでは、型検査をパスしたプログラムは実行時に型エラーを起こさないことが保証されます
（この保証がある型システムのことを健全だというので順番は逆ですが）。型検査では、関数の入力として渡される値が、関数が期待する条件を満たすことを検査しますし、関数が返す値が宣言にあっていることも検査します。契約と対比させると、契約は実行時に検査を行う一方で、型検査はコンパイル時に行うという感じです。</p><p>逆にいうと、契約は型検査で静的にやろうとする検査を実行時まで遅延したものです。実行時には任意の計算をできるので表現力は契約の方が高いです。例えば引数の値が10と20の間である、みたいなことを検査するのは型検査では大変ですが、契約ならちょちょいのちょいです。</p><p>じゃあ契約だけでいいじゃないか、型検査なんてやめてしまえ！という話になるかというと、そういうわけにもいきません。型検査には契約にないよさがあります。</p><p>型検査の良さは静的に検証が済むことにあります。つまり、以下の二つを型検査は満たします</p><ol><li>全ての実行について、検証結果が成立する</li><li>プログラムを実行しないでも検証を行える</li></ol><p>まず一つ目について。契約やテストでは、実行した場合については動作を検証してくれますが、それとは違う値については特に保証をしてくれません。だから境界テストみたいな、人間が上手に動かす技法が使われるのでしょう。型検査では、ある程度検証内容を抽象的にしたり保守的にすることで、全ての実行に対する性質を保証します。
intが返る関数は決してfloatを返さないことを型検査では保証できます。</p><p>抽象化や保守的な検査を行う二つ目の恩恵として、実行しないでも検証できることが挙げられます。本番環境で動かさないとわからなかったり、テスト環境をせっせと用意する必要は、型検査では生じません。</p><h3><a href=#%e3%83%86%e3%82%b9%e3%83%88%e3%81%af%e3%81%84%e3%82%89%e3%81%aa%e3%81%84 id=テストはいらない class=anchor aria-hidden=true>テストはいらない？</a></h3><p>型検査や契約の有用性を主張してきましたが、それでもテストは必要です。実際に色々な具体的なケースで動かすことでわかることは多いでしょう。型検査は動かさないでもわかることを検証して、契約は動かしたらわかることを検証します。テストはプログラムを動かしてみて検証します。型や契約だけではプログラムを動かすことはありません。そこが大きな違いなはずです。</p><p>それでも全ての異常の検知をテストでまかなう必要もないはずです。契約や型検査は保証をする仕組みとして優秀です。基本的な保証は契約や型検査で済ませて、本当に際どいところをテストでカバーする、みたいな役割分担をすると幸せになれるんじゃないでしょうか。</p></p></div><div class=post-footer><time>August 31, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-07-22/>2023-07-22</a></h2><div><p><h2><a href=#%e3%81%b5%e3%81%ab%e3%82%83%e3%81%a3%e3%81%a8%e3%81%97%e3%81%a6%e3%82%8b id=ふにゃっとしてる class=anchor aria-hidden=true>ふにゃっとしてる</a></h2><p>コンパイラの実装で、次はポインタ算術をやる。演算子がオーバーローディングされているので型検査が必要。今は環境とかのデータ構造を設計する気力がなくて、パソコンを前にふにゃっとしている。お昼ご飯食べたら考える。</p><p>興味本位でコンパイルしたプログラムの実行速度を測ってみた。時間計算量が試数時間なfibの実装（あのみんな大好きなナイーブなやつ）で、
fib(40)を計算してみた。自作コンパイラだとuser時間が1.3secくらいなのに対して、
gccのO3でuser時間が0.3secくらいだった。
O3を指定しないと（多分O2）0.5secくらい。
Inliningとかは効かないだろうし、ループ周りでの最適化もできないはず。スタックマシンではなくレジスタマシンとして動かすことで（無駄なpush/popを排除することで）
O2くらいの速さになってる感じかな。
O3では何が早くなってるんだろう。気が向いたら調べるか、実装するかしたい。</p><h2><a href=#%e3%81%8c%e3%82%93%e3%81%b0%e3%81%a3%e3%81%9f id=がんばった class=anchor aria-hidden=true>がんばった</a></h2><p>お昼を食べて買い物に行ったあと、型検査器を実装した。がんばった。
strcmpがboolを返すと思い込むやつをやって時間を溶かした。ランニングをしてオーバーロードに取り組む。今はintもポインタも64bitにしているけど、abiをみたらintは32bitっぽいので合わせる。オーバーロードは楽しそうだけどintを32bitにするのが面倒。
ASTに型を行き渡らせたので難しくはないはず。</p><p>買い物ではズボンを買いに行った。涼しい長ズボンが欲しかったので。初めて買う感じのやつを変えて満足している。サンダルも欲しかったけど、僕の期待が矛盾していることに気がついたので断念。来年は期待を変えられることを願って今年はスニーカを履き続ける。</p><h2><a href=#%e5%8b%95%e7%9a%84%e6%9d%9f%e7%b8%9b%e3%81%8c%e6%ac%b2%e3%81%97%e3%81%84 id=動的束縛が欲しい class=anchor aria-hidden=true>動的束縛が欲しい</a></h2><p>Cとかその辺の関数型言語を使っていると欲しくなる言語機能第1位は動的束縛だという説を提唱したい。代数的エフェクトほどのことを普段使いに人類は求めているとは僕には思えなくて
（普段使いと言ったのは、凝った仕組みを作る場合はのぞきたい気持ちの表れ）<a href=https://docs.racket-lang.org/guide/parameterize.html>動的束縛</a>が欲しいんじゃないだろうか。オブジェクト指向でインスタンス変数を使うのもこの用途が多いんじゃないかと勝手に思っているんだけどどうだろう。</p><p>とにかく、動的束縛が欲しい。動的束縛はいいぞの会を結成するまである。</p><h2><a href=#%e3%82%ad%e3%83%bc%e3%83%9c%e3%83%bc%e3%83%89%e3%81%ae%e4%b8%8d%e8%aa%bf id=キーボードの不調 class=anchor aria-hidden=true>キーボードの不調</a></h2><p>Uを叩くとメチって音がする。髪の毛でも入り込んでしまったかもしれない。割とストレス。</p></p></div><div class=post-footer><time>July 22, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-07-21/>2023-07-21</a></h2><div><p><h2><a href=#%e8%87%aa%e4%bd%9cc%e3%82%b3%e3%83%b3%e3%83%91%e3%82%a4%e3%83%a9%e3%81%ae%e9%80%b2%e6%8d%97 id=自作cコンパイラの進捗 class=anchor aria-hidden=true>自作Cコンパイラの進捗</a></h2><p><a href=https://github.com/naoyafurudono/comp>https://github.com/naoyafurudono/comp</a></p><p>早いもので作り始めてから2週間たったみたい。もっとサクサク進むと思っていたのだけど、しばらく楽しめそう。</p><p>自作CコンパイラでCのプログラムの一部をコンパイルできるようになった。これまでは変数宣言をできなかったので型宣言のあるmain関数を読めなかったが、
intだけ許容するようになったので、初めてCのプログラムをコンパイラが受け付けたことになる。</p><p>こんなコードをコンパイルすると、</p><pre><code class=language-c>int main()
{ 
  int a; int b; int i;
  a=0; b=1; i=0;
  while(i &lt; 10)
  { 
    int t; 
    t=a+b; a=b; b=t; 
    i=i+1; 
  }
  return a;
}
</code></pre><p>こんなアセンブリを吐く。
SSAみたいな中間表現を挟んでレジスタ割り付けを真面目にやるのはいつがいいんだろうか。</p><pre><code class=language-arm64>.globl _main
.text
.balign 4
_main:
    stp x29, x30, [SP, #-16]!
    mov x29, SP
    sub SP, SP, #32
    mov x0, #-16
    str x0, [SP, #-16]!
    mov x0, #0
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    ldr x1, [SP], #16
    str x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x0, #-24
    str x0, [SP, #-16]!
    mov x0, #1
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    ldr x1, [SP], #16
    str x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x0, #-32
    str x0, [SP, #-16]!
    mov x0, #0
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    ldr x1, [SP], #16
    str x0, [x29, x1]
    str x0, [SP, #-16]!
.L0:
    mov x1, -32
    ldr x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x0, #10
    str x0, [SP, #-16]!
    ldr x1, [SP], #16
    ldr x0, [SP], #16
    cmp x0, x1
    cset x0, lt
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    cbz x0, .L1
    mov x0, #-40
    str x0, [SP, #-16]!
    mov x1, -16
    ldr x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x1, -24
    ldr x0, [x29, x1]
    str x0, [SP, #-16]!
    ldr x1, [SP], #16
    ldr x0, [SP], #16
    add x0, x0, x1
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    ldr x1, [SP], #16
    str x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x0, #-16
    str x0, [SP, #-16]!
    mov x1, -24
    ldr x0, [x29, x1]
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    ldr x1, [SP], #16
    str x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x0, #-24
    str x0, [SP, #-16]!
    mov x1, -40
    ldr x0, [x29, x1]
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    ldr x1, [SP], #16
    str x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x0, #-32
    str x0, [SP, #-16]!
    mov x1, -32
    ldr x0, [x29, x1]
    str x0, [SP, #-16]!
    mov x0, #1
    str x0, [SP, #-16]!
    ldr x1, [SP], #16
    ldr x0, [SP], #16
    add x0, x0, x1
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    ldr x1, [SP], #16
    str x0, [x29, x1]
    str x0, [SP, #-16]!
    b .L0
.L1:
    mov x1, -16
    ldr x0, [x29, x1]
    str x0, [SP, #-16]!
    ldr x0, [SP], #16
    mov SP, x29
    ldp x29, x30, [SP], #16
    ret
    mov SP, x29
    ldp x29, x30, [SP], #16
    ret
</code></pre></p></div><div class=post-footer><time>July 21, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-07-19/>2023-07-19</a></h2><div><p><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io>実装しているCコンパイラ</a>
で関数定義をできるようになった🎉。今までも既存のコンパイラで作ったオブジェクトファイルとリンクすれば呼び出すことはできていたが、自分で定義した関数がある程度ちゃんと呼べるようになった。</p><p>まだ型が<code>long</code>しかないので道は長い。</p><h2><a href=#fzf%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%9f%e3%81%82%e3%82%8c%e3%81%93%e3%82%8c id=fzfを使ったあれこれ class=anchor aria-hidden=true>fzfを使ったあれこれ</a></h2><p><a href=https://github.com/atweiden/fzf-extras>https://github.com/atweiden/fzf-extras</a> ここが良さげ。</p></p></div><div class=post-footer><time>July 19, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-07-17/>2023-07-17</a></h2><div><p><p>Cコンパイラをarm macで実装しているのだけど、<code>a=b=0; return b;"</code>みたいなコードがセグメント違反で落ちる。
lldbで調べてみると、main関数は正しい値を<code>w0</code>にセットして<code>ret</code>できていそうなんだけどその後の動的リンクされたコードでエラーが発生しているみたい。設定する値を変えるとエラーにならずに実行が終了する。謎である。</p><p>ABIを守っていないのが悪さをしているかも。</p><h2><a href=#%e4%b8%89%e9%80%a3%e4%bc%91 id=三連休 class=anchor aria-hidden=true>三連休</a></h2><p>土曜日はパソコンしてた。お昼頃に連絡が来ていたことに気がついて、翌日の約束をした。</p><p>勢いで日曜日は丹沢に行くことになって、卒業ぶりに会った友達と2時間くらいの登山をしてきた。コースタイムが4時間だったのでいいペースだった。最近登山をしておらずペースタイム通りの時間でいく想定をしてしまっており、思ったよりもあっさりと終わってしまった。友達の靴が下山した後の道で壊れてしまったのでサンダルを貸して歩くことに。風呂に入ってからはま寿司で3時間くらいお茶を飲んで帰宅した。</p><p>日曜日は海の日なので海を目指して部活の後輩と走った。天王洲アイルが海の近くだったのでそこまで行ったのだが、思ったよりも海っぽくなかったのが残念。久しぶりに走ったので走り始めがだいぶ辛かった。</p><p>久しぶりの人と会うと時間の流れを感じる。</p></p></div><div class=post-footer><time>July 17, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/arm64/>arm64のメモ</a></h2><div><p><p><a href=https://github.com/naoyafurudono/comp>Cコンパイラを実装する</a>ためにarm64のことを調べている。この記事はそのメモ。</p><h2><a href=#%e5%85%ac%e5%bc%8f%e3%83%89%e3%82%ad%e3%83%a5%e3%83%a1%e3%83%b3%e3%83%88 id=公式ドキュメント class=anchor aria-hidden=true>公式ドキュメント</a></h2><p>よくあるソフトウェアのライブラリについているドキュメントとは毛色が違う。</p><ul><li><a href=https://developer.arm.com/documentation/den0024/a/An-Introduction-to-the-ARMv8-Instruction-Sets>Armv8-A Instruction Set Architecture</a>が優しい<ul><li><a href="https://developer.arm.com/-/media/Arm%20Developer%20Community/PDF/Learn%20the%20Architecture/Armv8-A%20Instruction%20Set%20Architecture.pdf?revision=ebf53406-04fd-4c67-a485-1b329febfb3e">PDF版もある</a>。空白多めのシングルカラム39ページなのでサクッと読める。最初に読んでおくと幸せになれたかも。</li></ul></li><li><a href=https://github.com/ARM-software/abi-aa/releases/download/2023Q1/aapcs64.pdf>Procedure Call Standard for the Arm® 64-bit Architecture (AArch64) (pdf)</a>がCコンパイラを実装するときに気になる細かいことをコンパクトにまとめてそうな印象。</li><li>上のドキュメントを含む<a href=https://github.com/ARM-software/abi-aa/releases>公式のリンク集がある</a></li></ul><h2><a href=#%e3%83%84%e3%83%bc%e3%83%ab id=ツール class=anchor aria-hidden=true>ツール</a></h2><p>Arm macを使っている人の話です。</p><ul><li>既存コンパイラがはくアセンブリを覗く方法<ul><li>アセンブリをはく: <code>gcc -O0 -S</code></li><li>ディスアセンブル: <code>otool -vVt</code></li></ul></li><li>デバッガで調査する<ul><li>lldbが使える</li><li>エラー箇所の特定に便利</li><li>ドキュメント<ul><li><a href=http://www.den.t.u-tokyo.ac.jp/ad_prog/debug/>入門記事（東大の講義ページ）</a>
何もわからんくなったら{ここに立ち返る|ここから始める}のが良さそう</li><li><a href=https://lldb.llvm.org/use/tutorial.html>公式チュートリアル</a>: ちょっと読んだ。真面目に勉強するなら導入に良さそう</li></ul></li></ul></li></ul><h2><a href=#%e6%84%9f%e6%83%b3 id=感想 class=anchor aria-hidden=true>感想</a></h2><p>アセンブリ命令って割と体系的になってなくてやばいイメージがあったけど、
arm64は秩序がある程度あるように感じている。まだ深淵を覗けていないだけかもしれないが。汎用レジスタの名前が簡単なことが大きいかもしれない。</p></p></div><div class=post-footer><time>July 15, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-07-08/>2023-07-08</a></h2><div><p><h2><a href=#%e3%83%8e%e3%83%bc%e3%83%88%e3%83%91%e3%82%bd%e3%82%b3%e3%83%b3%e3%81%ae%e6%81%a9%e6%81%b5 id=ノートパソコンの恩恵 class=anchor aria-hidden=true>ノートパソコンの恩恵</a></h2><p>椅子に座るほどの元気がなくてもパソコン座れるので楽しい。気軽にコーディングできる。</p><h2><a href=#c%e3%82%b3%e3%83%b3%e3%83%91%e3%82%a4%e3%83%a9%e3%81%ae%e9%80%94%e4%b8%ad%e7%b5%8c%e9%81%8e id=cコンパイラの途中経過 class=anchor aria-hidden=true>Cコンパイラの途中経過</a></h2><p>cコンパイラ実装するやつは、今からローカル変数の定義に入るところ。ここまでで、四則演算と比較をコンパイルできるようになった。
armでやっているのだが今のところそんなにx86と違わない。
push/popでスタックポインタがarmだと16byte境界にしか設定できないとか、割り算がシンプルだとかくらいの違いしか観測していない。</p><p>そういえばenumは値だった。変数名みたいにコンパイラがよしなにするやつというイメージが強くて戸惑ってしまった。今回初めてcファイルを頭を使って分割した。定義と宣言の違いを認識して活用する日強がある。</p><p>パーサ前はサクッとできて、コード生成も一応形にはしたのだが、生成したアセンブリをアセンブルして実行するとセグフォで落ちる。
x29にSPをmovするだめみたい。x29以外にしたらどうだろうと思い、x9を使ってみたらセグフォのタイミングが変わった。ちゃんと追ってないので明日起きたら追ってみよう。</p><p>とりあえず、armのマニュアルを落とした。めちゃ長いけど良さげ。ソフトウェアと違って、ライブラリが無い分こういうふうに一つのでかいドキュメントが提供されるのはなんかそうなんだろうな、という感じがする。Web版よりも検索しやすいのはいいこと。今日はこれくらいにしよう。</p><p>ちなみに今はラフロイグ10年を飲んでいる。いいでしょ。</p><h2><a href=#%e6%9c%80%e8%bf%91%e6%9c%ac%e3%82%92%e8%aa%ad%e3%82%80%e9%87%8f%e3%81%8c%e6%b8%9b%e3%81%a3%e3%81%a6%e3%81%84%e3%82%8b id=最近本を読む量が減っている class=anchor aria-hidden=true>最近本を読む量が減っている</a></h2><p>動画を見たり手を動かすことが増えた。あとは仕事でドキュメントを読む時間が増えて、活字が安定供給されているのが影響しているかも。</p><p>とはいえ仕事で読むドキュメントは、読み物としてはそんなに面白く無いことが多い。その分手を動かしてものを作るのが楽しいからいいのだけど、小説を読む楽しみとか、心に響く論文を読む感覚が足りない。小説とか論文とかに飽きてきたのはあるのかもしれない。残念ながら深掘りできる人間ではなかったのか。広く学ぶ好奇心とかがあるわけでもないのだけど。</p><h2><a href=#%e3%83%a6%e3%83%bc%e3%83%95%e3%82%a9%e3%82%92%e7%ac%ac%e4%ba%8c%e3%82%b7%e3%83%bc%e3%82%ba%e3%83%b3%e3%81%be%e3%81%a7%e8%a6%8b%e7%b5%82%e3%81%88%e3%81%9f id=ユーフォを第二シーズンまで見終えた class=anchor aria-hidden=true>ユーフォを第二シーズンまで見終えた</a></h2><p>話題になっていたのは当時から認識していたが、ずっとみていなかったユーフォを見た。特に第一シーズンが好きで、上手くなりたい、のあたりが響いている。僕がある程度まじめに考えて方向性を決めるときには、上手くなりたいが奥底に合ったなと再認識させられた。</p><p>頑張っているときはわからないけど、少し環境が変わると上手くなっていたことがわかる。加えて、そのときになって周りから、それが上手い人というラベルを貼られることに気がつくし、振り返ると上手くなったなと気がつく。上手くなりたいと憧れた、あの頃の自分からすると今の自分は割といい線行ってるんじゃないかと思う側面がある。全部が全部上手くなってるわけじゃないけど。</p><p>この頃は、上手くなった先に何があるのかということをちらほら考える。幸せがあると思っていたのだが、実際のところはどうなんだろうか。今は体力と好奇心と自尊心がボトルネックになって、ボトルネックになってることがそれらを削っていくんじゃないかと思う。また、自分が上手くなるのにかかる時間が実感を通して認識できたことで、自分の限界を認識するようになるのだろう（僕はまだ認識してない。アカデミアのスターにも総理大臣にも、経済界のドンにも縁があればなれると思ってる。巡り合わせに依ると思ってる時点で擦れているのかもしれないけど）。</p><p>僕はアニメを見て、アニメの感想ではなく内省をアウトプットしたくなってしまうので自分から進んでアニメの話をしたくならない。聞かせるのは悪いなという気持ちとなんか恥ずかしい気持ちがある。日付が変わってしまいそうなのでこのくらいで。ところでフロムザバレルは甘い。干し芋っぽい風味がする。</p><h2><a href=#%e9%9b%91%e8%ab%87 id=雑談 class=anchor aria-hidden=true>雑談</a></h2><p>明日はランニングしよう。午前中に走ってみる。</p></p></div><div class=post-footer><time>July 8, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-07-05/>2023-07-05</a></h2><div><p><h2><a href=#%e8%ab%96%e7%90%86%e3%81%a8%e5%93%b2%e5%ad%a6%e3%81%a8%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%9f%e3%83%b3%e3%82%b0%e8%a8%80%e8%aa%9e id=論理と哲学とプログラミング言語 class=anchor aria-hidden=true>論理と哲学とプログラミング言語</a></h2><p>プロトタイプベースのオブジェクト指向言語について、哲学の方面から議論したエッセイを読んだ。クラスベースなのは古典的なアリストテレス的な分類の考え方に基づくもので、プロトタイプベースなものはヴィトゲンシュタインっぽい考え方に基づくとのこと。</p><p>アリストテレス的な考え方では、物事は分類できて、しかもいろんな分類があったとしても最高の分類みたいなものがある、みたいに捉えるそう。分類の中でその類を象徴する代表みたいなものも取れてしかるべきみたいな。一方でヴィトゲンシュタインっぽい考え方ではアリストテレス的なのには割と無理があって、そんな考え方が通用するのは数学の概念くらいとしていて、分類は観察する主体に依るし、文化とかの影響を受けるもので「科学」みたいに自然に導かれるようなものではない、みたいな考え方をするらしい。</p><p>リアルワールドを表現、分類しようと思うと確かにヴィトゲンシュタインの方がしっくりくるというか、矛盾が少なさそうな雰囲気がする。だけど、独自の世界を作ろうと思うとヴィトゲンシュタインの考え方に基づくのは骨が折れそう。</p><p>では、関数型言語とか意味論の人たちの視点だとどうなるだろうか。オブジェクト指向は哲学の話に基づいて議論しているみたいだが、型システムとか意味論は論理学をベースにしがち。型は命題でプログラムは証明。</p><p>ところで</p><blockquote><p>型は命題でプログラムは証明。</p></blockquote><p>この標語はしっくりきていない。型に入る_項_を僕は証明だとは思えない。依存型は項に依存する型だとは思えるけど、証明に依存する型と言われるとなんだかなと思う。まあ、その項にも型をつけるので、その型の証明にはなっているのだけど。Numみたいな型を命題というのがしっくりこないのと同じか。</p><p>依存型でも依存する項の型が関数型とかの命題っぽい型だったら証明に依存している雰囲気を味わえるかもしれない。帰着を考えればいいのかな。この命題が成り立つなら、これこれが成り立つ。これは依存型じゃないな。帰着は型をとって型を返すだけなので、type operatorだ。</p><p>ところでラフロイグの10年おいしい。</p><p>nが2より大きい、みたいな命題は依存型がないと表現できないか。簡単だ。</p><pre><code>\Pi n: Nut. (n &gt; 2 -&gt; \Pi x,y,z: Nut. x^n + y^n != z^n)
</code></pre><p>ここで <code>_ > _</code> は依存型。普通だね。</p><p>話を戻す（ラノベだったらここで閑話休題って言ってた）。オブジェクトと抽象化の話をしていたのだった。オブジェクト指向では、分類を動的な性質としてみるきらいがありそう。それに対して関数型っぽい世界では、分類は静的にできる型判断でしかないイメージ。型によって動的な振る舞いは変わったり変わらなかったりするけど、とりあえず型は静的につけるものだと思う。その情報を実行時まで持ち越すかは好きにすればいい、くらい。</p><h3><a href=#%e3%81%8a%e6%b0%97%e6%8c%81%e3%81%a1 id=お気持ち class=anchor aria-hidden=true>お気持ち</a></h3><p>動的メソッドディスパッチはいまだにしっくりこないし、メタプログラミングに関しては勝手にやってくれって思ってしまう。</p><h2><a href=#hugo%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6 id=hugoについて class=anchor aria-hidden=true>Hugoについて</a></h2><p>ディレクトリの構造で投稿の分類を決めるのはよくないと思う。分類なんて書いているうちに変わるのだし、その方が便利そうなので全てはフロントマターにお任せしてしまえばいいと思った次第。そんなこという子はhugoユーザには要らないのだろうから、そのうち独立するのがいいんだろうな。</p><h2><a href=#%e4%bb%8a%e6%97%a5%e3%81%af7%e6%9c%885%e6%97%a5 id=今日は7月5日 class=anchor aria-hidden=true>今日は7月5日</a></h2><p>明後日が七夕だ。花金なので会社の人と七夕のみをできるかもしれない。</p><h3><a href=#%e4%b8%83%e5%a4%95%e3%81%ae%e3%81%bf id=七夕のみ class=anchor aria-hidden=true>七夕のみ</a></h3><p>七夕は織姫と彦星が一年に一回逢瀬を重ねられる日。天の川に橋がかかるんだったか川の水が引くんだったかで会える。ここでは皮の水が引く説を採用する。</p><p>旧暦では時期的に川の水が引いたかもしれないが、現代では7月の頭はまだまだ梅雨みたいなもので川は元気だ。このままでは織姫と彦星は約束の日に会えない。かわいそう。なのでいつも夏の大三角に心を癒してもらっている僕たちは、せめてもの恩返しに川を飲み干して、逢瀬を支援することにした。これが七夕のみ。幸いなことに梅雨の雨で薄まった川はアルコール度数が比較的低く、ほろ酔いくらいのイメージ。だからこの日は梅雨がもたらす潤沢な量のほろ酔いを飲む。</p><h2><a href=#%e3%82%a8%e3%83%b3%e3%82%b8%e3%83%8b%e3%82%a2%e3%83%aa%e3%83%b3%e3%82%b0%e3%81%ae%e5%b9%b8%e3%81%9b id=エンジニアリングの幸せ class=anchor aria-hidden=true>エンジニアリングの幸せ</a></h2><p>エンジニアリングは手段でしかないと今は本心で思っている。とはいえ、プログラミングやエンジニアリングをしていて幸せを感じるタイミングもある。このギャップはエンジニアリングの成果を確かめることにあると思う。</p><p>例えば家に電気が通っていることは感動的なことだと頭ではわかるが、その恩恵を享受することは特に幸せだとは思わない。それに対して、新しくプログラミング言語を学んで、これまではできなかった表現でこれまではできなかった解決策を実現するのはとんでもなく楽しい。さらにはこれまでは明らかではなかった解決の方法を明らかにするのは結構な幸せだ。</p><p>このギャップは成果を確かめること、差分を観測することにあると思う。微分係数が大きいときが一番やりがいを感じる、みたいな話に通じる気がする。</p><h2><a href=#%e4%bb%8a%e6%97%a5%e8%89%af%e3%81%8b%e3%81%a3%e3%81%9f%e3%81%93%e3%81%a8 id=今日良かったこと class=anchor aria-hidden=true>今日良かったこと</a></h2><ul><li>会社の人の親切に触れたこと<ul><li>一人だけじゃなくて4,5人くらい</li></ul></li><li>会社じゃない知り合いとちょっと仲良くなれたこと</li><li>ラフロイグがおいしいこと</li><li>オブジェクト指向の話が面白かったこと</li><li>権八に行けたこと</li></ul><h2><a href=#%e3%81%82%e3%81%a8%e3%81%8c%e3%81%8d id=あとがき class=anchor aria-hidden=true>あとがき</a></h2><p>こんなしょうもないことを書いていたせいで、今日の元気が終わってしまった。ラフロイグに完敗。またこんなことをインターネットで公開するおかげで恥の概念がなくなってきた。これは良し悪しありそう。</p></p></div><div class=post-footer><time>July 5, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-06-29/>2023-06-29</a></h2><div><p><h2><a href=#crateio%e3%83%87%e3%83%93%e3%83%a5%e3%83%bc id=crateioデビュー class=anchor aria-hidden=true>crate.ioデビュー</a></h2><p>crate.ioに初めてコードを登録した。<code>cargo install</code> で入るから便利。ちょっとしたCLIツール書く体験がなかなか良い。
copilotが面倒なことやってくれる。</p><h2><a href=#easy-cp%e3%82%92%e4%bd%9c%e3%81%a3%e3%81%9f id=easy-cpを作った class=anchor aria-hidden=true>easy-cpを作った</a></h2><p><a href=https://crates.io/crates/easy-cp><img src=https://img.shields.io/crates/v/easy-cp.svg alt=crates.io></a></p><p>Railsとか書いてると深いところに元からあるファイルをコピーしたいことがちょいちょいある。そのときに長いパスを2回打ちたくないので作った。</p></p></div><div class=post-footer><time>June 29, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-06-24/>2023-06-24</a></h2><div><p><p>macのタイムゾーンの設定が狂っていて、今日の投稿がこれと前回の二つに分かれてしまった。</p><p>今日はmacの設定と、以降に伴って壊れたちょっとしたCLIツールの修正した。昔Rustで雑に書いたもので、エラー処理が辛そうだったので少し勉強して改善した。
anyhowを使ってみたい気持ちが湧いたけど、まずは基本的なところからということでトレイトオブジェクトを使うことにした。<code>type Result&lt;T> = std::Result&lt;T, dyn Error></code>みたいな感じにすることで、いろんなエラーを孕んだresultに<code>?</code>を使うことができて幸せ。</p><p>一箇所ムムッとなったのが、クロージャの中で<code>?</code>を使う箇所。<code>dyn Error</code>の気持ちで書いていたら、推論器はもっと具体的な型を推論していたみたいで、二つ目のエラー型の式に対して<code>?</code>したら型エラーになってしまった。こういうときはアノテーションをつければ良い。
Rustの型推論の割り切り方に慣れていない。</p></p></div><div class=post-footer><time>June 24, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-05-13/>2023-05-13</a></h2><div><p><h2><a href=#%e4%bb%8a%e6%97%a5%e3%81%afrust%e3%82%92%e5%b0%91%e3%81%97%e5%8b%89%e5%bc%b7%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b id=今日はrustを少し勉強している class=anchor aria-hidden=true>今日はRustを少し勉強している</a></h2><p>もともと<code>bash</code>で書いていたスクリプトを拡張したくなって、普段ならPythonで書くところを今日は新しいことをしてみようということでRustをつかってみることにした。</p><h3><a href=#%e8%8b%a6%e5%8a%b4%e8%a9%b1%e3%81%97 id=苦労話し class=anchor aria-hidden=true>苦労話し</a></h3><p>Rustはまったく初めてと言うわけではなくて、ちらちらドキュメントを読んだり、ノリで学校の課題をRustで書いてみたり（痛い目にあった）したことがある。所有権のあたりで苦労はあまりしなかった（というかPythonっぽくヒープを贅沢に使うコードを書いた）のだが、<code>Result</code> / <code>Option</code>の変換で発狂しかけた（メソッドが定義されていることに思いをはせられずに自作してしまった）。</p><p>あまり苦労しなかったと言いつつ、所有権のあたりで困りはしている。参照を受け取るコンストラクタに、その場で作ったオブジェクトを渡したいときに、一旦変数に束縛しないと、渡すオブジェクトが即死してしまっていけない問題が面倒。名前をつけるまでもない、式が体をを表しているような値にまで名前をつかないといけないのはしんどい。コンストラクタが所有権を奪うようにすればよいのだろうか。いらないから参照にしたのだよな&mldr;。</p><h3><a href=#%e3%81%a8%e3%81%af%e3%81%84%e3%81%88%e6%a5%bd%e3%81%97%e3%81%84 id=とはいえ楽しい class=anchor aria-hidden=true>とはいえ楽しい</a></h3><p>今ではそこそこなれてきて、代数的データ型とまともな型検査器がついたPythonくらいの書き方はできるようになった。
Rustのライブラリがイケイケに作られていて（エラー処理周りは辛いと感じるけど）、プログラムを書いていて楽しい。<a href=https://github.com/naoyafurudono/naoyafurudono.github.io/commit/5dffad6d10406fa83c4d9dd8eaa91a3c769a553f>すごく汚く書いてしまった</a>。当面の目標はまともにかけるようになることかな？ちょっとしたCLIでは大差ないのかもしれないけど。</p><p>ブログのGitHubのプログラミング言語構成比がカオスなことになってきた。</p><h2><a href=#%e8%83%83%e8%85%b8%e7%82%8e%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6 id=胃腸炎について class=anchor aria-hidden=true>胃腸炎について</a></h2><p>ここ何日か胃腸炎でつらい。今日はだいぶ回復して、Rustを勉強できるくらいになったけど、まだつらみを感じる。とはいえ三食たべても大丈夫な体に戻りはしたので問題なし。何日か会社に行けなかったのがなかなか悲しい。</p><p>今日は以前もらい忘れた診断書を書いていただいた。前回の診療に対して診断書を出してもらうことはなんだか難しそうで、もう一度診察していただくことになってしまった。自分の中では治ったと思っていたけど、見ていただいたらまだ治っていないとのことだったし、今はそう感じる（流されやすい性格なのか？）ので、忠告していただけてよかったと思うことにしている。</p><h2><a href=#%e9%a3%9f%e5%99%a8%e3%82%92%e8%b2%b7%e3%81%a3%e3%81%9f id=食器を買った class=anchor aria-hidden=true>食器を買った</a></h2><p>病院の帰り道で食器のフリマ的なことを日本料理屋さんがやっていた。普段使っている食器を入れ替えるのかなにかで、安く売り出してくださっていたようだ。胃腸炎になるまえに、会社のランチで「おいしそうな自炊の写真はくろっぽい器が大切」とのアドバイスを頂いていたことを覚えていたので、これは運命だと思い食器を購入した。黒っぽい器はどんぶりしか出会えなかったけど、それがなかなかいい感じだし、白っぽい器もいい感じのにいくつか巡り会えたのでほくほくしている。</p><p>あとはおいしそうなご飯をつくればよい。</p><h3><a href=#%e8%bf%bd%e8%a8%98 id=追記 class=anchor aria-hidden=true>追記</a></h3><p>夕飯につかってみた。いい感じ。味噌汁のお椀（蓋付き）が小さいやつで、フリーズドライの味噌汁一杯分しか入らないやつ（褒めてる）。感動している。</p><h2><a href=#%e3%82%ad%e3%83%ab%e3%83%a9%e3%82%ad%e3%83%ab%e3%81%8c%e3%81%8a%e3%82%82%e3%81%97%e3%82%8d%e3%81%84 id=キルラキルがおもしろい class=anchor aria-hidden=true>キルラキルがおもしろい</a></h2><p><a href=https://www.amazon.co.jp/%E3%82%AD%E3%83%AB%E3%83%A9%E3%82%AD%E3%83%AB/dp/B074BH9KHP>（アマプラ）</a>。グレンラガンの監督？が制作しているらしい。ノリが楽しい。</p></p></div><div class=post-footer><time>May 13, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-05-02/>2023-05-02</a></h2><div><p><h2><a href=#%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%9f%e3%83%b3%e3%82%b0%e3%83%91%e3%83%a9%e3%83%80%e3%82%a4%e3%83%a0%e3%82%92%e4%b8%a6%e3%81%b9%e3%81%a6%e8%a6%b3%e5%af%9f%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b id=プログラミングパラダイムを並べて観察している class=anchor aria-hidden=true>プログラミングパラダイムを並べて観察している</a></h2><p>DDD周りを最近漁っている。原著はオブジェクト指向で説明されているけど、関数型で説明している本を直近で読んでいる。僕はプログラミングを関数型から始めた人間だし、集合論や関数解析が好きだったからかオブジェクト指向があまりしっくり来ない。インターフェースとかクラスでモデルする気持ちはなんとなく分かる気がするし、拡張性とか再利用性を考えたときに既存のコードをできるだけ壊さずに機能追加できるのは強いと思う。なんだけど、そういう変更ありきで書かれたコードが素直に対象を表現しているとは思えなくて辛さを感じてしまう。それに対して型とか関数型のあれこれを考えるときは、まだ分かる感じがして救いがある。モナドとかが普通のプログラミングに入ってくるとやはりこんがらがってくるのだけど。きっとパラダイムの問題ではなくて、抽象化になれてないとか親しんでないみたいなところが問題なのだろう。</p><p>話をDDDを漁っている件に戻そう。オブジェクト指向と関数型のそれぞれで同じようなことを表現しようと思ったときに使う言語機能を比べられて楽しい、ということを言いたかっただけなのだった。こういう見方をしていると、代数的エフェクトやエフェクトシステムのもたらす幸せがもっと浮かんできて本当に欲しくなるし、どんな側面が役立ちそうで、どんなところは妥協して良さそうかが感じ取れるようになってくるような気がする。</p><h2><a href=#ulauncher%e3%82%92%e4%bd%bf%e3%81%84%e5%a7%8b%e3%82%81%e3%81%9f id=ulauncherを使い始めた class=anchor aria-hidden=true>Ulauncherを使い始めた</a></h2><p><a href=https://ulauncher.io/>Ulauncher</a>を使い始めた。とりあえずはただのランチャーとして使うけど、拡張機能をpythonでかけるのでターミナルの代わりのCLIとしても良いかもしれない。</p></p></div><div class=post-footer><time>May 2, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-04-28/>2023-04-28</a></h2><div><p><h2><a href=#%e6%84%8f%e5%91%b3%e8%ab%96%e3%81%ae%e8%a9%b1 id=意味論の話 class=anchor aria-hidden=true>意味論の話</a></h2><p>今日は意味論の直感が少し生えたので機嫌がいい。寝て起きたらもう少しまじめに考えよう。</p><h3><a href=#%e8%bf%bd%e8%a8%98 id=追記 class=anchor aria-hidden=true>追記</a></h3><p>完全に忘れていた。一回捨てた継続渡しスタイルで考えるのがやはり良いだろうという直感のもとでの考えだった。細かいことは忘れてしまったが、少し考えれば再現できる程度だったと思う。継続フレームを生むときと、式を評価するタイミングを明示的にわけるとか、反対にそういうくくりで共通化することでこれまで見えていなかったアスペクトが表面化していい感じになりそう、みたいな直感だった気がする。</p></p></div><div class=post-footer><time>April 28, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-04-02/>2023-04-02</a></h2><div><p><p>CPythonの開発者向けドキュメントがとてもよい。今は<a href=https://devguide.python.org/internals/compiler/>コンパイラの構成に関する部分</a>を読んでいる。抽象構文木の扱いやメモリ管理の方針など、コンパイラ開発の方針を説明している。ドラゴンブックとかからは得られない、開発手法の知識を得られて幸せ。</p><p>好きな言語にドキュメントがたくさんあることは本当に嬉しい。</p></p></div><div class=post-footer><time>April 2, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-03-19/>2023-03-19</a></h2><div><p><p>最近AIが流行っていて、精度がすごいと話題で、生活が多かれ少なかれ変わっていくのだろうなという感じがする。ああいう機械学習ベースのAIは学習で直感を鍛えて、それに基づく出力をするものだと僕は解釈している。人間が頭を使うときには直感を論理とか議論で検証して、主張の穴を見つけて改善するサイクルを回すはずだ。今の機械学習っぽいAIは直感で得た主張を論理で解釈しないだろう（<a href=https://www.nec.com/en/global/rd/technologies/201807/index.html>NECがそういうことを考えていそう</a>。それができればAIはもっとつよくなるはずだし、そういうAIを見てみたい。</p><p>実現するためにはAIの入出力に使う「言語」に解釈を入れることと、それをもとにして論証を行うことが必要だろう。今のAIは抽象構文木を操作の対象にしていて、それを意味を解釈するようにしたらいいんじゃないかという想像だ。</p><p>今ある論理が世の中の事象を扱うのに十分かはわからないし、多分結構不足しているはずだ。機械学習AIのための論理体系の研究とかあったら楽しいだろう。NIIとかでやってないだろうか？</p><h2><a href=#big-peat%e3%81%8c%e3%81%99%e3%81%94%e3%81%8f%e3%81%8a%e3%81%84%e3%81%97%e3%81%84 id=big-peatがすごくおいしい class=anchor aria-hidden=true>Big Peatがすごくおいしい</a></h2><p>おととい届いた<a href=https://bigpeat.com/>Big Peat</a>がとてもおいしい。明日の研究室飲み会にもっていこう。ちょうど二年くらい前に部活の先輩に勧めていただいたのだが、懐具合の問題で飲めずにいた。少し無理してでも飲んでおいたほうが良かったかと思うくらいには好き。ストレートで飲んでもおいしいし、ハイボールにしてもおいしい。天才か？
ぼくはスコッチウイスキー？が好きなのかもしれない。</p><p>学部2年のころ、確率論基礎の試験の前日にウイスキーを飲む会に誘っていただいたとき、ラフロイグ・ロアを味見させていただいて半分感動したのを覚えている。あのころは二十歳になりたてでお酒のおいしさは今よりも分かっていなかったのだが、それでもいいかんじなことは分かった。それからラフロイグ・ロアには縁がなかったのだが今気になっている。数量限定なようで、毎年11月ころに発売されそうな雰囲気がある。今もアマゾンで売ってるが、転売価格に見えるので時期がくるまで我慢しよう。</p><p>ちなみにBig Peatと一緒に勧めていただいたジョニーウォーカーのグリーンラベルはすでに飲んでいて、 やはり好きな感じだった。</p></p></div><div class=post-footer><time>March 19, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/effect-handlers-without-continuation/>エフェクトハンドラの良さと実用性について</a></h2><div><p><p>エフェクトハンドラで継続や代数的エフェクトを扱う必要性は一ミリもなくて、実用的にそれらが欲しくなることはないか、あるいは限られていてそこまで一般的な機能を提供する必要はないんじゃないかと感じている。</p><p>このあたりを議論するために</p><ol><li>エフェクトハンドラの嬉しさ</li><li>意味論の歴史的経緯</li><li>改善ポイント</li></ol><p>を考える。</p><p>なお、この記事はとくに裏付けもなく書いている。気が向いたら裏付けをしようと思っているが、この記事の目的は僕の考えの整理であって、世に主張をしたいわけではない。</p><p>記事の内容は不正確なことを留意されたい。</p><h2><a href=#%e3%82%a8%e3%83%95%e3%82%a7%e3%82%af%e3%83%88%e3%83%8f%e3%83%b3%e3%83%89%e3%83%a9%e3%81%ae%e5%ac%89%e3%81%97%e3%81%95 id=エフェクトハンドラの嬉しさ class=anchor aria-hidden=true>エフェクトハンドラの嬉しさ</a></h2><p>エフェクトハンドラが実際的 (practical) なプログラミング言語でエンドユーザに使わせたくなるのは</p><ul><li>エフェクトシステムと相性のよい意味論</li><li>動的束縛</li></ul><p>を提供したいからではないだろうか。エフェクトハンドラを言語に入れれば、それで表現できる操作は自動的にエフェクトシステムで追跡できるし、ハンドラを用いることでエフェクトをローカルに使えるのは特筆するべきだろう。汎用性とlocal reasoningのしやすさはエフェクトハンドラのもつ良い性質だと思う。</p><p>エフェクトハンドラで実現できる動的束縛はとても使い勝手が良い上に、エフェクトシステムで追跡することで使い勝手が上がりそうだ。動的束縛のためだけのエフェクトシステムではなく、もう少し凝ったことができるエフェクトシステムがつくとなお幸せだろうから、エフェクトハンドラみたいな抽象度の比較的高いフレームワークで実現するのは幸せなんじゃないかと感じる。</p><h2><a href=#%e6%84%8f%e5%91%b3%e8%ab%96%e3%81%ae%e6%ad%b4%e5%8f%b2%e7%9a%84%e7%b5%8c%e7%b7%af id=意味論の歴史的経緯 class=anchor aria-hidden=true>意味論の歴史的経緯</a></h2><p>エフェクトハンドラと呼ばずに &ldquo;algebraic effects&rdquo; とか &ldquo;algebraic effects and handlers&rdquo;
とか呼ぶ流派、時代がある。歴史的には</p><ul><li>algebraic effects</li><li>algebraic effects and handlers</li><li>effect handlers</li></ul><p>みたいな流れで登場したはずだ。最初はハンドラはなくて、モナドとかの話をするような人たちが副作用にモナドではない別の表現を与えようとしたんだったか。ここでいうモナドはモナド則とかを真面目に考えるような数学のモナド。代数的エフェクトもその流れの中に（このころは）あったはず。そもそも代数的エフェクトの代数とは、操作が（0だか1こ以上）あって、それらに等式制約を課す。それを満たすようなモデルを持つのが代数 (algebra) である、みたいな世界だっと思う。群とか環は代数だけど、体は代数じゃないみたいな話を聞いたことがある。そういうのりの代数として、エフェクトを表現したらモナドの合成みたいなことを考えるときに幸せだ、という主張がことの発端だった気がする。</p><p>ここまでは数学とかモデル理論？とかの話によっていて、あまりプログラミング言語っぽい雰囲気がしない。ハンドラとか継続が入ってきた経緯はしらないが、多分、プログラミング言語に代数的エフェクトを入れるにあたって、モナドのbindやreturnみたいなものを定義するように、エフェクトに意味を与える仕組みとしてハンドラが考えられたんじゃないかと思う。このあたりは論文をまじめに読めば分かるはず。これが確か2014年くらいのこと。</p><p>2000年くらいだったかから考えられていたエフェクトシステムとの相性に目をつけたからか知らないが、「代数的エフェクトとハンドラ」を取り入れた言語が2014年ころに登場し始める。2017年くらいにでてくる印象がある。
EffやKokaはこのへんな気がする。このあたりで、エフェクトが代数的であることはとくに気にされなくなっていき、エフェクトシステムと例外ハンドラがうまいこと組み合わさる限定継続演算子くらいの気持ちで代数的エフェクトとそのハンドラが捉えられて、やがて代数的ではないことが気になる人々がエフェクトハンドラと呼ぶようになったのではないかと思っている。</p><h2><a href=#%e6%94%b9%e5%96%84%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88 id=改善ポイント class=anchor aria-hidden=true>改善ポイント</a></h2><p>限定継続は本当に必要だろうか。もっとやさしい概念を提供するのにとどめるのはいかがだろうか。ワンショット継続とかに限定する言語もあるが、それは正しい方向性だろうか。</p><p>僕たちがほしかったものは、local reasoningしやすいエフェクトシステムとそれで健全に管理できる意味論なんじゃないかと思う。エフェクトハンドラはその条件を満たすけど、もっと使い心地のよい意味論があるはずだと思う。</p><h2><a href=#%e3%81%82%e3%81%a8%e3%81%8c%e3%81%8d id=あとがき class=anchor aria-hidden=true>あとがき</a></h2><p>最後の文をメモしたくてこの記事を書いた。それ以外は文脈である。</p></p></div><div class=post-footer><time>March 16, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-02-26/>2023-02-26</a></h2><div><p><p>Golangをすごく久しぶりに書いた結果、構造体の要素がコピーされることを忘れておりデバッグに時間を溶かした（コピーした構造体のフィールドを書き換えて、コピー元に変化が起きると思い込んでいた）。最近はPythonやTSか、関数型言語ばかり書いていて、Cっぽい構造体の扱いをしていなかったので忘れてしまっていたのだろう。忘れていたけど、CやGoのように構造体の要素をコピーする意味論は好き。直感的というか、明示的にポインタを表現することが好きなのだろうか。</p></p></div><div class=post-footer><time>February 26, 2023</time></div></article></div><footer class=footer-mobile><div class=social-icons><a class=social-icon href=https://twitter.com/furudono2 target=_blank rel=noopener title=Twitter><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M8.991284 24.971612c10.189152.0 15.761088-8.441388 15.761088-15.761088C24.752372 8.970656 24.747512 8.731868 24.736496 8.494376 25.818008 7.712564 26.758256 6.737 27.5 5.62622c-.992628.440856-2.060748.738072-3.181248.871992 1.14372-.685584 2.02176-1.770768 2.435832-3.064176-1.070496.6345-2.25558 1.095984-3.517344 1.344492-1.010772-1.076652-2.450412-1.75014-4.043412-1.75014-3.059424.0-5.540292 2.480868-5.540292 5.539104.0.434808.0487079999999995.857412.14364 1.26306C9.19346 9.599108 5.11106 7.39472 2.3792 4.04294c-.476172.818424-.750168 1.769688-.750168 2.784132.0 1.921968.97794 3.61854 2.464992 4.61106C3.185528 11.41016 2.331788 11.160464 1.585184 10.745096 1.583888 10.768208 1.583888 10.791428 1.583888 10.815728c0 2.683152 1.909764 4.922856 4.4442 5.43078C5.562932 16.373084 5.07326 16.44134 4.56782 16.44134 4.210988 16.44134 3.863876 16.406024 3.526484 16.34144c.70524 2.200824 2.750112 3.802356 5.174928 3.8475-1.896264 1.485756-4.284576 2.37114-6.879924 2.37114C1.374476 22.56008.93362 22.534592.5 22.4834c2.451708 1.571076 5.362524 2.488212 8.491284 2.488212"/></svg>
</a><a class=social-icon href=https://www.instagram.com/donofuru/ target=_blank rel=noopener title=Instagram><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M14.0000238 2.00378571c3.2579524.0 3.6664762.0138095300000001 4.946.0721904800000002C20.222881 2.13421429 21.0949286 2.33702381 21.8579762 2.63359524 22.6468333 2.94011905 23.3158333 3.35030952 23.9827857 4.01721429 24.6496905 4.68416667 25.059881 5.35316667 25.3664524 6.14202381 25.6629762 6.90507143 25.8657857 7.77711905 25.9240238 9.05397619 25.9824048 10.3335 25.9962143 10.7420238 25.9962143 14.0000238 25.9962143 17.2579762 25.9824048 17.6665 25.9240238 18.9460238 25.8657857 20.222881 25.6629762 21.0949286 25.3664524 21.8579762 25.059881 22.6468333 24.6496905 23.3158333 23.9827857 23.9827857 23.3158333 24.6496905 22.6468333 25.059881 21.8579762 25.3664524 21.0949286 25.6629762 20.222881 25.8657857 18.9460238 25.9240238 17.6665 25.9824048 17.2579762 25.9962143 14.0000238 25.9962143 10.7420238 25.9962143 10.3335 25.9824048 9.05397619 25.9240238 7.77711905 25.8657857 6.90507143 25.6629762 6.14202381 25.3664524 5.35316667 25.059881 4.68416667 24.6496905 4.01721429 23.9827857c-.66690477-.6669524-1.07709524-1.3359524-1.38361905-2.1248095-.29657143-.7630476-.49938095-1.6350952-.55761905-2.9119524C2.01759524 17.6665 2.00378571 17.2579762 2.00378571 14.0000238 2.00378571 10.7420238 2.01759524 10.3335 2.07597619 9.05397619 2.13421429 7.77711905 2.33702381 6.90507143 2.63359524 6.14202381c.30652381-.78885714.71671428-1.45785714 1.38361905-2.12480952.66695238-.66690477 1.33595238-1.07709524 2.12480952-1.38361905C6.90507143 2.33702381 7.77711905 2.13421429 9.05397619 2.07597619 10.3335 2.01759524 10.7420238 2.00378571 14.0000238 2.00378571zm0 2.16147619C10.796881 4.1652619 10.4174524 4.1775 9.1525 4.23521429 7.98288095 4.28854762 7.34769048 4.48397619 6.92497619 4.6482619 6.36502381 4.86588095 5.96540476 5.12583333 5.54564286 5.54564286c-.41980953.4197619-.67976191.81938095-.89738096 1.37933333-.16428571.42271429-.35971428 1.05790476-.41304761 2.22752381C4.1775 10.4174524 4.1652619 10.796881 4.1652619 14.0000238 4.1652619 17.203119 4.1775 17.5825476 4.23521429 18.8475 4.28854762 20.017119 4.48397619 20.6523095 4.6482619 21.0750238 4.86588095 21.6349762 5.12588095 22.0345952 5.54564286 22.4543571 5.96540476 22.8741667 6.36502381 23.134119 6.92497619 23.3517381 7.34769048 23.5160238 7.98288095 23.7114524 9.1525 23.7647857 10.4173095 23.8225 10.7966429 23.8347381 14.0000238 23.8347381 17.2033571 23.8347381 17.5827381 23.8225 18.8475 23.7647857 20.017119 23.7114524 20.6523095 23.5160238 21.0750238 23.3517381 21.6349762 23.134119 22.0345952 22.8741667 22.4543571 22.4543571 22.8741667 22.0345952 23.134119 21.6349762 23.3517381 21.0750238 23.5160238 20.6523095 23.7114524 20.017119 23.7647857 18.8475 23.8225 17.5825476 23.8347381 17.203119 23.8347381 14.0000238 23.8347381 10.796881 23.8225 10.4174524 23.7647857 9.1525 23.7114524 7.98288095 23.5160238 7.34769048 23.3517381 6.92497619 23.134119 6.36502381 22.8741667 5.96540476 22.4543571 5.54564286 22.0345952 5.12583333 21.6349762 4.86588095 21.0750238 4.6482619 20.6523095 4.48397619 20.017119 4.28854762 18.8475 4.23521429 17.5825476 4.1775 17.203119 4.1652619 14.0000238 4.1652619zm0 13.8334762c2.2084286.0 3.9987143-1.7902857 3.9987143-3.9987143.0-2.2084762-1.7902857-3.9987619-3.9987143-3.9987619-2.2084762.0-3.9987619 1.7902857-3.9987619 3.9987619.0 2.2084286 1.7902857 3.9987143 3.9987619 3.9987143zm0-10.15895239c3.4021905.0 6.1601905 2.75799999 6.1601905 6.16023809.0 3.4021905-2.758 6.1601905-6.1601905 6.1601905-3.4022381.0-6.16023809-2.758-6.16023809-6.1601905.0-3.4022381 2.75799999-6.16023809 6.16023809-6.16023809zm7.8431429-.24338095c0 .79504762-.644523800000002 1.43952381-1.4395715 1.43952381C19.6085952 9.03592857 18.9640714 8.39145238 18.9640714 7.59640476S19.6085952 6.15683333 20.4035952 6.15683333c.795047699999998.0 1.4395715.64452381 1.4395715 1.43957143z"/></svg>
</a><a class=social-icon href=https://www.linkedin.com/in/naoya-furudono target=_blank rel=noopener title=LinkedIn><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M2 3.654102c0-.95502059.79442509-1.73012354 1.77383592-1.73012354H24.2261641C25.2058917 1.92397846 26 2.69908141 26 3.654102V24.3462148C26 25.3015521 25.2058917 26.0760215 24.2261641 26.0760215H3.77383592C2.79442509 26.0760215 2 25.3015521 2 24.3465315V3.65378524 3.654102zM9.27526132 22.1415901V11.2356668H5.65030092V22.1415901H9.27557808 9.27526132zM7.46341463 9.74691162c1.2638581.0 2.05068103-.83750395 2.05068103-1.88406715C9.49033893 6.79252455 8.72727273 5.97846056 7.48748812 5.97846056c-1.24073487.0-2.05099778.81406399-2.05099778 1.88438391.0 1.0465632.78650618 1.88406715 2.00316756 1.88406715h.02343998H7.46341463zM11.2815965 22.1415901h3.6246436v-6.089642C14.9062401 15.7263225 14.9299968 15.4000634 15.0256573 15.1675641c.261957499999999-.6515679.8584099-1.3259423 1.8599936-1.3259423 1.3113716.0 1.836237 1 1.836237 2.4662654v5.8337029h3.6246436V15.8885017c0-3.349699-1.7880899-4.9084574-4.172949-4.9084574-1.9553373.0-2.814064 1.0928097-3.2910991 1.8371872H14.9065569v-1.581248H11.2819132C11.3291099 12.2591067 11.2815965 22.1419069 11.2815965 22.1419069V22.1415901z"/></svg>
</a><a class=social-icon href=https://github.com/naoyafurudono target=_blank rel=noopener title=GitHub><svg width="28" height="28" viewBox="0 0 28 28" fill="#ababab" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M13.9988029 1.32087331C6.82105037 1.32087331 1 7.14112562 1 14.3212723c0 5.7436386 3.72454649 10.6157955 8.89038951 12.3348169C10.5408085 26.7757983 10.7778323 26.374374 10.7778323 26.0296121 10.7778323 25.7215609 10.7666595 24.9035493 10.760275 23.8189856 7.14426471 24.6042767 6.38131925 22.0760223 6.38131925 22.0760223c-.59136253-1.5019491-1.44369072-1.9017772-1.44369072-1.9017772C3.75729765 19.3682044 5.02701126 19.3841656 5.02701126 19.3841656 6.33183953 19.4759425 7.01817121 20.7241085 7.01817121 20.7241085c1.15958133 1.9863716 3.04300319 1.4125664 3.78360289 1.0797753.1181129-.8395592.4540962-1.4125663.8251942-1.7373768C8.74038491 19.7385043 5.70536235 18.6228163 5.70536235 13.6413251c0-1.4189508.50676816-2.5801283 1.33834679-3.4883207C6.90963504 9.82420367 6.46351945 8.50181809 7.17139875 6.71256734c0 0 1.09094816-.34955032 3.57451115 1.33276037C11.78259 7.75642995 12.8950858 7.61277914 14.000399 7.60719272 15.1049142 7.61277914 16.2166119 7.75642995 17.2548881 8.04532771c2.4819669-1.68231069 3.571319-1.33276037 3.571319-1.33276037C21.5356825 8.50181809 21.0895669 9.82420367 20.9562909 10.1530044 21.7894656 11.0611968 22.2922435 12.2223743 22.2922435 13.6413251c0 4.9942601-3.039811 6.0931889-5.935173 6.4148071.4660671.401424200000001.8818564 1.194696.8818564 2.4077473C17.2389269 24.2012564 17.2229657 25.603448 17.2229657 26.0296121 17.2229657 26.3775663 17.4575954 26.7821827 18.116793 26.6552912 23.2786458 24.9322794 27 20.0633148 27 14.3212723 27 7.14112562 21.1789496 1.32087331 13.9988029 1.32087331"/></svg></a></div><div class=footer-mobile-links><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io target=_blank rel=noopener>Source of
this site</a></p><span class=divider-bar>|</span><p><a href=https://gohugo.io target=_blank rel=noopener>Built with Hugo</a></p><p>©2023 Naoya Furudono</p></div><script src=https://blog.nfurudono.com/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script><a target=_blank rel="noopener noreferrer" href=https://github.com/naoyafurudono/naoyafurudono.github.io/actions><img src=https://github.com/naoyafurudono/naoyafurudono.github.io/actions/workflows/gh-pages.yml/badge.svg alt="github pages deploy status" style=max-width:100%></a><p><a href="https://www.amazon.jp/hz/wishlist/ls/1JBRXP4JZZ21T?ref_=wl_share">欲しい本リスト</a></p><p><a href="https://www.amazon.jp/hz/wishlist/ls/3TT5GR81VZPHP?ref_=wl_share">欲しいものリスト</a></p></footer></body></html>