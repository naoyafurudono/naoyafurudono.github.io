---
title: "2023-06-24"
date: 2023-06-24T19:10:24+09:00
author: "Naoya Furudono"
draft: false
tags: [
    "daily"
    ,"PL"
    ,"tech"
    ,"tool"
]
---

macのタイムゾーンの設定が狂っていて、
今日の投稿がこれと前回の二つに分かれてしまった。

今日はmacの設定と、以降に伴って壊れたちょっとしたCLIツールの修正した。
昔Rustで雑に書いたもので、エラー処理が辛そうだったので少し勉強して改善した。
anyhowを使ってみたい気持ちが湧いたけど、まずは基本的なところからということでトレイトオブジェクトを使うことにした。
`type Result<T> = std::Result<T, dyn Error>`みたいな感じにすることで、いろんなエラーを孕んだresultに`?`を使うことができて幸せ。

一箇所ムムッとなったのが、クロージャの中で`?`を使う箇所。
`dyn Error`の気持ちで書いていたら、推論器はもっと具体的な型を推論していたみたいで、二つ目のエラー型の式に対して`?`したら型エラーになってしまった。こういうときはアノテーションをつければ良い。
Rustの型推論の割り切り方に慣れていない。

