<!doctype html><html lang=ja><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>Tool | ツイートするには長すぎる</title><link rel=apple-touch-icon sizes=57x57 href=/images/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/images/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/images/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/images/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/images/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/images/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/images/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/images/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/images/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/images/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=manifest href=/images/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/images/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><meta property="og:url" content="https://blog.nfurudono.com/tags/tool/"><meta property="og:site_name" content="ツイートするには長すぎる"><meta property="og:title" content="Tool"><meta property="og:locale" content="ja"><meta property="og:type" content="website"><meta property="og:image" content="https://blog.nfurudono.com/images/thumbnail.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.nfurudono.com/images/thumbnail.png"><meta name=twitter:title content="Tool"><meta name=description content="Toolに関連する記事の一覧です。"><meta property="og:description" content="Toolに関連する記事の一覧です。"><meta name=twitter:description content="Toolに関連する記事の一覧です。"><link rel=stylesheet href=https://blog.nfurudono.com/css/main.min.680546ad85e4ae010fb2c6d6e29f48227e146cc09f57f4dc75b7ae0782d1139e.css><link rel=alternate type=application/rss+xml href=https://blog.nfurudono.com/tags/tool/index.xml title=ツイートするには長すぎる><script async src="https://www.googletagmanager.com/gtag/js?id=G-ES42FPF4D5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ES42FPF4D5")}</script></head><body><nav><header><div class=site-title><a href=/>ツイートするには長すぎる</a></div></header><div class=nav-menu><a class="color-link nav-link" href=/profile/>Profile</a>
<a class="color-link nav-link" href=/tags/>Tags</a>
<a class="color-link nav-link" href=/about/>about</a>
<a class="color-link nav-link" href=/tags/tool/index.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons><a class=social-icon href=https://twitter.com/furudono2 target=_blank rel=noopener title=Twitter><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M8.991284 24.971612c10.189152.0 15.761088-8.441388 15.761088-15.761088C24.752372 8.970656 24.747512 8.731868 24.736496 8.494376 25.818008 7.712564 26.758256 6.737 27.5 5.62622c-.992628.440856-2.060748.738072-3.181248.871992 1.14372-.685584 2.02176-1.770768 2.435832-3.064176-1.070496.6345-2.25558 1.095984-3.517344 1.344492-1.010772-1.076652-2.450412-1.75014-4.043412-1.75014-3.059424.0-5.540292 2.480868-5.540292 5.539104.0.434808.0487079999999995.857412.14364 1.26306C9.19346 9.599108 5.11106 7.39472 2.3792 4.04294c-.476172.818424-.750168 1.769688-.750168 2.784132.0 1.921968.97794 3.61854 2.464992 4.61106C3.185528 11.41016 2.331788 11.160464 1.585184 10.745096 1.583888 10.768208 1.583888 10.791428 1.583888 10.815728c0 2.683152 1.909764 4.922856 4.4442 5.43078C5.562932 16.373084 5.07326 16.44134 4.56782 16.44134 4.210988 16.44134 3.863876 16.406024 3.526484 16.34144c.70524 2.200824 2.750112 3.802356 5.174928 3.8475-1.896264 1.485756-4.284576 2.37114-6.879924 2.37114C1.374476 22.56008.93362 22.534592.5 22.4834c2.451708 1.571076 5.362524 2.488212 8.491284 2.488212"/></svg>
</a><a class=social-icon href=https://www.instagram.com/donofuru/ target=_blank rel=noopener title=Instagram><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M14.0000238 2.00378571c3.2579524.0 3.6664762.0138095300000001 4.946.0721904800000002C20.222881 2.13421429 21.0949286 2.33702381 21.8579762 2.63359524 22.6468333 2.94011905 23.3158333 3.35030952 23.9827857 4.01721429 24.6496905 4.68416667 25.059881 5.35316667 25.3664524 6.14202381 25.6629762 6.90507143 25.8657857 7.77711905 25.9240238 9.05397619 25.9824048 10.3335 25.9962143 10.7420238 25.9962143 14.0000238 25.9962143 17.2579762 25.9824048 17.6665 25.9240238 18.9460238 25.8657857 20.222881 25.6629762 21.0949286 25.3664524 21.8579762 25.059881 22.6468333 24.6496905 23.3158333 23.9827857 23.9827857 23.3158333 24.6496905 22.6468333 25.059881 21.8579762 25.3664524 21.0949286 25.6629762 20.222881 25.8657857 18.9460238 25.9240238 17.6665 25.9824048 17.2579762 25.9962143 14.0000238 25.9962143 10.7420238 25.9962143 10.3335 25.9824048 9.05397619 25.9240238 7.77711905 25.8657857 6.90507143 25.6629762 6.14202381 25.3664524 5.35316667 25.059881 4.68416667 24.6496905 4.01721429 23.9827857c-.66690477-.6669524-1.07709524-1.3359524-1.38361905-2.1248095-.29657143-.7630476-.49938095-1.6350952-.55761905-2.9119524C2.01759524 17.6665 2.00378571 17.2579762 2.00378571 14.0000238 2.00378571 10.7420238 2.01759524 10.3335 2.07597619 9.05397619 2.13421429 7.77711905 2.33702381 6.90507143 2.63359524 6.14202381c.30652381-.78885714.71671428-1.45785714 1.38361905-2.12480952.66695238-.66690477 1.33595238-1.07709524 2.12480952-1.38361905C6.90507143 2.33702381 7.77711905 2.13421429 9.05397619 2.07597619 10.3335 2.01759524 10.7420238 2.00378571 14.0000238 2.00378571zm0 2.16147619C10.796881 4.1652619 10.4174524 4.1775 9.1525 4.23521429 7.98288095 4.28854762 7.34769048 4.48397619 6.92497619 4.6482619 6.36502381 4.86588095 5.96540476 5.12583333 5.54564286 5.54564286c-.41980953.4197619-.67976191.81938095-.89738096 1.37933333-.16428571.42271429-.35971428 1.05790476-.41304761 2.22752381C4.1775 10.4174524 4.1652619 10.796881 4.1652619 14.0000238 4.1652619 17.203119 4.1775 17.5825476 4.23521429 18.8475 4.28854762 20.017119 4.48397619 20.6523095 4.6482619 21.0750238 4.86588095 21.6349762 5.12588095 22.0345952 5.54564286 22.4543571 5.96540476 22.8741667 6.36502381 23.134119 6.92497619 23.3517381 7.34769048 23.5160238 7.98288095 23.7114524 9.1525 23.7647857 10.4173095 23.8225 10.7966429 23.8347381 14.0000238 23.8347381 17.2033571 23.8347381 17.5827381 23.8225 18.8475 23.7647857 20.017119 23.7114524 20.6523095 23.5160238 21.0750238 23.3517381 21.6349762 23.134119 22.0345952 22.8741667 22.4543571 22.4543571 22.8741667 22.0345952 23.134119 21.6349762 23.3517381 21.0750238 23.5160238 20.6523095 23.7114524 20.017119 23.7647857 18.8475 23.8225 17.5825476 23.8347381 17.203119 23.8347381 14.0000238 23.8347381 10.796881 23.8225 10.4174524 23.7647857 9.1525 23.7114524 7.98288095 23.5160238 7.34769048 23.3517381 6.92497619 23.134119 6.36502381 22.8741667 5.96540476 22.4543571 5.54564286 22.0345952 5.12583333 21.6349762 4.86588095 21.0750238 4.6482619 20.6523095 4.48397619 20.017119 4.28854762 18.8475 4.23521429 17.5825476 4.1775 17.203119 4.1652619 14.0000238 4.1652619zm0 13.8334762c2.2084286.0 3.9987143-1.7902857 3.9987143-3.9987143.0-2.2084762-1.7902857-3.9987619-3.9987143-3.9987619-2.2084762.0-3.9987619 1.7902857-3.9987619 3.9987619.0 2.2084286 1.7902857 3.9987143 3.9987619 3.9987143zm0-10.15895239c3.4021905.0 6.1601905 2.75799999 6.1601905 6.16023809.0 3.4021905-2.758 6.1601905-6.1601905 6.1601905-3.4022381.0-6.16023809-2.758-6.16023809-6.1601905.0-3.4022381 2.75799999-6.16023809 6.16023809-6.16023809zm7.8431429-.24338095c0 .79504762-.644523800000002 1.43952381-1.4395715 1.43952381C19.6085952 9.03592857 18.9640714 8.39145238 18.9640714 7.59640476S19.6085952 6.15683333 20.4035952 6.15683333c.795047699999998.0 1.4395715.64452381 1.4395715 1.43957143z"/></svg>
</a><a class=social-icon href=https://www.linkedin.com/in/naoya-furudono target=_blank rel=noopener title=LinkedIn><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M2 3.654102c0-.95502059.79442509-1.73012354 1.77383592-1.73012354H24.2261641C25.2058917 1.92397846 26 2.69908141 26 3.654102V24.3462148C26 25.3015521 25.2058917 26.0760215 24.2261641 26.0760215H3.77383592C2.79442509 26.0760215 2 25.3015521 2 24.3465315V3.65378524 3.654102zM9.27526132 22.1415901V11.2356668H5.65030092V22.1415901H9.27557808 9.27526132zM7.46341463 9.74691162c1.2638581.0 2.05068103-.83750395 2.05068103-1.88406715C9.49033893 6.79252455 8.72727273 5.97846056 7.48748812 5.97846056c-1.24073487.0-2.05099778.81406399-2.05099778 1.88438391.0 1.0465632.78650618 1.88406715 2.00316756 1.88406715h.02343998H7.46341463zM11.2815965 22.1415901h3.6246436v-6.089642C14.9062401 15.7263225 14.9299968 15.4000634 15.0256573 15.1675641c.261957499999999-.6515679.8584099-1.3259423 1.8599936-1.3259423 1.3113716.0 1.836237 1 1.836237 2.4662654v5.8337029h3.6246436V15.8885017c0-3.349699-1.7880899-4.9084574-4.172949-4.9084574-1.9553373.0-2.814064 1.0928097-3.2910991 1.8371872H14.9065569v-1.581248H11.2819132C11.3291099 12.2591067 11.2815965 22.1419069 11.2815965 22.1419069V22.1415901z"/></svg>
</a><a class=social-icon href=https://github.com/naoyafurudono target=_blank rel=noopener title=GitHub><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M13.9988029 1.32087331C6.82105037 1.32087331 1 7.14112562 1 14.3212723c0 5.7436386 3.72454649 10.6157955 8.89038951 12.3348169C10.5408085 26.7757983 10.7778323 26.374374 10.7778323 26.0296121 10.7778323 25.7215609 10.7666595 24.9035493 10.760275 23.8189856 7.14426471 24.6042767 6.38131925 22.0760223 6.38131925 22.0760223c-.59136253-1.5019491-1.44369072-1.9017772-1.44369072-1.9017772C3.75729765 19.3682044 5.02701126 19.3841656 5.02701126 19.3841656 6.33183953 19.4759425 7.01817121 20.7241085 7.01817121 20.7241085c1.15958133 1.9863716 3.04300319 1.4125664 3.78360289 1.0797753.1181129-.8395592.4540962-1.4125663.8251942-1.7373768C8.74038491 19.7385043 5.70536235 18.6228163 5.70536235 13.6413251c0-1.4189508.50676816-2.5801283 1.33834679-3.4883207C6.90963504 9.82420367 6.46351945 8.50181809 7.17139875 6.71256734c0 0 1.09094816-.34955032 3.57451115 1.33276037C11.78259 7.75642995 12.8950858 7.61277914 14.000399 7.60719272 15.1049142 7.61277914 16.2166119 7.75642995 17.2548881 8.04532771c2.4819669-1.68231069 3.571319-1.33276037 3.571319-1.33276037C21.5356825 8.50181809 21.0895669 9.82420367 20.9562909 10.1530044 21.7894656 11.0611968 22.2922435 12.2223743 22.2922435 13.6413251c0 4.9942601-3.039811 6.0931889-5.935173 6.4148071.4660671.401424200000001.8818564 1.194696.8818564 2.4077473C17.2389269 24.2012564 17.2229657 25.603448 17.2229657 26.0296121 17.2229657 26.3775663 17.4575954 26.7821827 18.116793 26.6552912 23.2786458 24.9322794 27 20.0633148 27 14.3212723 27 7.14112562 21.1789496 1.32087331 13.9988029 1.32087331"/></svg></a></div><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io target=_blank rel=noopener>source of this site</a></p><p><a href=https://gohugo.io target=_blank rel=noopener></a></p><p>©2025 Naoya Furudono</p><script src=https://blog.nfurudono.com/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script><a target=_blank rel="noopener noreferrer" href=https://github.com/naoyafurudono/naoyafurudono.github.io/actions><img src=https://github.com/naoyafurudono/naoyafurudono.github.io/actions/workflows/gh-pages.yml/badge.svg alt="github pages deploy status" style=max-width:100%></a><p><a href="https://www.amazon.jp/hz/wishlist/ls/1JBRXP4JZZ21T?ref_=wl_share">欲しい本リスト</a></p><p><a href="https://www.amazon.jp/hz/wishlist/ls/3TT5GR81VZPHP?ref_=wl_share">欲しいものリスト</a></p></footer></nav><div id=content class=content-container><h1>"tool"</h1><article><h2><a href=https://blog.nfurudono.com/daily/2025-05-25/>2025-05-25</a></h2><div><p><h2><a href=#%e3%81%9d%e3%82%8d%e3%81%9d%e3%82%8d%e7%94%9f%e6%88%90ai%e3%82%92%e6%97%a5%e5%b8%b8%e3%81%ab%e5%8f%96%e3%82%8a%e8%be%bc%e3%82%80 id=そろそろ生成aiを日常に取り込む class=anchor aria-hidden=true>そろそろ生成AIを日常に取り込む</a></h2><p>LangChainを眺めている。そういう本を買って読んでいる。ちゃんと理解するためには手を動かすのが良いのだろうけど、ざっくりどんなものがあるのかを知ることが目的なので本を読んでいる。これまでふわっと聞いていた用語の意味が繋がって楽しい。あと、Pythonのこの頃の事情に触れることもできた。Pythonでそんなに便利でもないのにDDLみたいな記法を導入する文化はあまり好きじゃない。高級で直感的な言語をせっかく持っているのだからそれを使わせて欲しいと思う。f-stringとかは有益だと思うけど、ただの関数呼び出しの記法を誤魔化すみたいなのは避けたい。</p><p>AIをガッツリ用いたソフトウェアは書いたことがなくて、普段は人が作ったソフトをただ使っている。自分が普段使うツールは自分である程度自在に手に合うようにしたい。例えばシェルとかエディタの設定をいじるとか便利処理を実装するとか。生成AIを用いたツールについては、生成とか検索とかはコアな機能でツールに提供して欲しいけど、それらを組み合わせるのは自分でメンテナンスしたいと思う。</p><p>そのユースケースとして色々触るのはありだと思うのだけれども。</p><p>例えばソフトウェア開発をするAIエージェントが欲しいのだけど、エージェントの単位でサービスを買ってしまうと開発環境とかに手を入れられなくて辛い。それに設定を組織で共有することになって試行錯誤の影響範囲がデカくなってめんどい。</p><p>AIエージェントみたいなやつはインタラクティブになっている必要はないと思っていて、あれのために専用のビジュアルインターフェースがあるのはむずい。ぼくが普段ビジュアルなインターフェースをいじることがないので。</p><p>そうではなくてプラグインを受け入れるとかそういうのでいいので関数とかとして呼び出せるようなものあって欲しい。そのためにはぼくがそういうふうに扱えば良いだろう。</p><h2><a href=#%e3%82%ad%e3%83%a3%e3%83%aa%e3%82%a2%e3%81%ae%e8%a9%b1 id=キャリアの話 class=anchor aria-hidden=true>キャリアの話</a></h2><p>おおよそ、自由自在に生きれることを目標に生きると僕は幸せだろう、というような信念をもとに10年くらい過ごしている。進路の選択とか会社選びとか暇な時間の過ごし方とかはこの価値観に影響を受けている。</p><p>仕事ではソフトウェアを自由自在に作れるようになることを目指している。ソフトウェアって何かと便利だし社会的にもそこそこ求められているものだと思うから、自在に作れるようになったらいいじゃん、という気持ち。</p><hr><p>学生の頃は自由自在というのは、まず物事をよく理解できるとかその理解を表現できることだと思っていた（今も思っている）。なので理学をやろうと思った。元々化学が気になっていたのだけど、理解の仕方が僕の思った幸せな解釈の戦略と違った（実際的すぎるように思えた）ので化学はやめることにして、論理学とか数学とかを学べそうな情報系に舵を切った。理解するとは、とか表現するとはみたいなことを真面目に考えたくなったのだった。</p><p>何やかんやあってプログラミング言語を学生生活の後半では勉強することにしてそれなりに楽しかったし、目論見通り（？）ものの見方は変わったように思う。型、継続、プログラムの表現、抽象化レイヤの分離、変換とかは僕が何かを認識したり考えたりするときのそれなりの基礎になっているように思う。ただ、僕が好きなのはそういう認識の仕方を勉強するところであって、ソフトウェアエンジニアリングをうまくやれるようにするためのモチベーションはあまりなかったし、そもそも課題とか嬉しさを理解していなかった。それは寂しいなと思ったのと、なんとなく楽しそうだったのと、お金が稼げそうだったのでソフトウェアエンジニアとして仕事をすることにした。</p><p>なんとなく楽しそうとサラッと流してしまったが、当時でももう少し具体的に考えていたはず。街とか社会とかをソフトウェアは構成していて、今後もっと入ってくるだろうと思っていた。家のリモコンがプログラマブルなのは便利だ。そういう便利な生活を実現することは良いことだし、それはDIYに閉じる範囲ではなくて社会として便利にすることは良いことに思えた。僕の価値観とも繋がる。なのでソフトウェアエンジニアリングをしようと思った。</p><hr><p>話を現在に戻す。仕事を始めて3年目になりプログラミングというかソフトウェアプロダクトの開発にある程度慣れてきた。技術的に指導をされることは減り、人に知見を渡す機会が増えた。とはいえまだまだわからないことだらけで到底自由自在に開発しているとは思えない。一つのプロダクトの開発をいつまで経っても自明なプログラミングにできていないのは怠慢だと思う。アーキテクチャというかモジュール分割を判断し切る必要があるだろう。その手の知識についてアドバイスを僕にする人はいない。見える課題が周囲と比べて変わったのか単に環境が変化しているだけなのか（多分両方だろう）は判断していないけど、チームとかその周囲でこの課題に取り組む人は見当たらないのでトップランナーだと思って頑張るのが良いのだろう。</p><p>この手の課題は書籍で議論されている内容ではあると思っている。そのくらいの内容は学校で議論を終わらせて、専門家の集団としてのプロフェッショナルは最先端で議論するものだと子供の頃は思っていた。そういう環境を追い求めることはぼくの人生の幸せのために必要だと思う。身を置く環境をなんらかの方法で変える必要がある。もちろん、ぼくの幸せは仕事というか専門性だけではないので配分を忘れてはならない。</p><hr><p>学生時代の勉強によって、プログラムによる表現は割とコンフォートゾーンになった。ついでに論理とか文章とか説明も勉強した、これはまだまだ難しいけど。これまでの仕事とかその周囲の趣味の時間でプログラミングとか設計をコンフォートゾーンよりにしてきた。これからは何を学んでいきたいだろうか。</p><ul><li>ソフトウェア以外のことも大事であることを思い出そう<ul><li>衣食住と健康は自由自在の礎だと思う</li><li>趣味への取り組み方をシフトしてみる</li></ul></li><li>仕事では何を自由にする？<ul><li>プログラミングをしない手もある</li><li>観察、課題の分析、解決は好きよりだと思う</li></ul></li></ul></p></div><div class=post-footer><time>May 25, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/avoid-23-59-59/>23:59:59という時刻を扱うのはやめよう</a></h2><div><p><p>この記事は生成AIを使って書いた記事です。ほとんど生成したものですが、レビューしてありますし加筆修正を人間が行なっています。</p><hr><p>プログラミングやシステム設計において、しばしば「23:59:59」という時刻が“終端”（end of day）として扱われます。しかし、このアプローチには多くの落とし穴（pitfalls）や混乱が潜んでいます。本稿では、なぜ23:59:59のような終端時刻を避けるべきかを整理し、より堅牢で明快な代替手法をご紹介します。</p><h2><a href=#%e8%aa%b2%e9%a1%8c id=課題 class=anchor aria-hidden=true>課題</a></h2><h3><a href=#1-%e5%a2%83%e7%95%8c%e5%80%a4boundary-value%e3%81%ae%e5%95%8f%e9%a1%8c id=1-境界値boundary-valueの問題 class=anchor aria-hidden=true>1. 境界値（Boundary Value）の問題</a></h3><ul><li><strong>オフバイワンエラー（Off-by-one Error）</strong>
23:59:59を終了時刻として設定すると、しばしば「23:59:60」や「24:00:00」をどう扱うかで混乱が生じます。特に、うるう秒（leap second）の挿入時には「23:59:60」が発生し、想定外のバグを誘発することがあります。</li><li><strong>不明瞭な閉区間（Closed Interval）と開区間（Half-open Interval）</strong>
23:59:59を含むか否か、すなわち区間を[00:00:00, 23:59:59]（閉区間）で扱うのか、[00:00:00, 23:59:59)（半開区間）で扱うのかが曖昧になり、仕様書（specification）と実装に齟齬が生じがちです。</li></ul><h3><a href=#2-%e6%97%a5%e4%bb%98%e5%a4%89%e6%9b%b4%e3%81%a8%e3%81%ae%e9%bd%9f%e9%bd%ac id=2-日付変更との齟齬 class=anchor aria-hidden=true>2. 日付変更との齟齬</a></h3><ul><li><strong>日次バッチ（Daily Batch）とカレンダー表示</strong>
例えば、日次バッチ処理を「23:59:59までのデータを集計」と定義すると、処理が終わるわずかな遅延で翌日の00:00:00以降のデータが取りこぼされたり、重複集計されたりする恐れがあります。</li><li><strong>ユーザーインターフェース（UI）の混乱</strong>
ユーザーに「23:59:59表示」を強いると直感的ではなく、かえって誤操作を招くことがあります。多くの人にとって「23:59:59」はピンと来にくく、特にミリ秒（milliseconds）やタイムゾーン（time zone）をまたぐ場合の理解が難しくなります。</li></ul><h3><a href=#3-%e3%82%b7%e3%82%b9%e3%83%86%e3%83%a0%e5%ae%9f%e8%a3%85%e3%81%ae%e8%a4%87%e9%9b%91%e5%8c%96 id=3-システム実装の複雑化 class=anchor aria-hidden=true>3. システム実装の複雑化</a></h3><ul><li><strong>データベース（Database）のクエリ</strong>
<code>WHERE timestamp &lt;= '2025-04-30 23:59:59'</code> といった条件は、ミリ秒精度のタイムスタンプやタイムゾーンが絡むと正確性を欠きやすいです。</li><li><strong>テスト（Testing）とモック（Mock）の難易度</strong>
テスト時に23:59:59を意図的に生成・モックするのは手間がかかり、テストケースの網羅性を落とす原因となります。</li></ul><h2><a href=#%e8%a7%a3%e9%87%88%e3%82%92%e5%a4%89%e3%81%88%e3%81%a6000000240000%e3%82%92%e6%89%b1%e3%81%86 id=解釈を変えて000000240000を扱う class=anchor aria-hidden=true>解釈を変えて00:00:00(24:00:00)を扱う</a></h2><p>23:59:59を扱いたいときは、きっと何かの期間の終わりを表すことを目的としているでしょう。「終わりの時刻まで」、と捉える代わりに終わりの時刻の直前までと捉えることで、23:59:59ではなく00:00:00を扱えば済むようになってすっきりします。具体的には以下の通りです。</p><h3><a href=#%e5%8d%8a%e9%96%8b%e5%8c%ba%e9%96%93half-open-interval%e3%82%92%e4%bd%bf%e3%81%86 id=半開区間half-open-intervalを使う class=anchor aria-hidden=true>半開区間（Half-open Interval）を使う</a></h3><ul><li><strong>[開始, 終了) の形式</strong>
例：[2025-04-01 00:00:00, 2025-05-01 00:00:00)<ul><li>「2025-04-01 00:00:00以上かつ2025-05-01 00:00:00未満」という明確な条件設定が可能。</li><li>オフバイワンエラーを防ぎ、うるう秒も意識不要。</li></ul></li></ul><h3><a href=#iso-8601%e3%81%ae2400%e3%82%92%e6%b4%bb%e7%94%a8%e3%81%99%e3%82%8b id=iso-8601の2400を活用する class=anchor aria-hidden=true>ISO 8601の24:00を活用する</a></h3><ul><li><strong>「24:00」表記</strong><ul><li>同日23:59:59の次に位置づけられるため、論理的な終端（end-of-day）を明示できます。</li><li>例：<code>2025-04-30T24:00:00</code> は <code>2025-05-01T00:00:00</code> と同一視されます。</li><li>ただし、すべてのライブラリがサポートしているわけではない点に注意。</li></ul></li></ul><hr><p>23:59:59を終端時刻として安易に扱うのは、多くの境界値エラーや実装・運用の混乱を招く原因となります。代わりに、半開区間（half-open interval）[開始, 終了)やISO 8601の24:00表記を採用し、仕様（spec）から実装（implementation）、テスト（testing）まで一貫して明確な時刻管理を行いましょう。これにより、バグの減少と運用コストの削減が期待できます。</p><hr><p><strong>参考情報</strong></p><ul><li>ISO 8601: 日付及び時刻のデータ要素と交換形式</li><li>ソフトウェアテストにおける境界値分析（Boundary Value Analysis）</li><li>半開区間について過去に調べた記事: <a href=https://dev.nfurudono.com/posts/semi-open-interval/>https://dev.nfurudono.com/posts/semi-open-interval/</a></li></ul><p>以上を踏まえ、次回からは「23:59:59」という時刻を見直し、より堅牢な方法で時刻管理（time management）を実践してみてはいかがでしょうか。</p></p></div><div class=post-footer><time>April 30, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-04-27/>2025-04-27</a></h2><div><p><p>学生の頃に数学の先生が図書館で本読むとインターネットとかで調べるのと違って周りの本とかにも目がいって視野が広がっていいぞ、みたいなことを話していた。いらないことを言わないで聞いたことに対して察して回答をしてくれるAIがついているので、視野が以前に増して広がりにくくなっているだろう、と考えられる。実際にそうかの判断はまだ下せないと思うけど。脱線とか下手くそな質問によって見えていなかったものが見えることもあるし、そもそも今までは答えに辿り着けなかった疑問に対しても今なら到達しやすくなったと思う。速度が上がればもっと遠くに行ける気もする。なので視野が広がる力が働いているとも思える。</p><p>AIも検索も読書もすればいい</p></p></div><div class=post-footer><time>April 27, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-04-07/>2025-04-07</a></h2><div><p><p>cursorのagent modeと比べてdevinの方が使い勝手よく感じる</p><p>自分とは別の知能なので手元で動かれても困る（マイクロマネジメントするの疲れるので目を離したい）
エディタでシュッと修正できるのは嬉しいとかローカルの力で操作できる嬉しさはあるかもしれないが、そこはdevinを強くすることで解決するのが正攻法な気がする</p><p>エディタには何をやらせたいだろうかとか、AIエージェントのインターフェースはどんなものであって欲しいだろうかが気になる。</p></p></div><div class=post-footer><time>April 7, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-03-31/>2025-03-31</a></h2><div><p><p>設定はすぐに編集・反映できると嬉しい。編集するためにはスニペットを用意すればいいし、反映をすぐにするためにはホットリロードに対応していて欲しい。</p><p>開発にREPLがあると嬉しとか、テスト駆動開発が楽しいとかと一緒。</p></p></div><div class=post-footer><time>March 31, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-03-24/>2025-03-24</a></h2><div><p><p><a href=https://www.belkin.com/jp/p/%E3%83%AF%E3%82%A4%E3%83%A4%E3%83%AC%E3%82%B9%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%82%A4%E3%83%A4%E3%83%BC%E3%83%98%E3%83%83%E3%83%89%E3%82%BB%E3%83%83%E3%83%88/AUD005btBLK.html>SoundForm Adaptワイヤレスオーバーイヤーヘッドセット (Belkin)</a>を使っている。便利なのだけどBluetoothのペアリング方法が毎度わからなくなる。</p><p>多分このヘッドホンは一つのデバイスとしかペアリングできない。ペアリングを改めて行うためにはリセットを明示的に行う必要がある</p><ol><li>電源が入った状態でボリュームボタンの両方 (+, -) を同時に10s押し続けてリセットする。LEDが白く点滅したらokぽい</li><li>そのあとは電源が入った状態だと常にペアリングを試みている気がする</li></ol></p></div><div class=post-footer><time>March 24, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-02-18/>2025-02-18</a></h2><div><p><h2><a href=#%e7%94%9f%e6%88%90ai%e3%81%ab%e5%90%a6%e5%ae%9a%e3%81%97%e3%81%a6%e3%82%82%e3%82%89%e3%81%a3%e3%81%a6%e6%96%87%e5%8f%a5%e3%81%ae%e3%81%a4%e3%81%91%e3%82%88%e3%81%86%e3%81%8c%e3%81%aa%e3%81%84%e4%b8%bb%e5%bc%b5%e3%82%92%e4%bd%9c%e3%82%8b id=生成aiに否定してもらって文句のつけようがない主張を作る class=anchor aria-hidden=true>生成AIに否定してもらって文句のつけようがない主張を作る</a></h2><p>生成AIを壁にして議論することが不毛に感じる。自分で思考することを放棄して生成AIに言わせたいことを言わせるゲームになるのが不毛であるように感じる。あいつはぼくに質問をしてこなくて、なされるがままに僕の願いを叶えるようにチューニングされている。ぼくは議論を通じて思考を深めて問題領域の理解を深めたいが、そのための思考をあいつに渡してしまうことになる。俺が論じるからお前は俺の考えをできるだけ簡潔に論破しろ、とか言えばいいのだろうか。</p><p>試したらいい感じだが、体力が必要。</p><h3><a href=#%e8%bf%bd%e8%a8%98 id=追記 class=anchor aria-hidden=true>追記</a></h3><p>文句のつけようがない主張をすると、へりくつ捏ねる子になっちゃった。難しい。</p><h2><a href=#%e3%82%a4%e3%83%99%e3%83%b3%e3%83%88%e3%81%ae%e3%81%82%e3%82%8c%e3%81%93%e3%82%8c id=イベントのあれこれ class=anchor aria-hidden=true>イベントのあれこれ</a></h2><p>去年のどこか暗いからTwitterの僕のTLとかその周りでWebアプリケーションのバックエンドのロールを作るためにイベントの概念にフォーカスすることが流行っているように感じる。</p><p>以下のようなバズワードが飛び交っている。</p><ul><li>イベントストーミング</li><li>イベントベースなドメイン駆動設計</li><li>イベントソーシング</li><li>EDA (イベント駆動アーキテクチャ)</li><li>CQRS</li><li>非同期処理</li></ul><p>それぞれがどのレイヤ（プログラミングの工程）で使われる言葉なのかを分類すると以下のようになると思う。</p><ul><li>問題領域のモデリング<ul><li>イベントストーミング</li></ul></li><li>問題を解決するためのシステム設計（システムのモデル作成）<ul><li>イベントベースなドメイン駆動設計?</li></ul></li><li>永続化する際のデータ表現とその解釈<ul><li>イベントソーシング</li><li>イベントベースなドメイン駆動設計?</li><li>CQRS?</li><li>非同期処理</li></ul></li><li>コンポーネント間での通信方式<ul><li>EDA</li><li>CQRS?</li><li>非同期処理</li></ul></li></ul><h3><a href=#todos id=todos class=anchor aria-hidden=true>todos</a></h3><ul><li><input disabled type=checkbox> ソースはどこだよ！って感じなので文章をあさって明記したい。</li><li><input disabled type=checkbox> 有効性は？<ul><li>これらの考え方、開発手法、アーキテクチャはどんなときに有効で、どんなときにもっと普通で良い解決方法があるだろうか。</li></ul></li></ul><h3><a href=#%e3%83%a1%e3%83%a2 id=メモ class=anchor aria-hidden=true>メモ</a></h3><p>イベントを永続化して、それを発展させるための手法を紹介する書籍として、<a href=https://leanpub.com/esversioning>Versioning in an Event Sourced System</a>がある。</p><h2><a href=#%e5%ae%a3%e4%bc%9d id=宣伝 class=anchor aria-hidden=true>宣伝</a></h2><p>エンジニアのフォロイーがTwitterで増えてきたように感じるので、RSSからTwitterに投稿するのをやっても良いかも。</p><p>以下の記事を参考にできそう。</p><p><a href=https://efcl.info/2023/05/28/rss-to-twitter/>https://efcl.info/2023/05/28/rss-to-twitter/</a></p><p>僕はブログを</p><ul><li>長めで</li><li>自分の資産として管理可能な</li><li>編集可能な</li></ul><p>ツイートだと思っている。なのでTwitterrで宣伝するのはターゲットが合致して良いだろう。</p></p></div><div class=post-footer><time>February 18, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-02-11/>2025-02-11</a></h2><div><p><h2><a href=#zed%e3%81%a7ghes%e3%81%ae%e3%83%91%e3%83%bc%e3%83%9e%e3%83%aa%e3%83%b3%e3%82%af%e3%82%92%e5%8f%96%e5%be%97%e3%81%a7%e3%81%8d%e3%82%8b%e3%82%88%e3%81%86%e3%81%ab%e3%81%97%e3%81%9f%e3%81%84 id=zedでghesのパーマリンクを取得できるようにしたい class=anchor aria-hidden=true>ZedでGHESのパーマリンクを取得できるようにしたい</a></h2><h3><a href=#%e8%aa%bf%e6%9f%bb id=調査 class=anchor aria-hidden=true>調査</a></h3><p>普通のGitHubのリポジトリのコードではパーマリンクをコマンドから取得できるのだが、GHESだと何かがうまくいかない。エラーメッセージは以下。</p><blockquote><p>Failed to copy permalink: failed to parse Git remote URL</p></blockquote><p>おそらくremoteのドメイン名がハードコードされているとかだろう。</p><p>該当のエラーメッセージを出力しているのはここみたい。</p><p><a href=https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/project/src/buffer_store.rs#L1673-L1675>https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/project/src/buffer_store.rs#L1673-L1675</a></p><p>そしてそこで呼ばれているのがこれ</p><p><a href=https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/git/src/hosting_provider.rs#L168-L184>https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/git/src/hosting_provider.rs#L168-L184</a></p><pre><code class=language-rust>pub fn parse_git_remote_url(
    provider_registry: Arc&lt;GitHostingProviderRegistry&gt;,
    url: &amp;str,
) -&gt; Option&lt;(
    Arc&lt;dyn GitHostingProvider + Send + Sync + 'static&gt;,
    ParsedGitRemote,
)&gt; {
    provider_registry
        .list_hosting_providers()
        .into_iter()
        .find_map(|provider| {
            provider
                .parse_remote_url(url)
                .map(|parsed_remote| (provider, parsed_remote))
        })
}
</code></pre><p>正しくURLをパースできるhosting providerが存在しないのでエラーになっていそう。Hosting providerは以下で設定されている。</p><p><a href=https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/git_hosting_providers/src/git_hosting_providers.rs#L11-L38>https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/git_hosting_providers/src/git_hosting_providers.rs#L11-L38</a></p><pre><code class=language-rust>/// Initializes the Git hosting providers.
pub fn init(cx: &amp;App) {
    let provider_registry = GitHostingProviderRegistry::global(cx);
    provider_registry.register_hosting_provider(Arc::new(Bitbucket));
    provider_registry.register_hosting_provider(Arc::new(Codeberg));
    provider_registry.register_hosting_provider(Arc::new(Gitee));
    provider_registry.register_hosting_provider(Arc::new(Github));
    provider_registry.register_hosting_provider(Arc::new(Gitlab::new()));
    provider_registry.register_hosting_provider(Arc::new(Sourcehut));
}

/// Registers additional Git hosting providers.
///
/// These require information from the Git repository to construct, so their
/// registration is deferred until we have a Git repository initialized.
pub fn register_additional_providers(
    provider_registry: Arc&lt;GitHostingProviderRegistry&gt;,
    repository: Arc&lt;dyn GitRepository&gt;,
) {
    let Some(origin_url) = repository.remote_url(&quot;origin&quot;) else {
        return;
    };

    if let Ok(gitlab_self_hosted) = Gitlab::from_remote_url(&amp;origin_url) {
        provider_registry.register_hosting_provider(Arc::new(gitlab_self_hosted));
    }
}
</code></pre><p>ここでgithub.com以外の処理を諦めている。</p><p><a href=https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/git_hosting_providers/src/providers/github.rs#L111-L128>https://github.com/zed-industries/zed/blob/2e7bb11b7d5de6a79bef2491fa5ce8ecfd2bca15/crates/git_hosting_providers/src/providers/github.rs#L111-L128</a></p><h3><a href=#%e6%89%80%e6%84%9f id=所感 class=anchor aria-hidden=true>所感</a></h3><p>現在のプロジェクトがどのGitHostingProviderを使っているかを誰も管理していない（？）ぽくて、外部からそれに依存した操作をする際は、GitHostingProviderRegistryに登録されたもの全てを試してうまくいった結果を使う、としているのがよくなさそう。以下のように作りを変えると良いだろう。</p><ul><li>まずはプロジェクトに対してGitHostingProviderを対応づけること</li><li>外部からGit関連の操作をするときはRegistryを経由しないでプロジェクトをに登録されているGitHostingProviderを使うこと</li><li>必要に応じて手動で対応づけや設定をできるようにすること</li></ul><p>あるいは拡張機能としてねじ込むのが正解か？GitHubとGitHub Enterprise Serverの違いがどんなものか次第でもあるので、そちらの調査もしたい。</p><h2><a href=#zed%e3%81%ae%e6%8b%a1%e5%bc%b5%e6%a9%9f%e8%83%bd%e3%82%92%e4%bd%9c%e3%82%8b id=zedの拡張機能を作る class=anchor aria-hidden=true>Zedの拡張機能を作る</a></h2><p>LSPサーバがある前提で、そのクライアントをZedに追加する。PythonのLSPクライアントの実装があるので、それを参考にbuf LSPを使えるようにする。</p><p><a href=https://github.com/rgbkrk/python-lsp-zed-extension/blob/main/src/python_lsp.rs>https://github.com/rgbkrk/python-lsp-zed-extension/blob/main/src/python_lsp.rs</a></p><p>何も理解してないけどローカルでクライアントをビルドして定義ジャンプを実行するところまではできた。次は何が起きているかを調べていい感じにする。
zedにマージするまでがゴール。</p><p>Zed extensionを理解して、gitのアレをextensionとして実現できないか判断したい。</p></p></div><div class=post-footer><time>February 11, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-01-26/>2025-01-26</a></h2><div><p><h2><a href=#etchosts-%e3%81%a7%e3%83%84%e3%82%a4%e3%83%83%e3%82%bf%e3%83%bc%e3%82%92%e5%b0%81%e5%8d%b0 id=etchosts-でツイッターを封印 class=anchor aria-hidden=true>/etc/hosts でツイッターを封印</a></h2><p><code>/etc/hosts</code> で以下のようにしてツイッターを封印している。</p><pre><code>127.0.0.1     twitter.com
127.0.0.1     x.com
</code></pre><p>次の週末にある登壇資料を作っている。インターネットにある情報を拾う必要のあるケースもあるので、インターネットには繋がりたいが、ツイッターを開いた瞬間に全てが終わる。そんなぼくをがツイッターに吸い込まれるのを防ぐために、DNS問い合わせを潰している。だいぶ助けられている。</p><h2><a href=#%e7%99%ba%e8%a1%a8%e6%ba%96%e5%82%99 id=発表準備 class=anchor aria-hidden=true>発表準備</a></h2><p><a href=https://www.graco.c.u-tokyo.ac.jp/labs/morihata/presentation_memo.htm#o-enumerate>https://www.graco.c.u-tokyo.ac.jp/labs/morihata/presentation_memo.htm#o-enumerate</a> これを読みながらやっている。学生の頃からチラチラ見ていたが、だんだん染み付いてきた。</p></p></div><div class=post-footer><time>January 26, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-01-16/>2025-01-16</a></h2><div><p><h2><a href=#%e3%82%bd%e3%83%95%e3%83%88%e3%82%a6%e3%82%a7%e3%82%a2%e3%81%ae%e8%a8%ad%e8%a8%88 id=ソフトウェアの設計 class=anchor aria-hidden=true>ソフトウェアの設計</a></h2><p>今日はたくさん設計をしたので満足。</p><p>今週は電車で<a href=https://amzn.asia/d/7BGeiUR>A Philosophy of Software Design</a>を読んでいる。
2023年3月8日にAmazonで注文したらしいので、入社前の時期に現実逃避で読んだのだろう。当時はあまりプログラミングをしたり、ずっと動き続けるシステムを設計したりする経験がなかった。なので実感を伴った教訓とは思えず、知識としてさらう感じだった。それはそれで良かったし生きてきたのだけど。
2024年の年初に配属されてソフトウェアをいろんな人と長く作ってきたことでいろんな辛みを体感できた。なので今読むアドバイスは経験を思い出しながら読む観点でも面白いし、まさに今考えていることへの一つの意見としても面白い。</p><p>だんだん意見を通すのが簡単になってきたので、自分が思う良いことを主張して取り入れて、楽しいプログラミングを布教しようと思う。</p><p>そして当時に比べてペーパーバックの値段が1.5倍になっていて驚き。</p><p>コードレビューとか設計レビューで直感的によくなさそう、こうしたい、と思うケースはもしかしたらこの本から得た知見なのかもしれないと読み返していて思う。</p><p>何かの魔法で一緒に働くエンジニアが熱中して僕の選んだ本を一冊読んでくれるなら、これを読んでほしい。</p><h2><a href=#%e6%b0%97%e3%81%ab%e3%81%aa%e3%82%8b%e6%9c%ac id=気になる本 class=anchor aria-hidden=true>気になる本</a></h2><p><a href=https://www.diamond.co.jp/book/9784478117620.html>いい音がする文章</a>が気になる。僕の小説の好みは文体に左右されると感じているので。なので作者が好きなら大体のその人の作品が好き、みたいなことがよくある。</p></p></div><div class=post-footer><time>January 16, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/learn-frontend-test/>wip Next.jsでのテストを自由自在に書けるようになりたい</a></h2><div><p><p>Next.jsのアプリケーションでテストを自由自在に書けるようになることが目的。</p><p>vitestを用いる。アサーションには<code>expect</code>などを使ってマッチャを指定する。
expectや使えるマッチャは<a href=https://vitest.dev/api/expect>https://vitest.dev/api/expect</a>が詳しい。</p><ul><li>テスト戦略の類型とトレードオフの把握</li><li>ユーザインタラクションの再現</li></ul></p></div><div class=post-footer><time>January 11, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-01-02/>2025-01-02</a></h2><div><p><p>せいろを買った。<a href=https://www.shouhounet.jp/item-detail/1215821>18cmの竹でできたやつ</a>
店が中華街にあって賑わっていた。夜に行ったのははじめてで、明かりがきれいで印象的だった。</p><p>学生時代の先生がお薦めしていたのと、帰省して兄が気になっていそうだったので試すことに。餃子を包んで蒸してみた。焼くのとは違って記事がつやつやした感じになるのと小麦の味が違って感じた。今度は厚めの生地で包んで試したい。白菜やもやしをまとめて蒸してもみようと思う。</p></p></div><div class=post-footer><time>January 2, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2025-01-01/>2025-01-01</a></h2><div><p><p>今日はまったりする。</p><ul><li><input checked disabled type=checkbox> 家の鍋とフライパンのサイズを知りたい。せいろを買おうと思ったがサイズを選べなかったので。<ul><li>鍋は22cmくらい。結局勘でせいろ板を買ったらジャストフィットだった。冴えてる</li></ul></li></ul><h2><a href=#%e5%90%8c%e7%b4%9a%e7%94%9f%e3%81%ae%e7%b5%90%e5%a9%9a id=同級生の結婚 class=anchor aria-hidden=true>同級生の結婚</a></h2><p>帰省してあった高校の同級生と小学校の同級生がそれぞれ結婚していた。高校の同級生はよくあっていたのでそんなに驚きがなかったが、小学校の同級生は成人式ぶりでたまたま道ですれ違ったときに向こうの結婚相手と一緒にいるところに遭遇した。久しぶりに会ったことでも驚いたし結婚することも驚きだった。幸せそうで嬉しい。昔を知っている人間が結婚するのすごい。</p><h2><a href=#%e6%ac%b2%e3%81%97%e3%81%84%e3%82%82%e3%81%ae id=欲しいもの class=anchor aria-hidden=true>欲しいもの</a></h2><ul><li>せいろセット<ul><li>蒸したい！</li></ul></li><li>電動歯ブラシ<ul><li>ちょっと気になる</li></ul></li><li>本棚<ul><li>小説と漫画を並べたい。棚の高さを小さめにして自作したい</li></ul></li><li>免許<ul><li>失効してた</li></ul></li><li>カーテン</li></ul><h2><a href=#%e3%82%a4%e3%83%b3%e3%83%86%e3%83%aa%e3%82%a2 id=インテリア class=anchor aria-hidden=true>インテリア</a></h2><p>普段の生活を想像する。</p><ul><li>PCする</li><li>必要に応じて紙にも書く</li><li>ご飯を作って食べる</li><li>コーヒー入れて飲む</li><li>本は割と読む<ul><li>メモやコメントをしつつ真面目に読むこともあれば、酒を飲みながらまったり読むこともある</li></ul></li><li>お酒飲む</li><li>Youtubeとか動画見る</li><li>筋トレとかランニングもする。ランニングは外だけど</li><li>仕事する。プログラミングとかミーティングとかする</li><li>寝る。着替えとかもする。爪切ったりもする</li></ul><p>今の生活でそれなりになっている。ご飯食べる環境が課題。ダイニングテーブルがないので。</p><h2><a href=#%e4%bd%9c%e3%82%8a%e3%81%9f%e3%81%84%e3%81%94%e9%a3%af id=作りたいご飯 class=anchor aria-hidden=true>作りたいご飯</a></h2><p>年始は自炊をする。自炊と読書、アウトプットを回す感じにする。銭湯くらいは行ってもいいか。</p><ul><li><a href=https://dancyu.jp/recipe/2022_00006063.html>肉汁たっぷりの"白菜の焼き餃子"</a><ul><li>普段作ってるのに近い。餃子は白菜と酒を入れる派閥です。肉も入れます。ニラはあったらいれる。</li></ul></li><li><a href=https://dancyu.jp/recipe/2024_00009358.html>旨味を吸ったねぎが主役の「ひとりねぎすき焼き」</a><ul><li>白菜も入れたい。春菊もいきたい</li></ul></li><li><a href=https://dancyu.jp/recipe/2023_00008135.html>手間の分だけ味わい深く。滋味あふれる一品「里芋から揚げ」</a><ul><li>里芋たくさん処理したい。あとうまそう</li></ul></li><li><a href=https://dancyu.jp/recipe/2024_00009224.html>れんこん料理</a><ul><li>冬だし</li><li><a href=https://dancyu.jp/recipe/2024_00009093.html>根菜チキンカレー</a>もうまそう。れんこんは輪切りを半分にするの確かにそれっぽい</li></ul></li></ul></p></div><div class=post-footer><time>January 1, 2025</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-12-15/>2024-12-15</a></h2><div><p><h2><a href=#filter%e3%81%abasync%e3%82%92%e6%b8%a1%e3%81%97%e3%81%a6%e3%81%af%e3%81%84%e3%81%91%e3%81%aa%e3%81%84 id=filterにasyncを渡してはいけない class=anchor aria-hidden=true>filterにasyncを渡してはいけない</a></h2><p>日記はマークダウンで書いていて、タイトルとか公開・非公開とかはフロントマターに書いている。それをパースしてよしなに処理してHTMLに落としたり、そもそも公開しないようにしている。それらの処理はTSで書いている。</p><p>ちょっと前にリファクタしたときにテストを書くのをサボったせいで公開・非公開の設定が反映されなくなっていた。コードベースは公開リポジトリに置いているのでクリティカルな問題ではないのだけど、望んだ挙動ではないので普通に嫌だった。</p><p>事故の原因は非公開な記事を処理対象から落とすfilterにasync関数を渡したことだった。async関数はpromiseを返すので、どんな処理を書こうがfilterは何もしないmapと同じ振る舞いをしていた、というオチ。
biomeを入れてたので弾いて欲しい気持ちがある（気が付かなかった僕が悪くはあるのだけど）。</p><p>mapにasync関数を渡して記事一覧を加工していたので、そのままのノリで放り込んだのが敗因。promise.Allした後の配列に対してfilterすることで修正した。</p><h2><a href=#rss%e3%81%ab%e5%af%be%e5%bf%9c%e3%81%99%e3%82%8b id=rssに対応する class=anchor aria-hidden=true>RSSに対応する？</a></h2><p>そういえばサイトマップとかRSSフィードとかに全く対応していなかった。自分がそもそも使わないのと、この日記を積極的に人に読ませようという気がないのが理由。じゃあいいか。ちゃんとしたブログエンジンを作りたいわけでもないし</p></p></div><div class=post-footer><time>December 15, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-12-13/>2024-12-13</a></h2><div><p><ul><li><input disabled type=checkbox> kamakura.goの感想とかを書く</li></ul></p></div><div class=post-footer><time>December 13, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-12-12/>2024-12-12</a></h2><div><p><blockquote><p>We recommend that all third-party code generators be written as plugins, as this allows all generators to provide a consistent interface and share a single parser implementation.</p></blockquote><p><a href=https://protobuf.dev/reference/other/#plugins>https://protobuf.dev/reference/other/#plugins</a></p><p>はえ〜って感じ。Goのライブラリはだいぶ使い勝手良かったのでまあ確かにと思ってる。</p></p></div><div class=post-footer><time>December 12, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-12-05/>2024-12-05</a></h2><div><p><p>viperってinit使わないといけないのかな。
viperに依存性を注入するような使い方をしたい。Facadeを受け取ってCLIを返すようなCLIジェネレータを定義しようとしていて、CLIジェネレータを実装するためにviperの諸々をinitとかで終えようと思うと困る。実行時にfacadeを入れたいので。</p></p></div><div class=post-footer><time>December 5, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-11-27/>2024-11-27</a></h2><div><p><ul><li><input disabled type=checkbox> <a href=https://incepter.github.io/how-react-works/>https://incepter.github.io/how-react-works/</a> これ面白そうなので読む。定期的にくるReactの仕組みを深掘りしたくなる時期。</li><li><input disabled type=checkbox> ブログのMakefileを書く</li></ul><h2><a href=#branded-type%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e3%81%bf%e3%81%9f id=branded-typeを使ってみた class=anchor aria-hidden=true>Branded typeを使ってみた</a></h2><p>Branded typeはTSでnominal typingっぽいことをするためのプログラミングテクニックの一つ。<a href=https://zenn.dev/okunokentaro/articles/01gmpkp9gzfyr1za5wvrxt0vy6#branded-types>Branded Typesを導入してみる / TypeScript一人カレンダー</a> が詳しい。</p><p>僕はこんな感じに実装に入れてみた。<a href=https://github.com/naoyafurudono/naoyafurudono.github.io/commit/778270955b4c4e7672f50600fb28dff6c12b9fa0>https://github.com/naoyafurudono/naoyafurudono.github.io/commit/778270955b4c4e7672f50600fb28dff6c12b9fa0</a></p><p>全てがstringになりがちで不安になるけど、これなら安心安全。型の名前を信用できるようになって、名前をつける意欲も湧く。嬉しい。</p><h2><a href=#makefile%e3%81%aehelp id=makefileのhelp class=anchor aria-hidden=true>Makefileのhelp</a></h2><p>makeって、ある種CLIのDSLみたいなものだが、helpを自動生成してはくれない。いい感じにやるための工夫を見つけたのでシェアする。</p><p>以下は<a href=https://github.com/connectrpc/examples-go/blob/5f010eac8870fcd366b804f2734efe80b29ae5a0/Makefile#L17-L29>connectrpcのサンプル実装リポジトリにあったmakefileの一部</a>。</p><pre><code class=language-makefile>.PHONY: help
help: ## Describe useful make targets
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = &quot;:.*?## &quot;}; {printf &quot;%-30s %s\n&quot;, $$1, $$2}'


.PHONY: all
all: ## Build, test, and lint (default)
	$(MAKE) test
	$(MAKE) lint


.PHONY: clean
clean: ## Delete intermediate build artifacts
	@# -X only removes untracked files, -d recurses into directories, -f actually removes files/dirs
	git clean -Xdf
...
</code></pre><p><code>make help</code> とすると、呼び出せるmakeのtarget一覧とその説明を出力してくれる。便利。コメントのフォーマットを定めておいて、helpを呼ぶときにはawkとかでmakefile自身を処理することでヘルプを出している。</p></p></div><div class=post-footer><time>November 27, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-11-25/>2024-11-25</a></h2><div><p><ul><li><input checked disabled type=checkbox> それぞれの記事に「次の記事」と「前の記事」へのリンクをつける<ul><li>記事のレンダリングとは別にページの属性として前後の記事のURLかパスを持たせるように、テンプレートみたいにすると良い。計算フェーズを分ける</li></ul></li></ul></p></div><div class=post-footer><time>November 25, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-11-20/>2024-11-20</a></h2><div><p><h2><a href=#%e3%82%b9%e3%82%ad%e3%83%bc%e3%83%9e%e9%a7%86%e5%8b%95cli%e3%83%84%e3%83%bc%e3%83%ab%e9%96%8b%e7%99%ba%e3%82%92%e6%94%af%e6%8f%b4%e3%81%99%e3%82%8b%e3%83%84%e3%83%bc%e3%83%ab%e3%82%92proto%e3%81%ab%e4%b9%97%e3%81%a3%e3%81%8b%e3%81%a3%e3%81%a6%e4%bd%9c%e3%82%8a%e3%81%9f%e3%81%84 id=スキーマ駆動cliツール開発を支援するツールをprotoに乗っかって作りたい class=anchor aria-hidden=true>スキーマ駆動CLIツール開発を支援するツールをprotoに乗っかって作りたい</a></h2><ul><li><input checked disabled type=checkbox> proto2cliを実装する<ul><li>やった<ul><li>zennに紹介記事を書いた <a href=https://zenn.dev/nfurudono/articles/719e3aafac6065>https://zenn.dev/nfurudono/articles/719e3aafac6065</a></li><li>kamakura.go #7で発表した <a href=https://kamakurago.connpass.com/event/336353/>https://kamakurago.connpass.com/event/336353/</a><ul><li>スライドはこれ <a href=https://speakerdeck.com/naoyafurudono/protocol-bufferssukimading-yi-kara-gonocliwosheng-cheng-suru>https://speakerdeck.com/naoyafurudono/protocol-bufferssukimading-yi-kara-gonocliwosheng-cheng-suru</a></li></ul></li><li>まだ本番環境に組み込めてないのと、機能開発とか開発環境の整備ができていない。やる</li></ul></li><li>名前を決める：connectはブラウザやgRPCと互換性のあるAPIを提供するのに必要なボイラープレートが必要なのを軽減してくれるやつ。<ul><li>これはそれらにCLIをインターフェースとして加える。つまりローカルから、サーバを立てる事なく実行できるようにする。そういう立ち位置がいい。単にインターフェースを一個加えるだけ。実装はできるだけシェアしたい。</li><li>まずはconnectを採用するアプリケーションを一個用意して、それにCLIを入れる。ここで上手い入れ方を探る</li><li>次にその入れる作業を自動化する。そのためのCLIがproto2cli</li></ul></li><li>サブコマンドでサービス、位置引数でメソッド、フラグ引数(<code>-d</code>)でリクエストメッセージを受け取る。<ul><li>サブコマンドと位置引数は最初は特に区別しなくていいか。 <code>cmd &lt;service> &lt;method> -d &lt;request message json></code> の形式で呼び出すだけ。</li><li>CLIへの入力はそのままサービス名、メソッド名、リクエストメッセージがそれぞれbyte列かstringのどちらかで得られる。それらをなんとかするのは一旦別のコンポーネントの役割にしよう</li><li>ここまでは普通にflagsパッケージとかを使うだけでいける</li></ul></li><li>次にリクエストメッセージのデコードを自動化する。<ul><li><code>func unmarshalRPC(service, method, req string) (MessageInterface, error)</code><ul><li>対応する型のunmarshellerへのディスパッチとその呼び出しが責務</li></ul></li><li><code>dispatchUnMarshelelr(service, method string) (func(byte[], MessageInterface) error, error)</code><ul><li>ディスパッチだけでも良さそう</li></ul></li></ul></li><li>次に、サービスの呼び出しを行う<ul><li>connect サーバをclient経由で呼び出す</li><li>単にサービスを呼び出す<ul><li>インターセプタを通過できない、特にproto validateを通せない</li></ul></li><li>インターセプタとサービスを合成する<ul><li>できればhttpサーバの仕組みに乗っかりたい</li><li>でも無理がありそう、intercepter (unaryfunc) を受け入れてデコレートする感じにしそう</li></ul></li></ul></li><li></li></ul></li></ul><p>以下のようなprotoスキーマを定義する。</p><pre><code class=language-proto>syntax = &quot;proto3&quot;;

package nfurudono.sample.v1;

service SampleService {
  rpc Say(SayRequest) returns (SayResponse) {}
}

// SayRequest is a single-sentence request.
message SayRequest {
  string sentence = 1;
}

// SayResponse is a single-sentence response.
message SayResponse {
  string sentence = 1;
  bool dry_run = 2;
}
</code></pre><p>こんな定義があるときに</p><pre><code class=language-sh>$ ./sample say --sentence &quot;hello world&quot; --dryrun
sentence: &quot;I will say: hello world&quot;
</code></pre><p>みたいなやりとりを定義するためのCLIテンプレート生成ツールを作る。あくまでテンプレートなので、生成ツールではインターフェースとかグルーコードだけ提供して、ユーザは以下のようなコードを書くことになる。</p><ul><li>connectとかでサービスとサーバの起動を定義してmainからいい感じに呼ぶようにすると、gRPCサーバがたつのに対して、</li><li>CLIテンプレート作成ツールでサービスとCLIコマンドの呼び出しを定義してmainからいい感じに呼ぶようにすると、CLIから実行できる</li></ul><h3><a href=#%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9%e3%81%ae%e5%ae%9f%e8%a3%85 id=サービスの実装 class=anchor aria-hidden=true>サービスの実装</a></h3><pre><code class=language-go>package service

import (
	&quot;fmt&quot;
	
  sample &quot;github.com/nfurudono/gen/go/sample&quot;
)

type SampleImpl struct {}
// sample.SampleServiceはprotocとかが生成するようなinterface。gRPCとかconnectとかで使われているようなやつ。
var _ sample.SampleService = &amp;NewSampleImpl()

func NewSampleImpl() { return SampleImple{} }

func (* SampleImpl) Say(ctx *context.Context, req *connect.Request[samplev1.SayRequest]) (*connect.Response[samplev1.Response], error) {
	s := req.GetSentence()
	d := req.GetDryRun()
	if d {
		return fmt.Sprintf(&quot;I will say: %s&quot;, s), nil
	}
	return fmt.Sprintf(&quot;%s!!&quot;, s), nil
}
</code></pre><h3><a href=#%e3%82%a8%e3%83%b3%e3%83%88%e3%83%aa%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88 id=エントリポイント class=anchor aria-hidden=true>エントリポイント</a></h3><pre><code class=language-go>package main

import (
	slog
	
	tool &quot;github.com/naoyafurudono/good-tool&quot;
	&quot;github.com/naoyafurudono/sample-cli/service&quot;
)

func main() {
	s := service.NewSampleImpl()
	// NewCLI()の結果（CLI）はサービスを登録される。
	// サービスを保持するCLIはサービスが契約するrpc（名前、入力、出力）を知っている。
	// これらはprotoの仕組みで生成される。protovalidateなどのプラグインもそのレイヤで対応できるはず。
	cli := tool.NewCLI().AddService(s)  // このあたりのインターフェースはもうちょい考えても良いかも？
	// Runがコマンドライン引数を読んで以下を半ドアリングする
	//   - 呼び出すrpcの判定（ルーティング）、サブコマンドの名前が対応する
	//   - rpcに渡す入力messageのデコード、サブコマンドへのフラグ引数が対応する
	//   - rpcの出力メッセージやエラー内容の出力、コマンドの標準出力、標準エラー出力、コマンドのステータスコードの出しわけが対応する
	if err := cli.Run(); err != nil {
		slog.Fatalf(&quot;unexpected input: %w&quot;, err)  // 予期しないサブコマンドが来たらエラーを返すのもまた一興かな。
	}
}
</code></pre><p>便利じゃない？</p></p></div><div class=post-footer><time>November 20, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-11-13/>2024-11-13</a></h2><div><p><p>fzfで表示される選択肢と選択した結果得られる値を分けられるようにしたいので作った。
yamlでkey-valueペアのリストを保持しておいて、そのキーの選択をfzfで行い、得られる値はvalueである、みたいな感じ。</p><pre><code class=language-bash>#!/bin/bash

# ヘルプメッセージ
function print_help {
    echo &quot;Usage: $0 &lt;yaml_file&gt;&quot;
    echo
    echo &quot;This script allows you to select a key from a YAML file using fzf, and outputs the corresponding value.&quot;
    echo
    echo &quot;Options:&quot;
    echo &quot;  -h    Show this help message and exit&quot;
    echo
    echo &quot;Sample YAML format:&quot;
    echo &quot;  key1: value1&quot;
    echo &quot;  key2: value2&quot;
    echo &quot;  key3: value3&quot;
}

# -hオプションのチェック
if [ &quot;$1&quot; == &quot;-h&quot; ]; then
    print_help
    exit 0
fi

# 引数チェック
if [ -z &quot;$1&quot; ]; then
    echo &quot;Error: No YAML file specified.&quot; &gt;&amp;2
    print_help
    exit 1
fi

# 引数からYAMLファイルのパスを取得
YAML_FILE=&quot;$1&quot;

# YAMLファイルの存在チェック
if [ ! -f &quot;$YAML_FILE&quot; ]; then
    echo &quot;Error: File '$YAML_FILE' not found.&quot; &gt;&amp;2
    exit 1
fi

# キーをfzfで選択
selected_key=$(yq e 'keys | .[]' &quot;$YAML_FILE&quot; | fzf)

# キーが選択されていない場合
if [ -z &quot;$selected_key&quot; ]; then
    echo &quot;No key selected.&quot; &gt;&amp;2
    exit 1
fi

# 選択されたキーに対応する値を取得
selected_value=$(yq e &quot;.${selected_key}&quot; &quot;$YAML_FILE&quot;)

# 値を標準出力に表示
echo &quot;$selected_value&quot;
exit 0
</code></pre><p>上のコマンドを <code>fzf-keyvalue-select</code> という名前でパスを通しておく。その上で以下のような関数を登録しておくと便利。</p><pre><code class=language-fish>function notion
    set url (fzf-keyvalue-select ~/.local/fish/notion.yaml)
    and open $url
end
</code></pre></p></div><div class=post-footer><time>November 13, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-10-27/>2024-10-27</a></h2><div><p><h2><a href=#%e7%b5%90%e5%a9%9a%e5%bc%8f%e6%ba%96%e5%82%99 id=結婚式準備 class=anchor aria-hidden=true>結婚式準備</a></h2><p>友達の結婚式に今度出席するので真面目に準備してみる。普段スーツを着ないので礼服を着るのはコスプレみたいでドキドキする。</p><ul><li><input checked disabled type=checkbox> 礼服が入るか検証</li><li><input checked disabled type=checkbox> シャツを買う</li><li><input checked disabled type=checkbox> ネクタイと胸につけるハンカチ買う<ul><li>ネクタイの練習もしておかないとな</li></ul></li><li><input checked disabled type=checkbox> 靴を手入れする</li><li><input checked disabled type=checkbox> ワックス買って練習する</li><li><input checked disabled type=checkbox> 髪をいい感じに切ってもらうための店を見つける<ul><li>人に聞くのがいいかな</li><li>2 or 3日に行こう（最近切ったばかりでできることあるのか？）</li></ul></li><li>その他マナーを学んでおく</li></ul><h2><a href=#sql%e3%81%ae%e3%83%a6%e3%83%bc%e3%82%b6%e7%ae%a1%e7%90%86 id=sqlのユーザ管理 class=anchor aria-hidden=true>SQLのユーザ管理</a></h2><p>アプリケーションの開発・運用をしているとSQLのユーザをそれなりに作ることになる。データベースもしかり。それらをIaCな感じで管理したいがベストプラクティスをまだ知らない。</p><p>管理したいユーザの情報は以下の通り</p><ul><li>ユーザ名（ホストを含む）</li><li>Grant</li><li>パスワード</li></ul><p>簡単なのは、ユーザ名とパスワードだけ1Passとかで管理して、他は動いているものを見に行く方法。管理しない考え方。実態と齟齬がないことは良いことだが、設定を見るためには管理者権限が必要だしいちいち接続するのも面倒。また、複製が面倒なのも問題だし、設定の経緯をコメントに残したりバージョン管理したりできないので組織としてスケールしない。</p><p>Terraformで管理するのはいい線行きそう。ネックはパスワードかな。パスワードを平文で保持しないことを達成しようと思うと途端にややこしくなりそう。運用ではパスワードにシュッとアクセスしたいケースがあるため、他の解決策と併用するのが良いだろう。
Grantとユーザ名、変更の経緯の管理には向いていそう。</p><p>Terraformと1passを組み合わせるのが綺麗だろうと思った。ユーザ名は不変（変更したくなったら作り直す）にしておけば、色々いい感じになるんじゃないかな。</p><h2><a href=#oauth%e3%81%ae%e3%83%99%e3%82%b9%e3%83%88%e3%83%97%e3%83%a9%e3%82%af%e3%83%86%e3%82%a3%e3%82%b9 id=oauthのベストプラクティス class=anchor aria-hidden=true>OAuthのベストプラクティス</a></h2><p><a href=https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics>https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics</a> が良さげ。
Refresh tokenをどこにどれくらいの期間保持するとか、どういうインターバルで無効化するとかで悩む。あとaccess tokenはauthorizationヘッダに突っ込むのが吉？とか。</p><h2><a href=#about-a-philosophy-of-software-design id=about-a-philosophy-of-software-design class=anchor aria-hidden=true>about: A Philosophy of Software Design</a></h2><p>ソフトウェア設計の指針をまとめた本で定番だけど日本語訳されてない（はず、2022年に買ったときはそうだった）。
APIを実装・設計したりそれに付随してコードレベルのモジュール（クラスとかで表現するようなレイヤ）を設計するときに役立つ指針をくれる。</p><p>僕がプログラミングのレビューをしたり、自分でプログラミングしたりするときに気にすることは割とここから学んだ（言語化しただけ？）と思う。インターネットでHTMLが公開されてたらどんなに嬉しいだろうと思う。レビューのときに「ここを読んでください」をできるので。</p><p>言語とかパラダイムに依存しない、プログラミング一般について使える知見が書かれているので繰り返し読む価値のあるものだと思うし、実際そうしている。以下のそれぞれのタイミングで読んだが、毎回楽しく思っている。</p><ol><li>がっつりプログラミング始める前</li><li>自分でコードを書くようになってから</li><li>レビューをするようになってから</li></ol><p>広くいろんな人に使われるAPIを設計するようになるとまた見える世界が違うのだろうと思う。</p><h2><a href=#about-%e3%83%9e%e3%82%b9%e3%82%bf%e3%83%aa%e3%83%b3%e3%82%b0api%e3%82%a2%e3%83%bc%e3%82%ad%e3%83%86%e3%82%af%e3%83%81%e3%83%a3 id=about-マスタリングapiアーキテクチャ class=anchor aria-hidden=true>about: マスタリングAPIアーキテクチャ</a></h2><p>最近（日本語訳が）発売されったぽい本。内容的には流行り廃りがありそうな内容を扱っていて10年後には古くなっていそう。例えば第1章の「APIの設計・構築・仕様化」ではConnect使えばいいじゃないと思った。</p><p>とはいえこれまで10年くらいのプラクティスがおそらくいい感じに説明されていて、今どきのクラウドでいろんなサービスを動かして連携させるスタイルのアプリケーションをどうやって作っていくかを体系的に述べているように思う。ぼくはそのあたりを勉強中の身なので偉そうなことを言ったり評価をしたりできないのだけど、これまで断片的に学んで来たこと（そして腑に落としたり手を動かすに至らなかったこと）の使い所を自分の中で描けるようになっていると感じる。ほんまかいなと思うこともあるので、盲目的に信じるというよりは質の高い雑誌のような意識で読んでいる。</p></p></div><div class=post-footer><time>October 27, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-10-26/>2024-10-26</a></h2><div><p><ul><li><input disabled type=checkbox> aboutページの収取をするプラグインを実装して組み込んだ。あとはそれをいい感じに表示する必要がある</li><li><input checked disabled type=checkbox> 今度人の結婚式に出るので身だしなみとか常識を身につける・髪切るとか服を用意する計画を立てる<ul><li>受付やるらしいのでちゃんとした方が良さそう</li><li>礼服着れるか確認しておくか</li></ul></li><li><input disabled type=checkbox> helm完全に理解する。リリースとか意味わからん。installって何？kubectl applyとの関係は？</li></ul></p></div><div class=post-footer><time>October 26, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-10-16/>2024-10-16</a></h2><div><p><h2><a href=#%e8%aa%ad%e6%9b%b8%e3%83%a1%e3%83%a2 id=読書メモ class=anchor aria-hidden=true>読書メモ</a></h2><ul><li><input disabled type=checkbox> <a href=https://browser.engineering/intro.html#browser-code-concepts>https://browser.engineering/intro.html#browser-code-concepts</a> 以前まで読んだ。このセクションから再開する。</li></ul><h2><a href=#%e3%83%96%e3%83%ad%e3%82%b0%e9%96%8b%e7%99%ba%e3%82%a2%e3%82%a4%e3%83%87%e3%82%a2 id=ブログ開発アイデア class=anchor aria-hidden=true>ブログ開発アイデア</a></h2><ul><li><input disabled type=checkbox> トピックをセクションのタイトル (hN要素) で宣言して、それを集約したページを勝手に生成するようにしたい。<ul><li><code>about:&lt;TOPIC_NAME> &lt;TEXT></code> という名前のタイトルをヘッダにつけたら、<code>/topic/&lt;TOPIC_NAME></code> というページを生成して、　　そこに <code>&lt;TEXT> - &lt;DATE></code> みたいな名前のセクションを埋め込みたい。元記事へのパーマリンクも添えておくと良さそう。</li><li>読書記録に使えそう</li><li>その他にも普通のブログではタグを記事につけるようなノリで使うのも可能。記事の単位だとタグによる分類は不便に思うのだけど、セクションくらいの粒度ならつけるときも読む時もちょうど良いだろうと思う</li></ul></li></ul><h2><a href=#%e4%bb%8a%e3%81%ae%e7%92%b0%e5%a2%83%e3%81%a0%e3%81%a8%e6%af%94%e8%bc%83%e7%9a%84%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%9f%e3%83%b3%e3%82%b0%e3%81%8c%e5%be%97%e6%84%8f%e3%81%8b%e3%82%82%e3%81%97%e3%82%8c%e3%81%aa%e3%81%84%e3%81%a8%e6%80%9d%e3%81%86%e3%82%88%e3%81%86%e3%81%ab%e3%81%aa%e3%81%a3%e3%81%a6%e3%81%8d%e3%81%9f id=今の環境だと比較的プログラミングが得意かもしれないと思うようになってきた class=anchor aria-hidden=true>今の環境だと比較的プログラミングが得意かもしれないと思うようになってきた</a></h2><p>エンジニアリングの中ではプログラミングは割と得意なのかもしれないとここ１ヶ月くらいでなんとなく思うようになった。こういうプログラムの構成の方が良くない？みたいなことを理由込みでそれなりに説明・提案できることが周囲より多そうな気がしてきたので。</p><h2><a href=#%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%a0%e3%81%ae%e8%a8%ad%e8%a8%88 id=プログラムの設計 class=anchor aria-hidden=true>プログラムの設計</a></h2><p>失敗できないように作るとか（設計、型の宣言）、失敗には早く気がつけるようにするとか（リント、コントラクト、バリデーション）、プログラムのあるべき振る舞いをテストするとかは似たような話に思う。先に挙げたものほどフィードバックが早くて良い。リントとかテストはそのプログラムそのものの性質ではなくて外からどうこうする点が特殊。テストではこういうふうに使うと確かにこんな感じに振る舞う、みたいな確認をする。リントではこういう感じの使い方をするとやばいからやめておいて欲しい、と怒る（この観点では型と一緒）。リンターのライフサイクルは対象のソフトウェアと一緒とは限らないのが辛いところなのかな。型システムは言語の一部だし、設計はプログラムの一部。でもリンターは一部とは限らない。一部になっている奴はだいぶ使い勝手が良いが、そうでないやつはいろんな人が勝手気ままに思想を入れるし、それらの互換性は比較的真面目には考えられないだろうから品質が悪くなりそう。</p><p>そういうわけでリンター難しそう。</p></p></div><div class=post-footer><time>October 16, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-10-15/>2024-10-15</a></h2><div><p><h2><a href=#%e8%a6%8b%e5%87%ba%e3%81%97%e3%81%abid id=見出しにid class=anchor aria-hidden=true>見出しにid</a></h2><p>見出しにidを振るようにした。
idが振られている要素に対するCSSとクリックでリンクをクリップボードに貼り付ける実装と相まっていい感じ。やったね。パーマリンクは意味のある単位ごとに簡単に取れるべきだと信仰している。なのでハッピー。</p><p>今日はリンクをたくさん取れるようにセクション多めな日記にしてみる。</p><h2><a href=#%e8%82%89 id=肉 class=anchor aria-hidden=true>肉</a></h2><p>中目黒のめちゃでかポークステーキを出しているお店に会社の人たちと行ってきた。案外いけたがやはりデカかった。あと見せてもらったマジックがすごかった。</p><h2><a href=#%e6%96%99%e7%90%86 id=料理 class=anchor aria-hidden=true>料理</a></h2><p>同僚とお昼で料理得意そうと言われて意外だった。料理のことは好きだけど。</p></p></div><div class=post-footer><time>October 15, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-10-10/>2024-10-10</a></h2><div><p><ul><li><input disabled type=checkbox> protobufとかsqlcでファイル生成をするツールを使ってチーム開発をしているとすごくコンフリクトして辛い。生成するファイルを分割して、例えばrpcとかmessage単位にファイル（パッケージではない！）を分ければgitのコンフリクトは避けられる。パッケージも一緒なので振る舞いには影響しない。</li></ul></p></div><div class=post-footer><time>October 10, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-09-18/>2024-09-18</a></h2><div><p><p>日記からtodo一覧を抽出して専用ページにtodoアイテムとその文脈を列挙する機能を実装した。この手の機能はtodoに限らず文章で考えや記録をつける人を幸せにするだろう。</p><p>例えば、読書メモをする場合、ぼくはそれを日記に書きたい。でもある本についての読書メモはまとめてみたい気持ちもある。そんなときに、その本に関する記述をまとめてみる機能があると幸せなはずだ。あくまでメモなので、その内容はその日の自分に依存する主張を持つ。なので、日記としての文脈は必要なはず。日記はぼくの考えたこととか記録を時系列でまとめたものであって、ぼくにまつわるいろんなものは時系列に沿って進んでいく。考えて、書くのも時間的な変化とともに進めていくものだし。なので書き出すフォーマットは日記が良い。楽だし、情報が失われにくそうなので。</p><p>その反面、読み方によっては他のアスペクトで抽出したりまとめたいこともある。それは日記を切りはりしたものとしてある程度表現できるはず。普通にぼくたちがあるアスペクトでまとまった記述をするときには、時間をかけて一つの側面から解釈しやすいようにする。文書を作成するときは反復して改善するものだし、推敲をするものでもある。では推敲をしない文書作成は、あるテーマについて日記を切り貼りしたものなのではないだろうか。</p><p>その切りはりをやるツールとしてtodo一覧の抽出みたいな機能を使えると思う。</p><p>セクションの単位でアスペクトを宣言できると良いだろうと思っている。あるいはAIでアスペクトを後付けしてもいいかもしれない。でも、どちらかというと、ぼくは普段の日記を書くときに後から見返す解釈を意識してかけたら楽しいだろうと思う。なのでアスペクトは明示的に日記を書く人が付けられるといいと思う。ふとアスペクトを思いついて、これまでの自分はどう思ってたんだっけと気になることもある。そのときには確かにAIに全部みていい感じにタグ付けしてほしい。</p><p>あと、今はunifiedを使って実装しているけど、pandocに移行しても楽しそう。型が辛いと思っているので。pandocはhaskell製なので型が弱くて文句を言いたくなることはないはず。</p></p></div><div class=post-footer><time>September 18, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-09-16/>2024-09-16</a></h2><div><p><h2><a href=#%e4%bb%8a%e6%97%a5%e3%82%84%e3%82%8b%e3%81%93%e3%81%a8 id=今日やること class=anchor aria-hidden=true>今日やること</a></h2><ul><li><input checked disabled type=checkbox> 掃除<ul><li>ルンバを起動したのでok</li></ul></li><li><input checked disabled type=checkbox> 外出<ul><li>電車乗るくらいの外出をする。秋物出たかな。あるいは外で使うと幸せになれるグッツを買うか。</li><li>ランニングパンツと靴下を買う。帰省でランニングのズボンを置いてきたのと、靴下が大体ボロボロになってきたので。</li><li>靴下は買った。ランニングパンツはまあいっかと思って買わず。そのほかに秋に向けて服を見たけどピンと来なかったので特に買わずだった。</li></ul></li><li><input checked disabled type=checkbox> 本読む。k8sのあれ。あとは認証の技術気になるので学ぶ。認可も気になる。<ul><li>SSL</li><li>ドメイン</li><li>k8sのRBAC</li><li>選ばれたのはカスタムコントローラでした。ググって見つけたyahooの人のスライドが概要を掴むのにいい感じだった。<ul><li><a href=https://speakerdeck.com/hhiroshell/platform-engineering-and-kubernetes>https://speakerdeck.com/hhiroshell/platform-engineering-and-kubernetes</a></li></ul></li></ul></li><li><input checked disabled type=checkbox> todoをリストアップする拡張の実装</li><li><del>todoの拡張、出先でチェック入れたくなりそうなので、githubでの編集へのリンクをつけたい</del><ul><li>やっぱりいいや。出先ではのんびりしよう。todoのことなんて忘れればいい。</li></ul></li></ul><h2><a href=#todo%e3%82%92%e3%83%aa%e3%82%b9%e3%83%88%e3%82%a2%e3%83%83%e3%83%97%e3%81%99%e3%82%8b%e3%83%9a%e3%83%bc%e3%82%b8%e3%82%92%e5%ae%9f%e8%a3%85%e3%81%97%e3%81%9f id=todoをリストアップするページを実装した class=anchor aria-hidden=true>todoをリストアップするページを実装した</a></h2><p><a href=https://diary.nfurudono.com/todos/>https://diary.nfurudono.com/todos/</a>に実装した。これでもう過去のtodoを忘れない。収集とレンダリングの両方が必要でだるかった。特にレンダリングはunifiedのアーキテクチャを理解してなくて手間取った。今の実装がunifiedのアーキテクチャに沿っているか自信がない。</p><h2><a href=#%e6%ac%a1%e3%81%ae%e5%bc%95%e8%b6%8a%e3%81%97 id=次の引越し class=anchor aria-hidden=true>次の引越し</a></h2><p>本棚を作って設置したところ、そろそろキャパシティが限界だと気がついた。本棚を増やすためには引越しが必要。そろそろ減らしてもいい本も増えてきたので、
2年周期の引越しで問題ないとは思うが。今で3/4年か&mldr;、今年のうちに西側の探索をしたいな。今度友達とどこに行くか決めてないので、そっちの方に雑に行ってみて案内してもらおう。向こうが詳しいかは知らないけど。</p><h2><a href=#%e9%9b%bb%e8%bb%8a%e3%81%a7%e9%81%8e%e3%81%94%e3%81%99%e3%81%ae%e3%81%8c%e5%a5%bd%e3%81%8d id=電車で過ごすのが好き class=anchor aria-hidden=true>電車で過ごすのが好き</a></h2><p>寝たり本を読んだり景色をみたり、考え事をしたりする環境として電車で過ごすのが好き。年末は北国に電車に乗りに行きたいな。高校生の頃に一週間電車に乗りっぱなしの旅行をしたけど、あんな感じのことをまたやりたい。それでいうとシベリア鉄道は憧れる。</p><p>景色が変わるのがいいし、椅子しかないのも良い。なので新幹線みたいな机があるのはそれほど好きじゃない。横に細いサイドテーブルみたいなのはok。ものを置けるけどそこで何かやる感じではないのがいい。集中できるし、パッと休憩しようと思ったら外を見ればいい。なので電車に乗るのは日中がいい。夜は外が見えないので興醒めする。</p><p>家にいても景色が変わらなくてつまらない。外に出るのも良いが、それだと本読んだりできない。電車の中は家と同様に自分が暇なのに快適で、移動しているのがいい。</p><h2><a href=#3%e9%80%a3%e4%bc%91 id=3連休 class=anchor aria-hidden=true>3連休</a></h2><p>金曜日の昼過ぎに三連休だということを知った。なんと来週も三連休だということだった。この三連休は本棚を作り、あとは家でまったりした。こういうのもあり。</p></p></div><div class=post-footer><time>September 16, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-09-15/>2024-09-15</a></h2><div><p><h2><a href=#%e8%87%aa%e4%bd%9c%e6%9c%ac%e6%a3%9a2%e6%9c%ac%e7%9b%ae id=自作本棚2本目 class=anchor aria-hidden=true>自作本棚2本目</a></h2><p>本棚を作った。2本目だけどすでに飽きてきた。慣れから余裕が出てきたことである程度精度が悪くても問題ないことに気がついてしまったところで敗北していて、「はいはい大体こんな感じでしょ」って作業になったのであまり楽しくなかった。今もさっさと油乾かないかなとか考えてる。改善の余地はあるのだろうが、前回作ったものが問題なく動いている（本棚なので動かないけど）し、物に満足しているのでまあこれでいいでしょとなってる。おかげで作業速度は改善していて、多分倍速くらいになった。でも幸せかというとなかなか&mldr;。</p><p>本棚に余裕ができるので凝った本の置き方をできるようになるのが楽しみ。図書館みたいに分類ごとに余裕を作るあれをする。そうすると本が倒れないようにするあの支えが欲しくなるな。<a href=https://amzn.asia/d/fUltqmB>https://amzn.asia/d/fUltqmB</a> こういうやつ。</p><p>キングジムのやつを注文した。段によってはブックエンドいらない気がするので二つだけ。明日届くはず。昨日今日はだらだらしつつ本棚を作ったのだった。明日は何をしようかな。カスタムコントローラを作ってみたいが、デプロイ先のk8s環境がないし、用意したとしてもその使い道も特に思いつかないので困っている。</p><h2><a href=#cloudflare-pages%e3%81%a7%e3%81%ae%e7%8b%ac%e8%87%aa%e3%83%89%e3%83%a1%e3%82%a4%e3%83%b3%e3%81%ae%e8%a8%ad%e5%ae%9a id=cloudflare-pagesでの独自ドメインの設定 class=anchor aria-hidden=true>cloudflare pagesでの独自ドメインの設定</a></h2><p>CNAMEを登録するだけでSSL証明書まで発行してもらえた。TLS証明書の発行には何か検証のためのDNS設定を通じた認証が必要だと思っていたのだがどうしているんだろう。なんか僕の知識が歪んでいそうだな。</p></p></div><div class=post-footer><time>September 15, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/go-static-analysis/>Goのanalysisとtypesに入門する</a></h2><div><p><h2><a href=#%e6%a6%82%e8%a6%81 id=概要 class=anchor aria-hidden=true>概要</a></h2><p>Goで静的解析してリンターを実装したい。具体的には、あるT1インターフェース型の変数がスコープにあるときは、T1よりゆるい任意の型の使用を禁止する、みたいな制約を入れたい。その辺に転がっている記事ではASTを覗いてみたり、SSAを覗いてみたりするようだけど、ASTとその型をまともに扱っていつつ、いい感じに静的解析ツールとして仕上げる記事を見つけられなかった。</p><p>この記事ではGoプログラムの静的解析ツールを実装するために存在する標準的なツールチェーンの思想を説明する。Go Analyzerは静的解析ツールフレームワークとして用いる。具体的な静的解析には標準ライブラリを用いる。</p><h2><a href=#%e4%bd%9c%e3%82%8a%e3%81%9f%e3%81%84%e3%82%82%e3%81%ae id=作りたいもの class=anchor aria-hidden=true>作りたいもの</a></h2><blockquote><p>具体的には、あるT1インターフェース型の変数がスコープにあるときは、T1よりゆるい任意の型の使用を禁止する、みたいな制約を入れたい。</p></blockquote><p>これを検証するGoの静的解析ツール。例えば以下のようなrの使用を検知したい。</p><pre><code class=language-go>func parse(r io.Reader) (string, error) { ... }

func (rw io.ReadWriter) {
	var r io.Reader = getReader()
	s, err := dump(r) // 「rじゃなくてrwを使ってくれ〜！」と指摘したい。
	...
}
</code></pre><h2><a href=#analysis id=analysis class=anchor aria-hidden=true>analysis</a></h2><p><a href=https://pkg.go.dev/golang.org/x/tools/go/analysis>https://pkg.go.dev/golang.org/x/tools/go/analysis</a> これ。準標準なパッケージ。ドキュメントの冒頭に思想がちゃんと書かれているのでそれを読むのが良さそう。</p><h3><a href=#analyzer%e6%a7%8b%e9%80%a0%e4%bd%93 id=analyzer構造体 class=anchor aria-hidden=true>Analyzer構造体</a></h3><p>一個の解析ツールに対応する。Analyzer.Runに解析を実行する関数を定義する。この解析ツールを実行するとき（実行するのはフレームワークの仕事）に、Pass構造体が渡される。</p><h3><a href=#pass%e6%a7%8b%e9%80%a0%e4%bd%93 id=pass構造体 class=anchor aria-hidden=true>Pass構造体</a></h3><p>Pass構造体は解析対象のパッケージごとに作成される。なので解析の単位はパッケージごとということになりそう。いいじゃん。</p><pre><code class=language-go>type Pass struct {
	Fset         *token.FileSet
	Files        []*ast.File
	OtherFiles   []string
	IgnoredFiles []string
	Pkg          *types.Package
	TypesInfo    *types.Info
	ResultOf     map[*Analyzer]interface{}
	Report       func(Diagnostic)
	...
}
</code></pre><p>こいつを通じて解析をする関数は処理対象のデータにアクセスしたり、処理結果を報告したりするぽい。モナドとか代数的エフェクトみたいで綺麗だ。そう思うとあれらは抽象化された一つの振る舞いの切り口を表現するための基本的な演算を定義していたのだから、まあそうだなと思える。Kokaで静的解析ツールを作るときにはpassエフェクトを定義するのだろう。</p><blockquote><p>The Fset, Files, Pkg, and TypesInfo fields provide the syntax trees, type information, and source positions for a single package of Go code.</p></blockquote><p>これは本質情報の予感。このあたりにうまくアクセスすることで、ぼくたちの頭の中で想像する型付き抽象構文木へのアクセスを実現できるんだろう。データ構造が思ったのと違いそうなことには気をつけよう。</p><p>これらに加えて、他のanalyzerが出力してくれる結果をこのanalyzerの入力として使える。それにアクセスするためには pass.ResultOf[a].(aResType)を参照すればよい。</p><p>診断(diagnostics)を出したければPass.Reportとか、パッケージで提供されているReportfとかを使うらしい。</p><h2><a href=#go%e3%81%ae%e5%9e%8b%e4%bb%98%e3%81%8d%e6%a7%8b%e6%96%87%e8%a7%a3%e6%9e%90%e6%9c%a8 id=goの型付き構文解析木 class=anchor aria-hidden=true>Goの型付き構文解析木</a></h2><p>ここまでで、モジュラーに静的解析ツールを実装するフレームワークの構造がわかった。それに乗っかれば静的解析をいい感じに動かすことはできそうだ。静的解析の処理を実装する方法もなんとなくわかった。Pass構造体の世界観に乗っかればokな感じがする。</p><p>次に自在にプログラムを解釈する方法を知りたい。プログラムはコンパイラに処理されていろんな形態に変換されるので、ユースケースに応じて適切な表現を選ぶ必要がある。今回は型付き抽象構文木を扱いたいので、Pass構造体のFset, Files, Pkg, TypesInfoあたりを上手に使えると良さそうだ。特にTypesInfoが気になる。これは types.Info型をとるみたいなので、typesパッケージを見に行く。</p><p>typesパッケージはこれ <a href=https://pkg.go.dev/go/types>https://pkg.go.dev/go/types</a>。冒頭の説明がスッキリしていてまだ何をやれば型付き抽象構文木に対してクエリっぽいことをできるか、どんなクエリっぽいことが許されるかを理解できない。なので貼ってあったチュートリアルのリンクを辿る。なお、スッキリしている説明自体は読んでよかった。このパッケージが扱うフェーズで何をやるか説明されていて、もっと詳しく読んで良さそうなことに自信を持てた。</p><p>なお、僕の目的のためには他の解析ツールの結果を使う方が良いかもしれないとも思う。暇だし気になるのでチュートリアルを読むのに時間をかけるけど。</p><h3><a href=#%e3%83%81%e3%83%a5%e3%83%bc%e3%83%88%e3%83%aa%e3%82%a2%e3%83%ab id=チュートリアル class=anchor aria-hidden=true>チュートリアル</a></h3><p>脱線したがチュートリアルを読み進める。<a href=https://go.dev/s/types-tutorial>https://go.dev/s/types-tutorial</a> これ。これを読む目的は、何をやれば型付き抽象構文木に対してクエリっぽいことをできるか、どんなクエリっぽいことが許されるかを理解すること。</p><p>このチュートリアルはジェネリクスには対応してないらしい。ジェネリクスのためのドキュメントは別途あるとのことだけど、今回は基礎を知りたいので気にしない。</p><p>イントロと例くらいは読んでみて、あとは斜め読みでいいかな。まずはイントロ。</p><blockquote><p>Measured by lines of code and by API surface area, it is one of the most complex packages in Go&rsquo;s standard library, and using it requires a firm grasp of the structure of Go programs.</p></blockquote><p>とのこと。大変だ。</p><blockquote><p>Starting at the bottom, the go/token package defines the lexical tokens of Go. The go/scanner package tokenizes an input stream and records file position information for use in diagnostics or for file surgery in a refactoring tool. The go/ast package defines the data types of the abstract syntax tree (AST). The go/parser package provides a robust recursive-descent parser that constructs the AST. And go/constant provides representations and arithmetic operations for the values of compile-time constant expressions, as we&rsquo;ll see in Constants.</p></blockquote><p>データ構造とアルゴリズムを分けるの賢そう。parserにastを定義しないとか偉い感じがする。色々あるんだろうな。どう嬉しいのかはわからないけど。定数畳み込みをastに対して実装したいが、parserに依存するわけではないよね、みたいな話かな。</p><p>名前解決、型検査、定数式の計算は一緒にやらないといけないなるほど。ここでいう名前解決とは、名前の出現に対してその宣言を対応させること。</p><p>例まで読んだがパッケージレベルの話しかわからないな。ぼくは式とかのレベルでプログラムを処理したいんだ！ということで本命のInfo構造体への言及を探すことにすると、<a href=https://github.com/golang/example/tree/master/gotypes#typeandvalue>TypeAndValue</a>でそれらしいことを述べている。</p><p>Info.Typesは <code>map[ast.Expr]TypeAndValue</code> らしい。そろそろ手を動かして、プログラムのこの要素は式として扱われるか？とかをみたい。と思ったらドキュメントが例を出してくれた。こういうときが一番楽しい。式があったら型は得られるようになってるのね。ただまだよくわかってなくて、mapの定義域をast.Exprとしているが、そのExprとして本当に登録されるのはどの範囲のExprなのかがわからない。当然 <code>ast.Expr{}</code> なんて渡しても、その型を計算しているわけがない。どういう操作で手に入れたast.Exprに対しては、Info.Typeがその型を教えてくれるんだろうか。Infoを生成するやつが知ってるのかな。analysisパッケージはよくわからんPassがInfoを持っていたので微妙だけど、パッケージの単位で処理をするのでパッケージに存在するすべての式の型を教えてくれると思って良さそう？</p><p>確かに<a href=https://pkg.go.dev/go/types#Config.Check>Config.Check</a>はパッケージを型検査して、引数にInfoへのポインタをとって結果を書き込みそう。</p><p>次に、型同士の比較をしたい。具体的には、T1が必要な文脈でT2は使えるか (assignable) を判定する方法が欲しい。そのためにこれが使える<a href=https://pkg.go.dev/go/types#AssignableTo>https://pkg.go.dev/go/types#AssignableTo</a>。引数に渡すTypeインターフェースの値はTypeAndValueで取れるので、ほとんど勝ったようなもの。ちなみに僕は、最初<a href=https://pkg.go.dev/go/types#ConvertibleTo%3E>ConvertibleTo</a>を使っていて全然ダメだった。ConvertibleToは数値が変換できるか判定するやつぽい。</p></p></div><div class=post-footer><time>August 31, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-08-21/>2024-08-21</a></h2><div><p><h2><a href=#zed%e3%81%8c%e8%89%af%e3%81%84 id=zedが良い class=anchor aria-hidden=true>Zedが良い</a></h2><p>Zedエディタをずっと使っている。nvimを使う機会は無くなったと思う。ぼくにとってnvimを使うのは起動が爆速なvimモードで編集できるエディタであることだけがモチベーションだった。
Zedがそれをほぼカバーしているので、慣れとか不満をまとめることを目的としてZedを使うことにした。</p><p>Zedは速いし機能もしっかりあるし、設定ファイルのデザインが意味ある単位で残すモチベーションの湧くような設計になっていることろが好き。</p><p>Winsowsで使えないとか日本語入力に不満があるとかはまあいいかと思えるくらいには良いと思っている（そのあたりはコントリビューションチャンスということで）。</p><h2><a href=#%e3%81%bc%e3%81%8f%e3%81%ae%e5%a4%8f%e4%bc%91%e3%81%bf-2024 id=ぼくの夏休み-2024 class=anchor aria-hidden=true>ぼくの夏休み 2024</a></h2><p>今年の夏休みは充実していた。</p><ul><li>実家に帰省</li><li>おばあちゃんハウスに帰省 (with 家族)</li><li>高校の友達と会う</li><li>大学の友達と金沢・高山観光</li><li>オリエンテーリング参加<ul><li>久しぶりにやった。楽しかった</li><li>大学の別の友達とかと会う</li></ul></li><li>新しく人と関わり始める</li><li>k8s入門</li><li>Zed入門</li><li>unifiedとcloudflare入門（日記用のブログサイトの作成・デプロイ）</li></ul><h2><a href=#%e3%83%a1%e3%83%a2%e5%8c%96 id=メモ化 class=anchor aria-hidden=true>メモ化</a></h2><p>雑にメモ化して実行速度が倍くらいになったのだけど、嬉しいような何をやってるんだか、という気持ちになる。今回のは重複するファイルアクセスの結果を変数に束縛するだけなので、メモ化というかなんというかだけど。それくらい最初から作法としてやろうという感じはする。</p></p></div><div class=post-footer><time>August 21, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-08-15/>2024-08-15</a></h2><div><p><p>日記をnextjsでビルドして、cloudflare pagesにデプロイするようにした。cnameの設定が効くようになれば、<a href=https://diary.nfurudono.com>https://diary.nfurudono.com</a>から見えるようになるはず。</p><p>cloudflareのアカウントを初めて作って設定したが、体験よかった。デプロイとか周りの開発のためにCLIツールやそれのgithub actionsバインディングが提供されていて、サクッとデプロイできた。記念すべき初デプロイの成功をメモしておく<a href=https://github.com/naoyafurudono/naoyafurudono.github.io/actions/runs/10399555684/job/28798614059>https://github.com/naoyafurudono/naoyafurudono.github.io/actions/runs/10399555684/job/28798614059</a></p><p>Hugoの設定をたくさん書いていても楽しくないのでNext.jsでなんでもやってみよう、というモチベーション。<a href=https://github.com/unifiedjs/unified>unified</a>がいい感じで楽しいので動くところまで持って来れた。</p><p>ソースコードは<a href=https://github.com/naoyafurudono/naoyafurudono.github.io/tree/main/tools/tt>https://github.com/naoyafurudono/naoyafurudono.github.io/tree/main/tools/tt</a>にある。</p></p></div><div class=post-footer><time>August 15, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/lazy-nvim/>Neovimにlazyを入れてプラグイン管理することにした</a></h2><div><p><p>これまで特にプラグインを使っていなかった（それくらいで済む用途にしか使っていなかった）のだけど、カラースキームを指定したくなったのでプラグインマネージャを入れた。</p><p>どれども大差ないといろんな記事で言われていたので名前とかが気に入った<a href=https://github.com/folke/lazy.nvim>lazy</a>を使うことに。</p><p><a href=https://github.com/naoyafurudono/dotfiles/blob/add-lazy/nvim/init.lua#L17-L55>https://github.com/naoyafurudono/dotfiles/blob/add-lazy/nvim/init.lua#L17-L55</a> で設定している。</p></p></div><div class=post-footer><time>August 13, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-08-12/>2024-08-12</a></h2><div><p><p>vimの <code>sort</code> コマンドを知った。設定ファイル書くときとかの、気持ち並び替えておきたいところに使えて便利。</p><p>週末は帰省して、さらに親の実家に行き親戚に会ってきた。いとこの子供にジュースをたかられて甘やかす体験を初めてした。あんなに食べて大丈夫かと思うほどよく食べる。</p></p></div><div class=post-footer><time>August 12, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/ahk/>AHK入門</a></h2><div><p><p>Windowsマシンでキーボード操作が不便なので導入する。悪態をつきながらも使っている人を知っているので内容を理解していないが期待している。</p><h2><a href=#%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab id=インストール class=anchor aria-hidden=true>インストール</a></h2><p><a href=https://www.autohotkey.com/>https://www.autohotkey.com/</a> 公式ページからバイナリを落とせる。インストールするとwelcome画面が開いたのだが、そこに「コンパイルする」ボタンがあって、ちょっと不安になる。僕はプログラムをボタンを押してコンパイルしないといけない？</p><p>ついてきたマニュアルはいい感じのスタイリングでよみやすそう？</p><h2><a href=#%e3%83%9e%e3%83%8b%e3%83%a5%e3%82%a2%e3%83%ab%e3%82%92%e8%aa%ad%e3%82%93%e3%81%a7%e3%81%bf%e3%82%8b id=マニュアルを読んでみる class=anchor aria-hidden=true>マニュアルを読んでみる</a></h2><p>頭から飽きるまで読んでいく。</p><ul><li>スクリプトの作成 (Create a Script)<ul><li><blockquote><p>Be sure to save the file as UTF-8 with BOM if it will contain non-ASCII characters. For details, see the FAQ.</p></blockquote></li><li>BOMがいるらしい。そういえばBOMってなんなのだろう。結局まだちゃんと理解してない。</li></ul></li><li>スクリプトの実行 (Run a Script)<ul><li>なんかソースファイルをダブルクリックしたりして実行できて、実行してる間だけ効くらしい。</li><li>イベントハンドラみたいなやつの定義がそれぞれのスクリプトに対応するかと思っていたが、なんかメンタルモデルがあってなさそう</li></ul></li><li>それぞれのスクリプト実行がWindowsのトレイアイコンに反映されるらしい。なるほど</li></ul><p>飽きたのでhello worldする。</p><h2><a href=#hello-world id=hello-world class=anchor aria-hidden=true>hello world</a></h2><p>以下はCapsLockを押すとhello, worldと出力するよう設定するahkスクリプト。ちなみにこれらのhello, worldはCapsLockを打って入力している。</p><pre><code class=language-ahk>#Requires AutoHotkey &gt;=v2.0.0

CapsLock::
  {
    SendInput &quot;hello, world&quot;
  }
  Return
</code></pre><p>CapsLockで英数変換するのは以下で実現できた。</p><pre><code class=language-ahk>#Requires AutoHotkey &gt;=v2.0.0

CapsLock::
  {
    SendInput &quot;^{Space}&quot;
  }
  Return
</code></pre><p>紆余曲折あって、以下のようになった。Windowsでもいい感じにvim使えるようになって幸せ。</p><p><a href=https://github.com/naoyafurudono/dotfiles/blob/main/autohotkey.ahk>https://github.com/naoyafurudono/dotfiles/blob/main/autohotkey.ahk</a></p><pre><code class=language-ahk>#Requires AutoHotkey &gt;=v2.0.0

IME_SET(SetSts, WinTitle:=&quot;A&quot;)    {
    hwnd := WinExist(WinTitle)
    if  (WinActive(WinTitle))   {
        ptrSize := !A_PtrSize ? 4 : A_PtrSize
        cbSize := 4+4+(PtrSize*6)+16
        stGTI := Buffer(cbSize,0)
        NumPut(&quot;Uint&quot;, cbSize, stGTI.Ptr,0)   ;   DWORD   cbSize;
        hwnd := DllCall(&quot;GetGUIThreadInfo&quot;, &quot;Uint&quot;,0, &quot;Uint&quot;,stGTI.Ptr)
                 ? NumGet(stGTI.Ptr,8+PtrSize,&quot;Uint&quot;) : hwnd
    }
    return DllCall(&quot;SendMessage&quot;
          , &quot;UInt&quot;, DllCall(&quot;imm32\ImmGetDefaultIMEWnd&quot;, &quot;Uint&quot;,hwnd)
          , &quot;UInt&quot;, 0x0283  ;Message : WM_IME_CONTROL
          ,  &quot;Int&quot;, 0x006   ;wParam  : IMC_SETOPENSTATUS
          ,  &quot;Int&quot;, SetSts) ;lParam  : 0 or 1
}

IME_GET(WinTitle:=&quot;A&quot;)  {
    hwnd := WinExist(WinTitle)
    if  (WinActive(WinTitle))   {
        ptrSize := !A_PtrSize ? 4 : A_PtrSize
        cbSize := 4+4+(PtrSize*6)+16
        stGTI := Buffer(cbSize,0)
        NumPut(&quot;DWORD&quot;, cbSize, stGTI.Ptr,0)   ;   DWORD   cbSize;
        hwnd := DllCall(&quot;GetGUIThreadInfo&quot;, &quot;Uint&quot;,0, &quot;Uint&quot;, stGTI.Ptr)
                 ? NumGet(stGTI.Ptr,8+PtrSize,&quot;Uint&quot;) : hwnd
    }
    return DllCall(&quot;SendMessage&quot;
          , &quot;UInt&quot;, DllCall(&quot;imm32\ImmGetDefaultIMEWnd&quot;, &quot;Uint&quot;,hwnd)
          , &quot;UInt&quot;, 0x0283  ;Message : WM_IME_CONTROL
          ,  &quot;Int&quot;, 0x0005  ;wParam  : IMC_GETOPENSTATUS
          ,  &quot;Int&quot;, 0)      ;lParam  : 0
}

IME_TOGGLE() {
  current := IME_GET()
  IME_SET(!current)
}

IME_OFF() {
  IME_SET(0)
}

CapsLock::
  {
    IME_TOGGLE()
  }

~Esc::
  {
    IME_OFF()
  }
</code></pre></p></div><div class=post-footer><time>July 28, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-07-06/>2024-07-06</a></h2><div><p><h2><a href=#%e6%9c%ac%e6%a3%9a%e3%82%92%e4%bd%9c%e3%81%a3%e3%81%a6%e3%81%84%e3%82%8b id=本棚を作っている class=anchor aria-hidden=true>本棚を作っている</a></h2><p>先週くらいに調査をした上で今日材料と道具を買ってきて、加工のための準備をしている。誤差は出るものとして、それを許容できる加工方法を考えるのが楽しいしめんどい。</p><p>今日で材料調達までやった。近所にコーナンがあるのでそこで木材を買って、カットサービスで板を切り出してもらいつつ工具の貸し出しとバンを借りての運搬をした。コーナンの皆さんはプロフェッショナルな感じがして最高だった。どこからどこまでが責任範囲かを明確に意識してらしているし、彼らの範囲内であれば柔軟に対応してくれる。僕の範囲の話をふるとそれはあなたの決めの問題だと言ってくれて最高。それでいてドライな感じではなくてHRTな感じがしてすごい。今まですごいスーパーと見ていたのはもったいなかったなと思っている。コーナンの彼らは専門性と職責を理解して遂行するプロフェッショナルだと感じた。サービスカウンターの方と木材カットの対応をしてくれた方とお話ししたがみなさん本当にすごかった。</p><p>一度設計をしたのだがでかい板からの切り出しの寸法を計算したタイミングで捨ててしまったので設計を書き直す羽目になってしまった。とはいえそこはサクッと復旧できて、今はちまちま補助線を木材に引いている。飽きて試しにした穴を開けたりしているのだが、意外と良い工作精度が出ているので心配しすぎだったかもしれない。</p><h2><a href=#%e8%87%aa%e5%88%86%e3%82%88%e3%82%8a%e5%bc%b7%e3%81%84%e4%ba%ba%e3%81%a8%e3%81%ae%e4%bb%95%e4%ba%8b%e3%81%ae%e8%a9%b1 id=自分より強い人との仕事の話 class=anchor aria-hidden=true>自分より強い人との仕事の話</a></h2><p>ツイッタを徘徊していると一緒に仕事している強い人の悩みをうかがい知れて楽しい（ぼくが楽しむことを分かった上で知らせてくれているのだろう）。分かっていることではあるが、向こうも不安を抱えながら決断して僕たちに指針を示して進んでいるのだよなと確認をした。どこかで飲みに行きたい気持ちになった。大体納得の上で一緒に動いているが数くないぼくがいだているちょっとした不満（納得はしている）を共有したりしたいなと思っている。</p></p></div><div class=post-footer><time>July 6, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-06-25/>2024-06-25</a></h2><div><p><p>本棚を自作する。<a href=https://www.todaproduction.com/books/bkshelf/bkfrm.htm>清く正しい本棚の作り方</a>が参考になりそうなので通読する。</p><p>通読した。以下の手順かな。今度ホームセンター行こう。</p><ul><li>材料の検討をつける<ul><li>21mm以上の厚さでカット可能でそれなりのサイズの板が必要</li><li>パイン集製剤はよさそう</li></ul></li><li>設計する<ul><li>自分の本のサイズとその量を見積もるかな</li><li>僕の場合は専門書が3サイズ（A5?,A4?,教科書？）あるのと小説と漫画がある。それぞれのサイズを計り量を見積もる</li><li>その上で高さ180cmくらいかなのものを一旦設計して、入手できる材料のサイズを鑑みて調整する</li></ul></li><li>材料を調達する<ul><li>購入・裁断・運び入れが課題</li></ul></li><li>組み立て<ul><li>補助線の書き込みと穴あけ、ねじ止めとボンドでの固定がやること</li></ul></li><li>研磨<ul><li>エッジの処理とかはこのタイミングで一度やる</li></ul></li><li>塗装<ul><li>材料によるがニスとかでいいかな</li><li>蜜蝋とか油は本への影響がありそうでちょっと怖い</li></ul></li><li>乾かす<ul><li>塗料が乾くまで外で乾かす。天気が大切</li></ul></li><li>研磨<ul><li>最後にシュッとやれるとよさそう</li></ul></li></ul></p></div><div class=post-footer><time>June 25, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/rubykaigi2024/>RubyKaigi2024参加メモ</a></h2><div><p><p>RubyKaigi2024に参加したので、思ったことをメモしておきます。</p><p>参加したセッションはこちら: <a href=https://rubykaigi.smarthr.co.jp/2024/plans/d2350276-c631-4bdc-ad75-49e446e798a3>https://rubykaigi.smarthr.co.jp/2024/plans/d2350276-c631-4bdc-ad75-49e446e798a3</a></p><h2><a href=#shopify%e3%81%8c%e3%81%99%e3%81%94%e3%81%84 id=shopifyがすごい class=anchor aria-hidden=true>shopifyがすごい</a></h2><p>今回のセッションをいくつか聞いてShopifyのやり方に憧れるようになった。エンジニアリングをしていく上での姿勢として、課題に対して上流から対処しよう、みたいな箴言があってそれが心に残っている。
ShopifyのRuby周りのチームはまさにそれを地で行っていると今回のセッションを聞いて感じたそういうチームに所属して（作って？）良いエンジニアリングをしていきたいと思っていたのだが、これまでは具体的なイメージいを持っていなかった。</p><p>ShopifyのRubyチームによる貢献にはすでに自分が直接的に恩恵を受けているし、彼らがどういう思想で取り組んで具体的に何をしてきたか、これからどういう思想でやっていくかを生で聞くことができた。遠いけれども具体的に目標とする存在に出会えたことが今回の一番の収穫だったと思う。</p><h2><a href=#%e5%90%8d%e5%89%8d%e7%a9%ba%e9%96%93%e3%81%a8%e3%81%8b%e3%83%a2%e3%82%b8%e3%83%a5%e3%83%bc%e3%83%ab%e3%81%ae%e8%a9%b1%e9%a1%8c%e3%81%8c%e6%a5%bd%e3%81%97%e3%81%bf id=名前空間とかモジュールの話題が楽しみ class=anchor aria-hidden=true>名前空間とかモジュールの話題が楽しみ</a></h2><p>バージョンとかライブラリのインストールとか大変だしよく分からないのでスッキリする方向に進んでいきそうで楽しみ。セッションも普通に勉強になった。</p><h2><a href=#%e4%ba%ba%e3%81%a8%e4%bc%9a%e3%81%88%e3%81%a6%e3%82%88%e3%81%8b%e3%81%a3%e3%81%9f id=人と会えてよかった class=anchor aria-hidden=true>人と会えてよかった</a></h2><p>一方的に知っていた人もお互い初めましてな人もお話しできてよかった。今回存在を新たに認知した人ももちろんいて、いろんな人が色々やっていることとか、意外とコミッタ少ないこととか認知できて良い。
Rubyって人間が作ってるんだなと感じる。</p><p>現実味を感じる一週間でした。</p></p></div><div class=post-footer><time>May 18, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/multi-lang-on-hugo/>hugoで多言語対応始めた</a></h2><div><p><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io/commit/b4966a3e96c2a8131da6d623cef85df5c97439ba>https://github.com/naoyafurudono/naoyafurudono.github.io/commit/b4966a3e96c2a8131da6d623cef85df5c97439ba</a>
このコミットみたいな感じで設定したりファイル名を変えたりすると、いい感じにパスを掘ってくれる。</p><p>パスを掘ってくれる以外のメリットは知らない。</p></p></div><div class=post-footer><time>April 18, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/install-storybook-next/>Nextjsのプロジェクトにstorybookを導入してみた</a></h2><div><p><h2><a href=#%e3%82%84%e3%81%a3%e3%81%9f%e3%81%93%e3%81%a8 id=やったこと class=anchor aria-hidden=true>やったこと</a></h2><p><a href=https://github.com/naoyafurudono/timer/pull/1>https://github.com/naoyafurudono/timer/pull/1</a></p><p>このプルリクエストで頑張った。コミットメッセージにやったことは書いてある。</p><h2><a href=#%e5%8f%82%e8%80%83 id=参考 class=anchor aria-hidden=true>参考</a></h2><p>公式ドキュメントがしっかりしてそう。storybookが内部で使っているwebpackが<code>@</code> インポートを読めないみたいで、プラグインを入れる必要があった。</p><ul><li>storyの書き方: <a href=https://storybook.js.org/docs/writing-stories>https://storybook.js.org/docs/writing-stories</a></li><li>Next.jsへのインストール: <a href=https://storybook.js.org/docs/get-started/nextjs>https://storybook.js.org/docs/get-started/nextjs</a><ul><li>コマンド一発だった。便利。</li></ul></li><li><code>@</code> インポートが効かない問題の対処: <a href=https://qiita.com/sinnlosses/items/51e614570180c5f12e86>https://qiita.com/sinnlosses/items/51e614570180c5f12e86</a></li></ul></p></div><div class=post-footer><time>March 26, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-03-02/>2024-03-02</a></h2><div><p><p><code>op inject</code> が欲しいやつだった。テンプレートに1passのURLぽいやつを書いてコマンドに渡すと、そこを埋めたファイルを出力してくれる。埋め込むときに環境変数を読んで、URL内での参照を置換した上で1passのレコードを参照することもできる。</p><p><a href=https://developer.1password.com/docs/cli/secrets-config-files/>https://developer.1password.com/docs/cli/secrets-config-files/</a></p></p></div><div class=post-footer><time>March 2, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2024-02-17/>2024-02-17</a></h2><div><p><p>glangに<a href=https://github.com/golang/go/issues/61405>generatorを入れようというプロポーザル</a>があって、試験的に実装されているみたい。いくつかのパターンがあるけど、<a href="https://go.dev/play/p/93W3jTQjBk0?v=gotip">だいたいこんな感じで使える (The Go Playground)</a>。</p><p>ジェネレータとして使われる関数は定義の段階では普通の関数と区別がつかないような構文定義をされている。コンパイラやランタイムの実装が気になるし、静的解析ツールが大変なことにならないかが心配。</p><p>気が向いたらプロポーザルを読もう。ジェネレータが引数にとる関数がブールを返すけど、どちらを返すかを誰が決めているかも気になる。</p><p>第一印象ではgolangには入らないで欲しいなと感じた。</p></p></div><div class=post-footer><time>February 17, 2024</time></div></article><article><h2><a href=https://blog.nfurudono.com/book/ebpf-abc/>読書メモ - eBPF入門</a></h2><div><p><h2><a href=#%e5%8b%95%e6%a9%9f id=動機 class=anchor aria-hidden=true>動機</a></h2><ul><li>eBPF面白そうだったので。その目的とかユースケースを知りたかったり、周辺ツールがどういう具合に整備されて使われているかも知りたかった。</li></ul><h2><a href=#%e9%9d%a2%e7%99%bd%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88 id=面白ポイント class=anchor aria-hidden=true>面白ポイント</a></h2><ul><li>コンテナ横断で情報を取れるのはなるほどなって感じ</li><li>hello worldいつやろうか迷う<ul><li>limaでやるのはつらいのかなと想像しつつ手を動かしていない</li><li>帰省していてlinuxマシンが手元にない</li><li>本で紹介されている方法は本番ではお勧めできないとか今の所書いてあるし</li></ul></li></ul><h2><a href=#%e5%be%97%e3%81%9f%e7%9f%a5%e8%ad%98%e3%81%ae%e4%bd%bf%e3%81%84%e9%81%93 id=得た知識の使い道 class=anchor aria-hidden=true>得た知識の使い道</a></h2><ul><li>コンテナ環境をホストするなら監視で使えるかも。いかがわかっていない<ul><li>何を監視したいのか</li><li>何を監視できるのか</li></ul></li></ul><h2><a href=#%e7%96%91%e5%95%8f id=疑問 class=anchor aria-hidden=true>疑問</a></h2><ul><li>プログラムのサイズを制限しているのは何が目的なんだろう</li></ul></p></div><div class=post-footer><time>December 31, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-11-14/>2023-11-14</a></h2><div><p><p>このブログのデプロイに使っているgithub action workflowを読んでいたら、外部リポジトリにデプロイするのも簡単なことに気がついた。<a href=https://github.com/peaceiris/actions-gh-pages/tree/v3/#%EF%B8%8F-deploy-to-external-repository-external_repository>https://github.com/peaceiris/actions-gh-pages/tree/v3/#%EF%B8%8F-deploy-to-external-repository-external_repository</a></p><p>たとえばプライベートリポジトリでマークダウンを管理して、公開したいアセットだけを今のリポジトリに置く運用を実現できる。公開したくない文言はどこにも書かない運用にしているのだけど、限界はたまに感じるので移行しても良いかも。とはいえ情報はできるだけオープンにしたい信仰があるのも確かなので悩ましい。</p></p></div><div class=post-footer><time>November 14, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-10-24/>2023-10-24</a></h2><div><p><h2><a href=#hugo%e3%81%8c%e8%89%af%e3%81%8f%e3%81%aa%e3%81%a3%e3%81%a6%e5%ac%89%e3%81%97%e3%81%84 id=hugoが良くなって嬉しい class=anchor aria-hidden=true>hugoが良くなって嬉しい</a></h2><p>hugoでCJKの文章で改行を無視できるようになった。
platexとかでは当たり前のように単独の改行は日本語文中で無視されていたが、巷のmarkdownエンジンはそうとは限らない。
hugoがデフォルトで使うgoldmarkではオプションで指定できていたようだが、
hugoではそのオプションを活用しないでいたみたい。</p><p>v0.118.0に更新される際に、hugoの設定でサポートされるようになった<a href=https://github.com/gohugoio/hugo/releases/tag/v0.118.0>（リリースノート）</a>。とてもめでたい。</p><p>昔は改行しない人間だったのだけど、論文を書くときに教えてくれていた先生が綺麗に改行しているのを見てそれに倣うようになった。テキスト処理は人間の仕事ではなくて、ソースコードは読み書きしやすい形であることだけを気にするべきだと信じているので改行は自由に行いたい気持ちがある。</p><h2><a href=#textql%e3%81%ab%e3%82%b3%e3%83%b3%e3%83%88%e3%83%aa%e3%83%93%e3%83%a5%e3%83%bc%e3%83%88%e3%81%97%e3%81%9f id=textqlにコントリビュートした class=anchor aria-hidden=true>textqlにコントリビュートした</a></h2><p><a href=/daily/2023-09-19/>先月PRを書いた</a>やつが<a href=https://github.com/dinedal/textql/pull/141>シュッとマージされていた</a>。本当にそれでいいんか？という感じがするが、何はともあれコントリビュータになれたのは嬉しい。好きなツールに貢献できる喜び。</p><h2><a href=#%e3%83%a1%e3%83%a2 id=メモ class=anchor aria-hidden=true>メモ</a></h2><p>世の中にはいろんなソフトウェアやシステムがあって日常的にそれらを使っているわけだが、いざ何かを作りたいとなったときに何をするのが楽しそうかは悩んでしまう。何が面白そうかわからないのだ。普段使っているあれこれが100倍早くなったらどうなるかを想像して幸せになれそうならそれを実現するために頑張るのは便利な考え方かもしれないと思った。</p></p></div><div class=post-footer><time>October 24, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-10-09/>2023-10-09</a></h2><div><p><p>テキストを扱うツールをたくさん知れたことが情報系に進んで一番お得なことだったなと感じている。エディタ、git、その他CLIツールを日常的に使う環境に身をおけたことは幸運だったと思う。というか、これが幸運ではなく当たり前な世の中になって然るべきな気がしてきた。</p></p></div><div class=post-footer><time>October 9, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/generate-slides-from-template/>GASでスライド生成</a></h2><div><p><p>Google Slidesで作成したテンプレートファイルに文字列を置換する形でスライドを生成するスクリプトをChat GPTに書いてもらったのでメモ。</p><pre><code class=language-aa>+--------------------------------+
|                                |
|  {{氏名}}                      |
|                                |
|                                |
|     {{住所}}                   |
+--------------------------------+
</code></pre><p>みたいなスライドを作って、</p><pre><code class=language-csv>氏名,住所
佐藤太郎,日本のどこか
田中一郎,東京のどこか
</code></pre><p>みたいなスプレッドシートでスクリプトを実行すると以下のようなスライドをテンプレのあるスライドに追記する。</p><pre><code class=language-aa>+--------------------------------+
|                                |
|  佐藤太郎                      |
|                                |
|                                |
|     日本のどこか               |
+--------------------------------+

+--------------------------------+
|                                |
|  田中一郎                      |
|                                |
|                                |
|     東京のどこか               |
+--------------------------------+
</code></pre><p>スクリプトは以下。</p><pre><code class=language-gas>function createSlidesFromSheet() {
  var slideId = 'ここにスライドのIDを入れる'
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  var data = sheet.getDataRange().getValues();
  
  var slide = SlidesApp.openById(slideId);
  var templateSlide = slide.getSlides()[0]; // テンプレートとして使う最初のスライドを取得
  
  var headers = data[0]; // ヘッダー行を取得

  // データ行をループ
  for (var i = 1; i &lt; data.length; i++) {
    var row = data[i];
    var newSlide = slide.appendSlide(templateSlide); // テンプレートスライドをコピー
    
    var shapes = newSlide.getShapes();
    for (var j = 0; j &lt; shapes.length; j++) {
      var shape = shapes[j];
      var text = shape.getText().asString();
      
      // スプレッドシートのヘッダーを参照して、対応するデータでプレースホルダーを置き換える
      for (var k = 0; k &lt; headers.length; k++) {
        var placeholder = '{{' + headers[k] + '}}';
        text = text.replace(placeholder, row[k]);
      }
      
      shape.getText().setText(text);
    }
  }
}

</code></pre></p></div><div class=post-footer><time>October 1, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-09-21/>2023-09-21</a></h2><div><p><h2><a href=#%e3%82%b3%e3%83%9f%e3%83%83%e3%83%88%e3%83%8f%e3%83%83%e3%82%b7%e3%83%a5%e3%81%8b%e3%82%89pr%e3%82%92%e7%89%b9%e5%ae%9a%e3%81%99%e3%82%8b%e6%96%b9%e6%b3%95 id=コミットハッシュからprを特定する方法 class=anchor aria-hidden=true>コミットハッシュからPRを特定する方法</a></h2><p><code>gh</code> コマンドを使うとPRの番号とタイトルを取得できる。</p><pre><code class=language-sh>gh pr list --search &quot;&lt;SHA&gt;&quot; --state merged`
</code></pre><p><a href=https://cli.github.com/manual/gh_pr_list>https://cli.github.com/manual/gh_pr_list</a></p><p><code>"&lt;SHA>"</code> の部分は一般にクエリを指定できるそう。多分 <code>pr:open</code> みたいなやつ。逆にコミットハッシュを指定できることが驚き。</p></p></div><div class=post-footer><time>September 21, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/2023-09-bestbuy/>ベストバイ</a></h2><div><p><p>酔っていて興が乗ったので「しばらくの間で買って良かったもの」N選をやります！！</p><h2><a href=#%e6%9c%ac%e6%a3%9a id=本棚 class=anchor aria-hidden=true>本棚</a></h2><p>本棚を買いました！横に長いタイプの本棚で、高さは太ももくらいです。二段だけで、本棚の上にも物を置けるような感じ。幅は120cmくらい（ところでセンチって微妙ですよね）で、横に長めの本棚です。
2cmくらいの厚さのベニヤ？でできていて、それなりに丈夫そうな雰囲気があります。
minneで買いました。一階にプログラミング言語のほんを置いて、2階にそのほかの本を置いています。本棚にある本の中でのおすすめは、『数学の基礎 集合・数・位相』です。これを読むと実数の作り方がわかって感動できます。また、眠れない夜にぴったりで、楽しめるときには存分に興奮できるし、そうでもないときには眠くなります。ホテルに聖書の代わりにこれを置いたらいいのにと思ってます。</p><h2><a href=#%e3%83%91%e3%82%bd%e3%82%b3%e3%83%b3 id=パソコン class=anchor aria-hidden=true>パソコン</a></h2><p>M2 macbook airを買いました！これはいい物です。ノートパソコンのいいところは椅子に座らないでも使えるところです。仕事で疲れた体でも、ノートパソコンならさわれます。退勤後もキーボードを触る幸せを感じられるのはノートパソコンのおかげです。ところで酔った状態でキーボードを叩いていると、タイプミスが頻発します。タイピングに頭のリソースを使っているようです。
m2 macbook airはキーボードがいい感じだし、性能もいいのがいいところです。メモリは16GBにしています。細かいことはよくわからないので、考えないことにします。</p><p>キリがない気がするので個数制限を設けましょう。
N=5にします。あと3個。</p><h2><a href=#%e3%83%ab%e3%83%b3%e3%83%90 id=ルンバ class=anchor aria-hidden=true>ルンバ</a></h2><p>ルンバを買いました。ルンバのいいところは、掃除でstuckしている光景がちょっとかわいそうなところです。彼は頑張って掃除してくれるのですが、たまに段差に座礁して身動きが取れなくなります。その姿は少し傷ましくて、それを避けるための掃除をしないとなという気持ちにさせてくれます。一人暮らしの家に優しさを発揮する機会を与えてくれるのがルンバのいいところなんじゃないかと思います。こういうふうに書くと彼はポンコツみたいな表現になってしまいますが、彼は僕より掃除が上手いです。頼りにしてるよ。</p><h2><a href=#echo-dot id=echo-dot class=anchor aria-hidden=true>echo dot</a></h2><p>会社に入るよりかは前に、echo dotを買いました。
echo dot自体がもたらす利益よりも、そのインターフェイスがあることを前提とした環境構築への影響がノミネートの理由です。
echo dotのおかげでルンバやswitch botを導入できました。音楽も流せるしアラームも設定できる。</p><h2><a href=#%e3%83%aa%e3%83%a5%e3%83%83%e3%82%af%e3%82%b5%e3%83%83%e3%82%af id=リュックサック class=anchor aria-hidden=true>リュックサック</a></h2><p>5月の頭にリュックサックを買いました。新宿の駅の近くの百貨店で見つけて、ゴールデンウィークいっぱい悩んでから購入に至りました。出勤も旅行もオリエンテーリングの遠征も全てこのリュックと一緒です。ちょっと小さいけど必要十分な機能提供してくれている感じが好き。</p><h2><a href=#%e3%81%be%e3%81%a8%e3%82%81 id=まとめ class=anchor aria-hidden=true>まとめ</a></h2><p>いかがだったでしょうか？
この記事ではベスタバイ5選を紹介しました！
この記事が皆さんの参考になれば幸いです。よかったらチャンネル登録と高評価、よろしくお願いします。</p><pre><code>&lt;!-- エンディングテーマが流れる --&gt;
</code></pre></p></div><div class=post-footer><time>September 13, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-09-09/>2023-09-09</a></h2><div><p><h2><a href=#%e8%a8%ad%e5%ae%9a%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%afjson%e6%b4%be id=設定ファイルはjson派 class=anchor aria-hidden=true>設定ファイルはjson派</a></h2><p>tomlもyamlも難しいので、みんなjsonを書けばいいのにと思う。
Goとか静的型付け言語とかが流行って、読みやすさの意義が重要視されている時代なはずなのに、設定ファイルは書きやすさとか、見栄えの良さが重視されていそうなフォーマットが人気なのが解せない。
jsonがナウいんじゃないかと思うし、好みとしてもjsonがいいなと思う。</p><p>jsonは誤解することが一番少なそうだし、みんな何が嫌なんだろう。編集がちょっとたいへんとか？
そんなに設定ファイルを編集している時点で大変なことになっているのだから、それは妥当な大変さ何じゃないかと思うのだけど。</p></p></div><div class=post-footer><time>September 9, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/divide-dev-posts/>ブログを分割したい</a></h2><div><p><p>このブログは日記も開発っぽいことも両方書いてある。これらを別のサイトに分けようと考えている。</p><ul><li>開発の記事が日記に埋もれるのが嫌だから</li><li>今の環境だと開発の記事を書きにくい・表現しにくいから<ul><li>コードや数式を書きにくい・表示が微妙など</li><li>madoko使いたい</li></ul></li></ul><p>そのための準備としてnetlifyを試しに使ってみた。このブログのリポジトリを登録したら、特に細かい設定をしないでもシュッとデプロイできてしまった。すごい。DNSとかSSLとかの設定を試していく。</p><p>ところでデプロイの設定は何もわからないのでチュートリアルが必要。madoko使うなら設定ちゃんとしないとだろうし。</p></p></div><div class=post-footer><time>September 6, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-08-30/>2023-08-30</a></h2><div><p><h2><a href=#%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%81%ae%e5%ad%98%e5%9c%a8%e3%83%81%e3%82%a7%e3%83%83%e3%82%af id=コマンドの存在チェック class=anchor aria-hidden=true>コマンドの存在チェック</a></h2><p>dotfileを整備して、シェルの設定を複数のマシンで共有していると、あるコマンドがインストールされている場合にのみ、有効にしたい設定が出てくる。僕が今回遭遇したのは、k8sのcontextをプロンプトに表示する設定をなんとかしたいという欲求。いい感じに表示するコマンドが入っていれば、プロンプトに反映したいけど、入っていなければ別に表示しないのもありで、無理して全てのマシンにコマンドをインストールしたくはない。</p><p>コマンドの存在をチェックして、設定を条件分岐するのがナイーブな解決方法で僕もそうした。そこで気になるのが、コマンドの存在チェックのベストプラクティス。</p><p><code>command -v</code> が良さそうだった。<a href=https://qiita.com/kawaz/items/1b61ee2dd4d1acc7cc94>https://qiita.com/kawaz/items/1b61ee2dd4d1acc7cc94</a>
fishでもbashでも使える。</p><h2><a href=#%e5%a4%95%e9%a3%af%e3%81%ae%e3%83%a9%e3%82%a4%e3%83%95%e3%83%8f%e3%83%83%e3%82%af id=夕飯のライフハック class=anchor aria-hidden=true>夕飯のライフハック</a></h2><p>コーヒーとハンバーガーを食べたらいつもより夜に動けている。不健康は一時的な動作を促進するのかもしれない（本当か？）。</p><p>昼健康な食事を摂ったのでバランス。</p></p></div><div class=post-footer><time>August 30, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/dotfiles-setup/>dotfilesのセットアップスクリプトを書いた</a></h2><div><p><h2><a href=#%e5%8b%95%e6%a9%9f id=動機 class=anchor aria-hidden=true>動機</a></h2><p><a href=https://github.com/naoyafurudono/dotfiles/tree/main>dotfiles</a>をGitHubで管理しているのだが、今までは設定ファイルの管理だけで、インストールは手動で行なっていた。設定ファイルを使いまわせるだけでだいぶ便利なんだけど、コンテナ環境の中で作業したくなると、手動インストールに耐えられなくなる。そこで重い腰を上げてセットアップを自動化した。</p><h2><a href=#%e3%82%84%e3%81%a3%e3%81%9f%e3%81%93%e3%81%a8 id=やったこと class=anchor aria-hidden=true>やったこと</a></h2><h3><a href=#cli%e7%92%b0%e5%a2%83%e3%81%ae%e3%82%bb%e3%83%83%e3%83%88%e3%82%a2%e3%83%83%e3%83%97%e3%82%92%e7%b0%a1%e5%8d%98%e3%81%ab%e3%81%97%e3%81%9f id=cli環境のセットアップを簡単にした class=anchor aria-hidden=true>CLI環境のセットアップを簡単にした</a></h3><p><code>git</code> のインストールと以下の実行でok。
nvimとかfishとかcargoとかが入る。</p><pre><code class=language-sh>git clone https://github.com/naoyafurudono/dotfiles.git
bash dotfiles/setup.sh
</code></pre><h3><a href=#%e3%81%95%e3%82%89%e3%81%ab%e5%8b%95%e4%bd%9c%e7%a2%ba%e8%aa%8d%e3%81%ae%e3%81%9f%e3%82%81%e3%81%aedocker%e3%82%92%e7%94%a8%e3%81%84%e3%81%9f%e3%83%86%e3%82%b9%e3%83%88%e3%82%82%e6%9b%b8%e3%81%84%e3%81%9f id=さらに動作確認のためのdockerを用いたテストも書いた class=anchor aria-hidden=true>さらに動作確認のためのDockerを用いたテストも書いた</a></h3><p><a href=https://github.com/naoyafurudono/dotfiles/tree/main#test>test</a></p><p>arm環境かつubuntuだけでしか動かしていないが、dockerコンテナでセットアップスクリプトを動かして、正常に終了するかを確認するテストを書いた。</p><h2><a href=#%e6%b0%97%e3%81%ab%e3%81%aa%e3%82%8a%e3%81%94%e3%81%a8 id=気になりごと class=anchor aria-hidden=true>気になりごと</a></h2><p>この手のセットアップスクリプトのテストって、世の中ではどのようにテストしているんだろう。以下の難しさがテストを大変にしている気がする。</p><ul><li>環境依存な部分をうまく吸収する必要があること</li><li>インストール失敗の判定が難しいこと</li></ul></p></div><div class=post-footer><time>August 17, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-07-01/>2023-07-01</a></h2><div><p><h2><a href=#envsubst%e3%82%92%e7%9f%a5%e3%81%a3%e3%81%9f id=envsubstを知った class=anchor aria-hidden=true><code>envsubst</code>を知った</a></h2><p><code>envsubst</code>を使うと標準入力の環境変数の参照っぽいところに環境変数の値を埋め込んだテキストを吐ける。
readmeにコマンドのヘルプメッセージを載せたいときに便利。例: <a href=https://github.com/naoyafurudono/tools/tree/main/cl>https://github.com/naoyafurudono/tools/tree/main/cl</a></p><h2><a href=#git-ls-files id=git-ls-files class=anchor aria-hidden=true><code>git ls-files</code></a></h2><p>gitで管理しているファイルのパスが得られる。
git grepみたいに管理対象だけに興味があるときに便利そう。
fzfとの相性が良さげ。</p></p></div><div class=post-footer><time>July 1, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-06-30/>2023-06-30</a></h2><div><p><h2><a href=#gitigrnore%e3%81%ae%e5%8f%8d%e6%98%a0 id=gitigrnoreの反映 class=anchor aria-hidden=true>.gitigrnoreの反映</a></h2><p>すでにgit管理されているファイルをgitignoreでマッチするようにしても、管理から外れない。外すためには以下のようにすると良い。</p><pre><code class=language-sh>git rm -r --cached .
git add .
git commit -m 'update with .gitignore'
</code></pre></p></div><div class=post-footer><time>June 30, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-06-29/>2023-06-29</a></h2><div><p><h2><a href=#crateio%e3%83%87%e3%83%93%e3%83%a5%e3%83%bc id=crateioデビュー class=anchor aria-hidden=true>crate.ioデビュー</a></h2><p>crate.ioに初めてコードを登録した。<code>cargo install</code> で入るから便利。ちょっとしたCLIツール書く体験がなかなか良い。
copilotが面倒なことやってくれる。</p><h2><a href=#easy-cp%e3%82%92%e4%bd%9c%e3%81%a3%e3%81%9f id=easy-cpを作った class=anchor aria-hidden=true>easy-cpを作った</a></h2><p><a href=https://crates.io/crates/easy-cp><img src=https://img.shields.io/crates/v/easy-cp.svg alt=crates.io></a></p><p>Railsとか書いてると深いところに元からあるファイルをコピーしたいことがちょいちょいある。そのときに長いパスを2回打ちたくないので作った。</p></p></div><div class=post-footer><time>June 29, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-06-24/>2023-06-24</a></h2><div><p><p>macのタイムゾーンの設定が狂っていて、今日の投稿がこれと前回の二つに分かれてしまった。</p><p>今日はmacの設定と、以降に伴って壊れたちょっとしたCLIツールの修正した。昔Rustで雑に書いたもので、エラー処理が辛そうだったので少し勉強して改善した。
anyhowを使ってみたい気持ちが湧いたけど、まずは基本的なところからということでトレイトオブジェクトを使うことにした。<code>type Result&lt;T> = std::Result&lt;T, dyn Error></code>みたいな感じにすることで、いろんなエラーを孕んだresultに<code>?</code>を使うことができて幸せ。</p><p>一箇所ムムッとなったのが、クロージャの中で<code>?</code>を使う箇所。<code>dyn Error</code>の気持ちで書いていたら、推論器はもっと具体的な型を推論していたみたいで、二つ目のエラー型の式に対して<code>?</code>したら型エラーになってしまった。こういうときはアノテーションをつければ良い。
Rustの型推論の割り切り方に慣れていない。</p></p></div><div class=post-footer><time>June 24, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-06-23/>2023-06-23</a></h2><div><p><h2><a href=#%e7%92%b0%e5%a2%83%e6%a7%8b%e7%af%89 id=環境構築 class=anchor aria-hidden=true>環境構築</a></h2><p>macを買って環境構築をしているのでメモしていく。</p><ul><li>capslock -> eisu toggle<ul><li>システム環境設定 > キーボード > テキスト入力 > 入力ソース > Caps LockキーでABC入力モードに切り替える</li><li>最近のmacは組み込みの設定で変更できるようになった</li></ul></li><li>1Password<ul><li><a href=https://support.1password.com/secret-key/>最新のドキュメント</a>を参考にしてsecret keyを探し出す</li></ul></li><li>CLIツール: 以下の順で入れると良い。気が向いたらインストールスクリプトを書こう<ul><li>brew</li><li>fish</li><li>nvim</li><li>.config</li><li>その他</li></ul></li><li>gitでsshを使うための設定: この投稿のおまけを参考に<ul><li>鍵を生成</li><li>githubに公開鍵を登録</li><li>.ssh/configを書く</li></ul></li></ul><h3><a href=#%e3%81%8a%e3%81%be%e3%81%91 id=おまけ class=anchor aria-hidden=true>おまけ</a></h3><h4><a href=#ssh-keygen%e3%82%92%e4%be%bf%e5%88%a9%e3%81%ab id=ssh-keygenを便利に class=anchor aria-hidden=true>ssh-keygenを便利に</a></h4><p>個人メモ：<a href=https://github.com/naoyafurudono/dotfiles/blob/main/fish/functions/_ssh-keygen.fish>dotiflilesに書いてある</a>のでコピペは不要。</p><pre><code class=language-fish># for fish
function _ssh-keygen
  set name $argv[1]
  mkdir -p &quot;$HOME/.ssh/$name&quot;
  ssh-keygen -t ed25519 -f &quot;$HOME/.ssh/$name/id_ed25519&quot;
  chmod 600 &quot;$HOME/.ssh/$name/id_ed25519&quot;
end
</code></pre><pre><code class=language-bash>#!/bin/bash

name=$1
mkdir -p &quot;$HOME/.ssh/$name&quot;
ssh-keygen -t ed25519 -f &quot;$HOME/.ssh/$name/id_ed25519&quot;
chmod 600 &quot;$HOME/.ssh/$name/id_ed25519&quot;
</code></pre><h4><a href=#sshconfig%e3%81%ae%e4%be%8b id=sshconfigの例 class=anchor aria-hidden=true>.ssh/configの例</a></h4><pre><code class=language-config>Host github.com
  User git
  IdentityFile /Users/naoyafurudono/.ssh/github/id_ed25519
</code></pre><h3><a href=#%e3%81%be%e3%81%a8%e3%82%81 id=まとめ class=anchor aria-hidden=true>まとめ</a></h3><p>Terraformでローカル環境の管理とかできないだろうか？</p></p></div><div class=post-footer><time>June 23, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-06-17/>2023-06-17</a></h2><div><p><h2><a href=#%e3%83%ab%e3%83%b3%e3%83%90%e5%b0%8e%e5%85%a5 id=ルンバ導入 class=anchor aria-hidden=true>ルンバ導入</a></h2><p>ルンバをレンタルして今日から使い始めた。結構細かく動いてくれて僕より掃除がうまい気がする。
7時/19時で掃除するようにしたので、目覚まし代わりになるはずだし、寝る前と出勤前に床を片付ける習慣がつきそうで期待してる。</p><h2><a href=#%e6%97%a5%e4%b8%ad%e3%81%ae%e9%81%8b%e5%8b%95 id=日中の運動 class=anchor aria-hidden=true>日中の運動</a></h2><p>日中に運動するとその日の体力とやる気を使い果たして何もできなくなる。やはり夜に運動するのが性に合っていそうだ。</p></p></div><div class=post-footer><time>June 17, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-05-19/>2023-05-19</a></h2><div><p><p>明日は秋吉台に行く。楽しみ。新幹線を初めてスマホで買った。どうやらモバイルパスモで乗れるみたいなのでワクワクしてる。更に今日、仕事が終わってからJINS MEMEを買ったのでそのあたりでも楽しみが止まらない。</p><p>明日は早いのでさっさと準備して寝ないといけない。</p></p></div><div class=post-footer><time>May 19, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-05-13/>2023-05-13</a></h2><div><p><h2><a href=#%e4%bb%8a%e6%97%a5%e3%81%afrust%e3%82%92%e5%b0%91%e3%81%97%e5%8b%89%e5%bc%b7%e3%81%97%e3%81%a6%e3%81%84%e3%82%8b id=今日はrustを少し勉強している class=anchor aria-hidden=true>今日はRustを少し勉強している</a></h2><p>もともと<code>bash</code>で書いていたスクリプトを拡張したくなって、普段ならPythonで書くところを今日は新しいことをしてみようということでRustをつかってみることにした。</p><h3><a href=#%e8%8b%a6%e5%8a%b4%e8%a9%b1%e3%81%97 id=苦労話し class=anchor aria-hidden=true>苦労話し</a></h3><p>Rustはまったく初めてと言うわけではなくて、ちらちらドキュメントを読んだり、ノリで学校の課題をRustで書いてみたり（痛い目にあった）したことがある。所有権のあたりで苦労はあまりしなかった（というかPythonっぽくヒープを贅沢に使うコードを書いた）のだが、<code>Result</code> / <code>Option</code>の変換で発狂しかけた（メソッドが定義されていることに思いをはせられずに自作してしまった）。</p><p>あまり苦労しなかったと言いつつ、所有権のあたりで困りはしている。参照を受け取るコンストラクタに、その場で作ったオブジェクトを渡したいときに、一旦変数に束縛しないと、渡すオブジェクトが即死してしまっていけない問題が面倒。名前をつけるまでもない、式が体をを表しているような値にまで名前をつかないといけないのはしんどい。コンストラクタが所有権を奪うようにすればよいのだろうか。いらないから参照にしたのだよな&mldr;。</p><h3><a href=#%e3%81%a8%e3%81%af%e3%81%84%e3%81%88%e6%a5%bd%e3%81%97%e3%81%84 id=とはいえ楽しい class=anchor aria-hidden=true>とはいえ楽しい</a></h3><p>今ではそこそこなれてきて、代数的データ型とまともな型検査器がついたPythonくらいの書き方はできるようになった。
Rustのライブラリがイケイケに作られていて（エラー処理周りは辛いと感じるけど）、プログラムを書いていて楽しい。<a href=https://github.com/naoyafurudono/naoyafurudono.github.io/commit/5dffad6d10406fa83c4d9dd8eaa91a3c769a553f>すごく汚く書いてしまった</a>。当面の目標はまともにかけるようになることかな？ちょっとしたCLIでは大差ないのかもしれないけど。</p><p>ブログのGitHubのプログラミング言語構成比がカオスなことになってきた。</p><h2><a href=#%e8%83%83%e8%85%b8%e7%82%8e%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6 id=胃腸炎について class=anchor aria-hidden=true>胃腸炎について</a></h2><p>ここ何日か胃腸炎でつらい。今日はだいぶ回復して、Rustを勉強できるくらいになったけど、まだつらみを感じる。とはいえ三食たべても大丈夫な体に戻りはしたので問題なし。何日か会社に行けなかったのがなかなか悲しい。</p><p>今日は以前もらい忘れた診断書を書いていただいた。前回の診療に対して診断書を出してもらうことはなんだか難しそうで、もう一度診察していただくことになってしまった。自分の中では治ったと思っていたけど、見ていただいたらまだ治っていないとのことだったし、今はそう感じる（流されやすい性格なのか？）ので、忠告していただけてよかったと思うことにしている。</p><h2><a href=#%e9%a3%9f%e5%99%a8%e3%82%92%e8%b2%b7%e3%81%a3%e3%81%9f id=食器を買った class=anchor aria-hidden=true>食器を買った</a></h2><p>病院の帰り道で食器のフリマ的なことを日本料理屋さんがやっていた。普段使っている食器を入れ替えるのかなにかで、安く売り出してくださっていたようだ。胃腸炎になるまえに、会社のランチで「おいしそうな自炊の写真はくろっぽい器が大切」とのアドバイスを頂いていたことを覚えていたので、これは運命だと思い食器を購入した。黒っぽい器はどんぶりしか出会えなかったけど、それがなかなかいい感じだし、白っぽい器もいい感じのにいくつか巡り会えたのでほくほくしている。</p><p>あとはおいしそうなご飯をつくればよい。</p><h3><a href=#%e8%bf%bd%e8%a8%98 id=追記 class=anchor aria-hidden=true>追記</a></h3><p>夕飯につかってみた。いい感じ。味噌汁のお椀（蓋付き）が小さいやつで、フリーズドライの味噌汁一杯分しか入らないやつ（褒めてる）。感動している。</p><h2><a href=#%e3%82%ad%e3%83%ab%e3%83%a9%e3%82%ad%e3%83%ab%e3%81%8c%e3%81%8a%e3%82%82%e3%81%97%e3%82%8d%e3%81%84 id=キルラキルがおもしろい class=anchor aria-hidden=true>キルラキルがおもしろい</a></h2><p><a href=https://www.amazon.co.jp/%E3%82%AD%E3%83%AB%E3%83%A9%E3%82%AD%E3%83%AB/dp/B074BH9KHP>（アマプラ）</a>。グレンラガンの監督？が制作しているらしい。ノリが楽しい。</p></p></div><div class=post-footer><time>May 13, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-04-16/>2023-04-16</a></h2><div><p><h2><a href=#chatgpt%e3%81%a8%e3%81%ae%e6%88%af%e3%82%8c id=chatgptとの戯れ class=anchor aria-hidden=true>ChatGPTとの戯れ</a></h2><p>午前中はChatGPTとかであそんでいた。ブログを書いていたおかげで、AIに食わせる自分の書いた文書に困らないのが嬉しい。</p><p>文書から自分の人柄を表現してもらって、それをもとにSNSで使えるアイコンを生成しようとしたのだけどうまくいかない。人柄の表現はそれっぽいのができるのだけど、表現が抽象的になってしまうので、そのままアイコン画像を生成につかうと小学生のときによんだ漫画にでてきそうな怪しくて怖い宗教っぽい画像がでてきてしまう。</p><p>インターネット上でのキャラクタに合わせたアイコンを提案してもらえたら楽しくないだろうか？</p><p>ちなみに生成できた画像はこんな感じ。改善のしようはいくらでもありそう。</p><ul><li><a href="https://oaidalleapiprodscus.blob.core.windows.net/private/org-xQP57b3U1YCgKl3FkhN2XI41/user-mXCl5fkO3Gm1oJYHtAnd1z1w/img-am8DtfXkLwkb82PJLtboEYz4.png?st=2023-04-16T01%3A57%3A47Z&amp;se=2023-04-16T03%3A57%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-04-16T00%3A43%3A02Z&amp;ske=2023-04-17T00%3A43%3A02Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=k1Euf2aYTGl6%2BZbspqrNm19QbjWJOyBDPs7oIIktD/M%3D">なのはな</a></li><li><a href="https://oaidalleapiprodscus.blob.core.windows.net/private/org-xQP57b3U1YCgKl3FkhN2XI41/user-mXCl5fkO3Gm1oJYHtAnd1z1w/img-mkZrhNkERo7FVfLk1ZUywR4l.png?st=2023-04-16T01%3A57%3A47Z&amp;se=2023-04-16T03%3A57%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-04-16T00%3A43%3A02Z&amp;ske=2023-04-17T00%3A43%3A02Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=59/1pmbAT2IXIngoC8YCR6zVilcukdaR6HX1sk/7FMU%3D">怖い1</a></li><li><a href="https://oaidalleapiprodscus.blob.core.windows.net/private/org-xQP57b3U1YCgKl3FkhN2XI41/user-mXCl5fkO3Gm1oJYHtAnd1z1w/img-7RPKZb7ryg1362RTOtBoVHne.png?st=2023-04-16T01%3A57%3A47Z&amp;se=2023-04-16T03%3A57%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-04-16T00%3A43%3A02Z&amp;ske=2023-04-17T00%3A43%3A02Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=vDR0HyEykfekM245SzlfslloOf1yypcGYsr2tEO/R3c%3D">怖い2</a></li></ul><p>DALL-Eで生成したもので、<a href=https://openai.com/blog/dall-e-now-available-in-beta>権利の問題はなさそう (2023年4月16日閲覧)</a>:</p><blockquote><p>Starting today, users get full usage rights to commercialize the images they create with DALL·E, including the right to reprint, sell, and merchandise. This includes images they generated during the research preview.</p></blockquote><h2><a href=#%e9%9b%bb%e5%ad%90%e6%9b%b8%e7%b1%8d%e3%81%b8%e3%81%ae%e7%a7%bb%e8%a1%8c id=電子書籍への移行 class=anchor aria-hidden=true>電子書籍への移行</a></h2><p>本腰を入れて文書を読むときは印刷して読みたい。なので長いWebドキュメントを読むときは少し辛いし、論文を読むときは（本腰を入れて読むなら）印刷する。本はたいてい物理の書籍を買っていた。印刷するのが面倒だし、書き込みを残しやすいので。</p><p>ただ就職して出社するようになって、移動中に文書を読みたい機会が増えた。そんななかで本を持ち運ぶのは大変で、その日に読みうる範囲だけを持ち運びたくなった。そういう経緯でPDFみたいな印刷しやすい形式で購入できる場合は積極的に電子書籍を買うようになってきた。本のサイズが小さければこれまでと変わらず物理で買ってしまうのだが、面積が大きかったり鈍器の形をしているものは電子書籍を買う。</p><p>書き込みが残らなくなる問題は解決できていないが、書き込みたくなるほどまじめの読むことは少ないし、そこまで腰を吸えられるのは結局家の中のはずだ。今の生活ではそんなに困らないだろう。余談だが、EoPLを物理でもっていないのは数少ない書き込みが大切な機会を逸しているように思える。</p><h2><a href=#sns%e3%81%8c%e3%81%82%e3%81%be%e3%82%8a%e5%be%97%e6%84%8f%e3%81%a7%e3%81%aa%e3%81%84%e4%bb%b6 id=snsがあまり得意でない件 class=anchor aria-hidden=true>SNSがあまり得意でない件</a></h2><p>SNSで情報発信するのがあまり得意ではない。もともと会話があまり得意ではなくて、インスタントに情報を発するのが苦手なのだと思う。なにか考えてから言葉にするのにある程度時間がかかるし、言葉にしてから吟味したくなってしまいもする。</p><p>お酒が入ると吟味したい気持ちがどこかにいってしまうからしゃべる量が増えるのだろう。</p><p>話を戻そう。SNSは思ったことをパッと書いてそのまま発信することを重視したようなUIをしているように思う。たぶんそういうところで苦手意識を持っている。とはいえ情報発信の場としてSNSがメジャーなのは間違いないだろうし、ここみたいなブログはほとんどの人にみられないだろう。ブログを更新したときにSNSにリンクを投稿すると良い気もするが、それはそれでSNSの苦手な部分がブログ投稿に侵食してきそうで嫌な感じもする。悩ましい。</p></p></div><div class=post-footer><time>April 16, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-03-31/>2023-03-31</a></h2><div><p><p>東大の田浦先生が公開されている<a href=https://doss.eidos.ic.i.u-tokyo.ac.jp/>大規模ソフトウェアを探る</a>がとてもよかった。
GDBを使って大きなソフトウェアの振る舞いを理解する方法を学べる。
2年ほど前に、こういう資料が喉から手が出るほどほしいと感じていた記憶がある。</p><p>今日はこのあと研究のことを少し考え、後輩とお酒を飲む。どちらも楽しみだ。</p><p>午前中には入社や書類を仕事をした。
Macのターミナルが重い。今まで使っていた研究室のでも重かったし、新しく使い始めたものでも重い。原因を調査中。アプリを起動するのも重いし、コマンド実行が終了してプロンプトが返るまでのレイテンシもある。</p></p></div><div class=post-footer><time>March 31, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/notify-github-actions/>GitHub Actionsの実行結果をDiscordに通知</a></h2><div><p><p>このブログはGitHub Actionsでデプロイしているのだが、ここしばらくデプロイに失敗したことに気が付かずに放置してしまっていた。</p><p><a href=https://github.com/marketplace/actions/actions-status-discord>Actions Status Discord</a>というアクションを<a href=https://github.com/naoyafurudono/naoyafurudono.github.io/commit/1f7a900b4c8aa166dd735c61ee1667119b23e810>デプロイの最後に叩く</a>ことで、いい感じの通知をDiscordにWebhook経由で送れる。</p><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io/blob/3943f0fbf808d0ec880b3e7b9c901d0909eb35bd/.github/workflows/gh-pages.yml#L44>こんな感じに</a>実行条件を指定しないと、デプロイが失敗したときに通知が実行されないことに注意。デフォルトでは <code>if ${{ success() }}</code> が指定されたものとみなされるとのこと。</p></p></div><div class=post-footer><time>March 30, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/custom-markdown-translation-with-hugo/>Hugoのマークダウン処理をカスタム</a></h2><div><p><h2><a href=#%e8%83%8c%e6%99%af id=背景 class=anchor aria-hidden=true>背景</a></h2><p>HTML文書のheading要素の周りには<code>id</code>がついていてほしいし、それへのリンクは手軽にコピーできて欲しい。その点Googleのドキュメントはとても好き。人に文書コンテンツを渡すときにこちらの意図がURLで表現できるし、そのリンクを踏んだ側も見るべき箇所にスムーズにたどり着ける。このブログを書くのに使っているHugoでも同じことをした。</p><h2><a href=#%e3%82%84%e3%82%8b%e3%81%93%e3%81%a8 id=やること class=anchor aria-hidden=true>やること</a></h2><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io/commit/3f28cbafd119216c194b82d1fded6b373e7a7332>このコミット</a>のように、<a href=https://gohugo.io/templates/render-hooks/#heading-link-example>headingのHTMLへの変換を定義する</a>。</p><p>示したコミットでは<code>a</code>タグで囲むだけでなく、heading levelを増やしている。
Hugoではタイトルを<code>h1</code>にするにもかかわらず、マークダウンの<code>#</code>も<code>h1</code>にする。そのせいで、本文を書くときは<code>##</code>から始める必要があって気持ち悪い。この気持ち悪さを解消するために、マークダウンのheading level+1をhtmlのheading levelとしている。</p></p></div><div class=post-footer><time>March 30, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/window-manager/>使い勝手の良いデスクトップ向けウィンドウマネージャが欲しい</a></h2><div><p><p>使い勝手のよいウィンドウマネージャがWindowsとかMacに搭載されることはないだろう。使うアプリケーションやブラウザ、入力デバイスやその使い方によって使い勝手が大きく変わるだろうから。
OSが決め打ちで提供できるものでは無いんじゃないかと思う。なので自分でまじめに使い勝手の良いものを考える必要がある。</p><p>先日オリエンテーリングのインカレの配信のお手伝いをしたのだが、そこで使っていたスイッチャがなかなかデスクトップでのウィンドウマネージャの機能として魅力的に感じた。</p><p>スイッチャにはいろんなウィンドウ（カメラからの入力や、図、合成用のテロップなど）が接続されていて、すべてが画面の下部に控えめに表示される。それらを見ながらスイッチャのオペレータが放送するためのウィンドウを選択、合成する。放送されるウィンドウは画面上部に大きく表示される。放送されるウィンドウの右に同じサイズでプレビューウィンドウも表示される。これらの違いは放送されるか否かだけで、合成のテストとかに使える。</p><p>これを実現するためには操作用のデバイス（このデバイスをスイッチャというようだ）と、大きなモニタが必要だ。</p><p>デスクトップのウィンドウマネージャでもスイッチャのように</p><ul><li>すべてのウィンドウを表示しておいて</li><li>本番+alphaくらいのウィンドウをメインエリアに表示する</li></ul><p>と便利な気がする。単純にはいかないだろうけど、いい線行きそうだ。</p><p>懸念事項は以下の通り:</p><ul><li>ウィンドウの個数が多くなりそう</li><li>ウィンドウサイズが固定ではない（アスペクト比）</li><li>ウィンドウの動的な生成とその配置方法が非自明</li></ul></p></div><div class=post-footer><time>March 16, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/effect-handlers-without-continuation/>エフェクトハンドラの良さと実用性について</a></h2><div><p><p>エフェクトハンドラで継続や代数的エフェクトを扱う必要性は一ミリもなくて、実用的にそれらが欲しくなることはないか、あるいは限られていてそこまで一般的な機能を提供する必要はないんじゃないかと感じている。</p><p>このあたりを議論するために</p><ol><li>エフェクトハンドラの嬉しさ</li><li>意味論の歴史的経緯</li><li>改善ポイント</li></ol><p>を考える。</p><p>なお、この記事はとくに裏付けもなく書いている。気が向いたら裏付けをしようと思っているが、この記事の目的は僕の考えの整理であって、世に主張をしたいわけではない。</p><p>記事の内容は不正確なことを留意されたい。</p><h2><a href=#%e3%82%a8%e3%83%95%e3%82%a7%e3%82%af%e3%83%88%e3%83%8f%e3%83%b3%e3%83%89%e3%83%a9%e3%81%ae%e5%ac%89%e3%81%97%e3%81%95 id=エフェクトハンドラの嬉しさ class=anchor aria-hidden=true>エフェクトハンドラの嬉しさ</a></h2><p>エフェクトハンドラが実際的 (practical) なプログラミング言語でエンドユーザに使わせたくなるのは</p><ul><li>エフェクトシステムと相性のよい意味論</li><li>動的束縛</li></ul><p>を提供したいからではないだろうか。エフェクトハンドラを言語に入れれば、それで表現できる操作は自動的にエフェクトシステムで追跡できるし、ハンドラを用いることでエフェクトをローカルに使えるのは特筆するべきだろう。汎用性とlocal reasoningのしやすさはエフェクトハンドラのもつ良い性質だと思う。</p><p>エフェクトハンドラで実現できる動的束縛はとても使い勝手が良い上に、エフェクトシステムで追跡することで使い勝手が上がりそうだ。動的束縛のためだけのエフェクトシステムではなく、もう少し凝ったことができるエフェクトシステムがつくとなお幸せだろうから、エフェクトハンドラみたいな抽象度の比較的高いフレームワークで実現するのは幸せなんじゃないかと感じる。</p><h2><a href=#%e6%84%8f%e5%91%b3%e8%ab%96%e3%81%ae%e6%ad%b4%e5%8f%b2%e7%9a%84%e7%b5%8c%e7%b7%af id=意味論の歴史的経緯 class=anchor aria-hidden=true>意味論の歴史的経緯</a></h2><p>エフェクトハンドラと呼ばずに &ldquo;algebraic effects&rdquo; とか &ldquo;algebraic effects and handlers&rdquo;
とか呼ぶ流派、時代がある。歴史的には</p><ul><li>algebraic effects</li><li>algebraic effects and handlers</li><li>effect handlers</li></ul><p>みたいな流れで登場したはずだ。最初はハンドラはなくて、モナドとかの話をするような人たちが副作用にモナドではない別の表現を与えようとしたんだったか。ここでいうモナドはモナド則とかを真面目に考えるような数学のモナド。代数的エフェクトもその流れの中に（このころは）あったはず。そもそも代数的エフェクトの代数とは、操作が（0だか1こ以上）あって、それらに等式制約を課す。それを満たすようなモデルを持つのが代数 (algebra) である、みたいな世界だっと思う。群とか環は代数だけど、体は代数じゃないみたいな話を聞いたことがある。そういうのりの代数として、エフェクトを表現したらモナドの合成みたいなことを考えるときに幸せだ、という主張がことの発端だった気がする。</p><p>ここまでは数学とかモデル理論？とかの話によっていて、あまりプログラミング言語っぽい雰囲気がしない。ハンドラとか継続が入ってきた経緯はしらないが、多分、プログラミング言語に代数的エフェクトを入れるにあたって、モナドのbindやreturnみたいなものを定義するように、エフェクトに意味を与える仕組みとしてハンドラが考えられたんじゃないかと思う。このあたりは論文をまじめに読めば分かるはず。これが確か2014年くらいのこと。</p><p>2000年くらいだったかから考えられていたエフェクトシステムとの相性に目をつけたからか知らないが、「代数的エフェクトとハンドラ」を取り入れた言語が2014年ころに登場し始める。2017年くらいにでてくる印象がある。
EffやKokaはこのへんな気がする。このあたりで、エフェクトが代数的であることはとくに気にされなくなっていき、エフェクトシステムと例外ハンドラがうまいこと組み合わさる限定継続演算子くらいの気持ちで代数的エフェクトとそのハンドラが捉えられて、やがて代数的ではないことが気になる人々がエフェクトハンドラと呼ぶようになったのではないかと思っている。</p><h2><a href=#%e6%94%b9%e5%96%84%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88 id=改善ポイント class=anchor aria-hidden=true>改善ポイント</a></h2><p>限定継続は本当に必要だろうか。もっとやさしい概念を提供するのにとどめるのはいかがだろうか。ワンショット継続とかに限定する言語もあるが、それは正しい方向性だろうか。</p><p>僕たちがほしかったものは、local reasoningしやすいエフェクトシステムとそれで健全に管理できる意味論なんじゃないかと思う。エフェクトハンドラはその条件を満たすけど、もっと使い心地のよい意味論があるはずだと思う。</p><h2><a href=#%e3%81%82%e3%81%a8%e3%81%8c%e3%81%8d id=あとがき class=anchor aria-hidden=true>あとがき</a></h2><p>最後の文をメモしたくてこの記事を書いた。それ以外は文脈である。</p></p></div><div class=post-footer><time>March 16, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/gcp-cred/>Google Cloudの認証を必要とするアプリケーション開発について</a></h2><div><p><p>Google Cloudの認証・認可はきめ細かくちゃんとしている感じがして、扱うのが難しいと感じていた。少し調べたら<a href=https://cloud.google.com/docs/authentication/client-libraries#adc>Application Default Credentials with client libraries</a>の説明を見つけて腹に落ちた。これを抑えた上で、<a href=https://cloud.google.com/docs/authentication/provide-credentials-adc#how_to_provide_credentials_to_adc>それぞれの実行環境でどのようにcredentialをセットアップするか</a>を見ると、プロセスの権限が半分くらいわかる。ここまでで、サービスアカウントがどのようにプロセスに付与されるかを理解できるはずだ。</p><p>次に、それぞれのサービスアカウントがどのようなリソースへのアクセスをもつか、それをどうやって設定するかを確認すれば認証・認可を自由に管理できるんじゃないかと思う。<a href=https://cloud.google.com/docs/authentication/application-default-credentials#personal>How Application Default Credentials works</a>が良い水先案内に見える。</p><p>このあたりは知識がないと本当に挙動がわけわからないので分かりやすいところにドキュメントを置いといたり、積極的にエラーメッセージで教えてほしい。
Google Cloudを使う上での義務教育だと感じた。</p></p></div><div class=post-footer><time>March 14, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/linux-keys/>Linux (gnome) でよくやる設定</a></h2><div><p><p>GNOMEというかLinuxというかでよくやる設定を列挙する。キーボード系が多いと思う。</p><h3><a href=#gnome-terminal-%e3%81%a7ctrl-shift-tab%e3%82%92%e6%9c%89%e5%8a%b9%e3%81%ab%e3%81%99%e3%82%8b id=gnome-terminal-でctrl-shift-tabを有効にする class=anchor aria-hidden=true>gnome-terminal で<code>ctrl-(shift-)?tab</code>を有効にする</a></h3><p>以下を実行</p><pre><code class=language-sh>gsettings set org.gnome.Terminal.Legacy.Keybindings:/org/gnome/terminal/legacy/keybindings/ next-tab '&lt;Primary&gt;Tab'
gsettings set org.gnome.Terminal.Legacy.Keybindings:/org/gnome/terminal/legacy/keybindings/ prev-tab '&lt;Primary&gt;&lt;Shift&gt;Tab'
</code></pre><p>参考: <a href=https://askubuntu.com/questions/133384/keyboard-shortcut-gnome-terminal-ctrl-tab-and-ctrl-shift-tab-in-12-04>https://askubuntu.com/questions/133384/keyboard-shortcut-gnome-terminal-ctrl-tab-and-ctrl-shift-tab-in-12-04</a></p><h3><a href=#capslock%e3%81%a7%e8%8b%b1%e6%95%b0%e5%a4%89%e6%8f%9b id=capslockで英数変換 class=anchor aria-hidden=true><code>capslock</code>で英数変換</a></h3><p><a href=https://github.com/k0kubun/xremap><code>xremap</code></a>や<a href=https://github.com/mooz/xkeysnail><code>xkeysnail</code></a>を使うどちらもそんなに使い心地は変わらないと思う。今は<code>xkeysnail</code>を使っている。</p><h3><a href=#xkeysnail%e3%82%92systemd%e3%81%ab%e8%b5%b7%e5%8b%95%e3%81%97%e3%81%a6%e3%82%82%e3%82%89%e3%81%86 id=xkeysnailをsystemdに起動してもらう class=anchor aria-hidden=true><code>xkeysnail</code>をsystemdに起動してもらう</a></h3><p>課題が2つある:</p><ul><li><code>xkeysnail</code>が<code>uinput</code>を必要とすること<ul><li><code>sudo</code>が必要とreadmeに書かれているのはこれが理由</li></ul></li><li><code>xkeysnail</code>をsystemdに登録すること<ul><li><code>sudo</code>つけられない/等価なことはできない？</li></ul></li></ul><p>以下のように解決する</p><ol><li>必要な権限を自分に与える<ol><li>sudoなしで<code>xkesynail</code>を実行できるようになる</li></ol></li><li>systemdに登録して、ログインくらいのタイミングで有効にする</li></ol><h4><a href=#%e6%a8%a9%e9%99%90%e3%82%92%e4%b8%8e%e3%81%88%e3%82%8b id=権限を与える class=anchor aria-hidden=true>権限を与える</a></h4><p>これの通りにやればよい: <a href=https://github.com/mooz/xkeysnail/issues/64#issuecomment-600380800>https://github.com/mooz/xkeysnail/issues/64#issuecomment-600380800</a></p><h4><a href=#systemd%e3%81%ab%e7%99%bb%e9%8c%b2%e3%81%99%e3%82%8b id=systemdに登録する class=anchor aria-hidden=true>systemdに登録する</a></h4><ol><li>設定ファイルを書く <a href=https://github.com/naoyafurudono/configs/blob/main/systemd/user/xkeysnail.service>https://github.com/naoyafurudono/configs/blob/main/systemd/user/xkeysnail.service</a></li><li><code>~/.config/systemd/user/</code>におく<ol><li>バイナリをおく: 上の例では<code>~/.local/bin</code>においてあることを想定している</li></ol></li><li>systemdに登録する: <code>systemctl --user enable --now xkeynail</code><ol><li><code>enable</code>で登録、<code>--now</code>で今実行</li></ol></li></ol><p>もしうごかなかったら<code>jounalctl -r</code>でsystemdのログをみる。</p><h3><a href=#%e8%b5%b7%e5%8b%95%e6%99%82%e3%81%abmozc%e3%81%ae%e6%97%a5%e6%9c%ac%e8%aa%9e%e5%85%a5%e5%8a%9b%e3%82%92%e6%9c%89%e5%8a%b9%e3%81%ab%e3%81%99%e3%82%8b id=起動時にmozcの日本語入力を有効にする class=anchor aria-hidden=true>起動時に<code>mozc</code>の日本語入力を有効にする</a></h3><p><a href=https://github.com/naoyafurudono/configs/blob/main/mozc/ibus_config.textproto>https://github.com/naoyafurudono/configs/blob/main/mozc/ibus_config.textproto</a>を<code>~/.config/mozc/</code>におく。</p><p>参考: <a href=https://blog.nfurudono.com/posts/mozc-default-engine/>https://blog.nfurudono.com/posts/mozc-default-engine/</a></p></p></div><div class=post-footer><time>February 28, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2023-02-27/>2023-02-27</a></h2><div><p><p>Gentooが入った。基本的に待っているだけではあるのだけど、それがなかなか大変。パッケージを一瞬でインストールできる幸せに気がついた。割とすぐにUbuntuに戻るかもしれない。今はnodejsとtexliveをコンパイルしている。未だかつてなくCPUが仕事をしている。かわいそうに。とはいえportageに触れるのはなかなか楽しい。</p><p>mozcの設定はこのブログのメモに助けられた。過去の自分に感謝。</p><p>(追伸) Gentooを入れるためにssdを付け替えたのだけど、そのときにじゃまで外したCPUクーラーがうまくはまっていなかった。このPCはまともな冷却なしでもろもろをビルドしていたのだ。本当にかわいそうなことをしてしまった。ずっとうるさかったのでさっさと気がつくべきだった。今はこれまでがうそのように静か。</p></p></div><div class=post-footer><time>February 27, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/print-docs/>軽いドキュメントを印刷するためのツールが欲しい</a></h2><div><p><p>さくっと書いた文書を印刷したいことがある。ビジネスライクな手紙とか、その日のTODOリストなんかがそうだ。
LaTeXやMadokoを使うのは大げさな感じがして、諦めて手書きするか、Google Docsで済ませることが多い。とはいえ手紙の書き方を毎回調べたり、フォーマットを調整したり、PCで打ち込んだデータを手書きするのはつらい。</p><p>テンプレートと変数の宣言、UIの調整と文書のまともな処理をして印刷（A4）できるものが欲しい。A4のPDFに変換できればよい。それぞれの文書のソースはマークダウンのちょっとした拡張くらいの文法で書きたい。エディタで編集したいのでGoogle Docsとかはなしで。テンプレートの作成方法はテキストにこだわらない。いじりやすいと嬉しい。</p><p>問題が以下のように分割できるはず。</p><ul><li>テンプレート作成</li><li>ソースの文法<ul><li>Markdown拡張</li></ul></li><li>テンプレートへのソースの埋め込み</li><li>PDFへの変換</li></ul><p>HTML/CSSやlatexを勉強してMadokoでくっつければなんとかできる気はするが、大変そうだしあまり楽しくない。文書作成ツールを自作するか？とりあえず、HTML/CSSで手紙を表現できるようになるところから始めるのが良さそうか。自作マークダウン拡張（というより処理系）はまれに欲しくなるのでやっても良いだろう。Hugoもそんなに快適じゃないし、Madokoはいじりにくいので。</p><ul><li>自分でコードをいじりやすいこと</li><li>メタな文書処理がしやすいこと<ul><li>識別子や文書の変数への束縛、正規表現やCFGベースのテキスト置換など</li><li>この辺はMadokoが強い</li></ul></li><li>そういえばMadokoはPDFの生成でHTMLを使わずにlatexを使っていたな&mldr;</li></ul><p>ここまで来て、<a href=https://github.com/cognitom/paper-css>Paper CSS</a>という良さげなリポジトリを見つけた。
Qitaでこのライブラリを使って<a href=https://qiita.com/cognitom/items/d39d5f19054c8c8fd592>帳票を作る例が解説されている</a>。</p><p>まだそれぞれをあまり読んでいないのであとで確認する。このあたりの技術に合うように出力することにして、それを生成するマークダウンエンジンを用意すればok?</p><p>やはりしんどい気がする。GUIでなんとかする方法を探すのが楽だろうか。あらためて考えよう。</p><h3><a href=#%e8%bf%bd%e8%a8%98-google-docs-api id=追記-google-docs-api class=anchor aria-hidden=true>追記: Google Docs API</a></h3><p><a href="https://developers.google.com/docs/api/reference/rest?hl=ja">Google Docs API</a>を利用するのはどうだろうか。
APIはあまりリッチではなくて、create, update, pullができるのみ。文書構造の編集はJSONをごりごりいじることで実現する。<a href="https://developers.google.com/docs/api/reference/rest/v1/documents?hl=ja">JSONスキーマが定義されている</a>ので、これを見ながら必要な変換を定義すればよい。</p><p>テンプレートをGoogle DocsのGUIで作成して、それをAPIでpullした上で、コンテンツを注入したドキュメントをcreateすれば、やりたかったことを実現できそうだ。テンプレートの置き換え箇所の指定方法はどうするのが良いだろうか。</p><p><code>(開始記号)名前(引数リスト)(終了記号)</code>を文書に埋め込む。これがひとかたまりの文書オブジェクトとして認識されることが必要。また、これにスタイリングを適用した場合、埋め込み後もそのスタイリングが保たれるようにする。引数に他の名前が出現しうることに注意する</p><p>テンプレに埋め込むテキストを定義する側では、埋め込み内容の定義リストを作成する:</p><pre><code class=language-python>def name(args: list[str]) -&gt; str:
  return f&quot;&quot;&quot;\
ここに置換後の文字列を書く。
ここにも埋め込みの出現を許す。
&quot;&quot;&quot;
</code></pre><p>埋め込み処理では、JSON形式のテンプレのすべてのテキストについてマクロ展開をすればよい。</p><h3><a href=#%e8%bf%bd%e8%a8%98-web%e6%8a%80%e8%a1%93%e3%81%a7%e6%9c%ac%e3%81%8c%e4%bd%9c%e3%82%8c%e3%82%8b- id=追記-web技術で本が作れる- class=anchor aria-hidden=true>追記: Web技術で「本」が作れる &mldr;</a></h3><p>リブロワークスからCSSで組版するノウハウをまとめた本が<a href="https://libroworks.co.jp/?p=6956">5/12に出るらしい</a>。途中までを<a href="https://libroworks.co.jp/csskumihan/viewer/#src=/csskumihan/0_frontmatter.html&amp;f=epubcfi%28/4!%29">オフィシャルが公開している</a>。
Vivliostyleというソフトを使って、MarkdownとCSSで書籍を作るらしい。その手のソフトは他にもあるようで、<a href=https://print-css.rocks/lessons>比較サイト</a>を先の書籍で紹介されていた。</p><p>こう思うとmadokoはだいぶ良いものだなと感じる。適用範囲を限定した置換とlatexはなかなか強い。
latexとcssを完全に理解すればmadokoが最高かもしれない。</p></p></div><div class=post-footer><time>February 24, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/my-pc/>PCの構成メモ</a></h2><div><p><p>PCを自作して使っているのだけど、どんなパーツを使ったか忘れて後でなにか買い足すときに互換性があるかわからなくてこまる。今回調査してメモしておく。</p><ul><li>CPU: Core i5 12400</li><li>マザーボード: GIGABYTE B660M DS3H AX DDR4 [Rev.1.x]</li><li>RAM: <a href=https://amzn.to/3ZdyVLF>DDR4-3200 (2933・2666対応) (PC4-25600) W4U3200CM-8GR</a></li><li>SSD: WDS500G3X0E<ul><li>M.2 NVMe 内蔵SSD / 500GB / PCIe Gen4x4 / WD BLACK SN770 NVMe SSDシリーズ</li></ul></li><li>ケース: <a href=https://amzn.to/3ZxnLlp>Thermaltake Versa H17 ミニタワー型PCケース CS7096 CA-1J1-00S1NN-00</a></li><li>電源: <a href=https://amzn.to/3Z0HhXp>XPG PYLON パイロン 450W PC電源ユニット [ 80PLUS Bronze認証取得 ] PYLON450B-BKCJP</a></li></ul><p>Ubuntuを入れて使っているけど特に不満はない。不満はないのだが、この間Gentooのことを教えてもらって面白そうなので使ってみようと思っている。</p><p>余談だが、このPCは親に就活で必要だろうからといって渡してもらったお金で組んだのだった。自由に使えと言ってもらったが、きっとスーツとかを想定していたのだろう。幸いなことにスーツは買わずに済んでいるので（兄のお下がりがまだ着れる）、ずっと気になっていた自作PCに手を出すのに使ったのだった。少し後ろめたい気持ちがないでもなかったが、Linuxとか触るの楽しいことが分かって仕事でもこの手のものを触りたいと思えたし、面接の話のネタにもなったので結果オーライだろう。学校とか本で学ぶOS周りの技術をそのまま試せるのが僕には嬉しかったのだろう。Windowsでは厳しいし、Macもどこか違っているので。</p></p></div><div class=post-footer><time>February 23, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/posts/tips-for-tagging/>HugoでタグをつけるためのTips</a></h2><div><p><p>車輪の再発明ではあるだろうけどメモしておく。<code>archetypes/</code>に<code>hugo new</code>で生成する<code>.md</code>ファイルのテンプレを置くことができる。そこにありうるすべてのタグを書いておけば、記事を書くときに関係ないタグを消すことで、関連するタグを忘れずにつけることができる。</p><p>僕は以下のようにフロントマターを設定している。</p><pre><code>---
title: &quot;TODO&quot;
date: {{ .Date }}
author: &quot;Naoya Furudono&quot;
draft: true
tags: [
    &quot;daily&quot;
    ,&quot;PL&quot;
    ,&quot;tech&quot;
    ,&quot;ubuntu&quot;
    ,&quot;alexa&quot;
    ,&quot;book&quot;
    ,&quot;idea&quot;
    ,&quot;python&quot;
    ,&quot;tool&quot;
]
---
</code></pre></p></div><div class=post-footer><time>February 16, 2023</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2022-12-30/>2022-12-30</a></h2><div><p><h2><a href=#%e3%82%b9%e3%82%af%e3%83%aa%e3%83%97%e3%83%88%e3%82%92%e7%9c%9f%e9%9d%a2%e7%9b%ae%e3%81%ab%e6%9b%b8%e3%81%84%e3%81%9f id=スクリプトを真面目に書いた class=anchor aria-hidden=true>スクリプトを真面目に書いた</a></h2><p>昔聴いていた音楽を久しぶりに聞きたくなったのだがSpotifyで配信されていなかった。ローカルにデータがあったのでそこからSpotifyかVLCとかで使えるようにしようと思ったのだが、ローカルデータのファイルフォーマットが変だったりディレクトリ構成がイマイチで体験が良くない。</p><p>そこでメタデータをもとにフォルダに振り分けたりフォーマットをmp3に変換するスクリプトを書いた。量があったので並列化したところ割といい感じになった。</p><p>せっかくなのであとで使いやすいようにCLIを調整した。<a href=https://github.com/naoyafurudono/tools/tree/main/structure-music-files>コードをGitHubにアップロードしてある。</a>
できることや使い方はreadmeを参照すること。</p><p>ffmpegはすごいし、Pythonもすごい。</p><h2><a href=#python%e3%81%aetype-hints%e3%81%ae%e8%89%af%e8%a8%98%e4%ba%8b id=pythonのtype-hintsの良記事 class=anchor aria-hidden=true>PythonのType Hintsの良記事</a></h2><p><a href=https://engineering.mercari.com/blog/entry/20201105-0a4057b2ba/>型ヒントに関する記事で欲しい要点がまとまった記事</a>
と出会ったので共有。
Enumはしらなかった。これまではLiteralとUnionでしのいでいたのでありがたい。</p><p>最近Pythonを好きになりつつある。4月からキャディで使っていた下地と、最近学んだ人権のための機能のおかげ。</p><h2><a href=#linked-in%e3%81%ab%e7%99%bb%e9%8c%b2%e3%81%97%e3%81%a6%e3%81%bf%e3%81%9f id=linked-inに登録してみた class=anchor aria-hidden=true>Linked inに登録してみた</a></h2><p>別に職を探しているわけではなく、気になった人のプロフィールを見たかったので。スキルをテストして、パスするとバッジとして自慢できる機能がある。
OOPで試したらパスした。やったね！
クラスベースのOOPLに関する知識を見ている感じだった。</p><p>世の中にはいろんな機能があるのだなあという感想。自己申告でスキルを履歴書とかに書くよりも客観的な感じがして良いかもしれない。</p><h2><a href=#%e3%83%a1%e3%83%bc%e3%83%ab%e3%82%a2%e3%83%89%e3%83%ac%e3%82%b9%e3%81%ae%e5%85%ac%e9%96%8b id=メールアドレスの公開 class=anchor aria-hidden=true>メールアドレスの公開</a></h2><p>公開したいと思ってきたのだけど、スパムが嫌でずっと避けてきた。
Base64でエンコードして公開するアイデアを思いついたので試しにやってみる。このブログの自己紹介ページに載せてみた。この方法の問題点は面倒なことと、なれてない人には難しい点だろう。</p><p>それなりに頑張らないと収集できないだろうからスパムが来てもどんなところがそんなに頑張ったかを知れて楽しいだろう。</p><h3><a href=#%e8%bf%bd%e8%a8%98 id=追記 class=anchor aria-hidden=true>追記</a></h3><p>風の噂でこの方法は対策してあるソフトが存在すると聞いた。それではつまらないのでもう少し凝ったことをしてみた (<a href=https://github.com/naoyafurudono/naoyafurudono.github.io/commit/75ebe1a5ad393523c6244f3aabfeb66e5d28bb68>該当コミット</a>)。</p><p>Base64でhtmlにアドレスを書いておいて、JSで一定時間後にhtmlに書き込むアイデア。伝えたい人にとって楽になるのが何より良いし、クローラのタイムアウトにある程度期待できるのも良い。無限に対策と不安点は出てきそうなのでこのくらいにしておこう。</p><p>実現のために<a href=https://gohugo.io/content-management/shortcodes/>Hugoのショートコード機能を使った</a>。もっと楽しい使いみちがあるようなので気が向いたら導入する。</p></p></div><div class=post-footer><time>December 30, 2022</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2022-11-28/>2022-11-28</a></h2><div><p><p>AmazonでEchoが安かったので買ってしまった。特に使いみちは考えていなかったのだけど、プログラミングの新しいエントリポイントとして楽しい。</p><p>とりあえずハローワールドはできた。設定したフレーズでechoに話しかけると、設定したとおりに会話できる。プログラムが会話を通じて対話的に進行するのが新鮮だ。なかなか便利そう。定型的な記録をとるのには使えるだろう。</p><p>プログラムを書くときには発話自体を処理せずに、それをライブラリが処理した結果得られるインテントで実行を分岐させる。ビルトインのものもあるし、開発者が文字列でしていすることもできる。文字列で指定した場合、その聞き取り方？を学習してくれるみたいだ。</p><p>ついでにLambdaにも入門してしまった。Functionsの方が使い勝手が良い？
pythonの依存ライブラリをrequirements.txtで指定できないのが悲しい。</p></p></div><div class=post-footer><time>November 28, 2022</time></div></article><article><h2><a href=https://blog.nfurudono.com/daily/2022-11-27/>2022-11-27</a></h2><div><p><h2><a href=#%e3%83%87%e3%83%bc%e3%82%bf%e6%8c%87%e5%90%91%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e3%83%87%e3%82%b6%e3%82%a4%e3%83%b3%e3%81%8c%e8%89%af%e3%81%84 id=データ指向アプリケーションデザインが良い class=anchor aria-hidden=true>データ指向アプリケーションデザインが良い</a></h2><p>タイトルを見たときには、アーキテクチャ的な話が中心なのかと思っていたけど、蓋を開けると、それを構成するための技術を基礎から説明してくれた。たとえばデータベースの種類（関係、ドキュメント、グラフ）とその実例や特性、インデックスのデータ構造の説明、比較など。データベースだけの本でもないけど、そのへんはまだ読んでいないので触れない。</p><p>そういう話が終わると、分散システムを考えだす。こういう話の持っていきかたは読者として嬉しいし、文書を書くときに見習いたい。</p><h2><a href=#d2%e3%81%8c%e3%82%88%e3%81%95%e3%81%92 id=d2がよさげ class=anchor aria-hidden=true>D2がよさげ</a></h2><p>D2はテキストから図を生成するツールで、マーメイドとかが競合になるようなイメージだろう。企業がオープンソースで開発している。設計思想が良さげ。まだやりたいことをあまりやりきれていないようなので、開発を追いかけたいし、実際に使ってみたい。修論で使えるかな。</p></p></div><div class=post-footer><time>November 27, 2022</time></div></article></div><footer class=footer-mobile><div class=social-icons><a class=social-icon href=https://twitter.com/furudono2 target=_blank rel=noopener title=Twitter><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M8.991284 24.971612c10.189152.0 15.761088-8.441388 15.761088-15.761088C24.752372 8.970656 24.747512 8.731868 24.736496 8.494376 25.818008 7.712564 26.758256 6.737 27.5 5.62622c-.992628.440856-2.060748.738072-3.181248.871992 1.14372-.685584 2.02176-1.770768 2.435832-3.064176-1.070496.6345-2.25558 1.095984-3.517344 1.344492-1.010772-1.076652-2.450412-1.75014-4.043412-1.75014-3.059424.0-5.540292 2.480868-5.540292 5.539104.0.434808.0487079999999995.857412.14364 1.26306C9.19346 9.599108 5.11106 7.39472 2.3792 4.04294c-.476172.818424-.750168 1.769688-.750168 2.784132.0 1.921968.97794 3.61854 2.464992 4.61106C3.185528 11.41016 2.331788 11.160464 1.585184 10.745096 1.583888 10.768208 1.583888 10.791428 1.583888 10.815728c0 2.683152 1.909764 4.922856 4.4442 5.43078C5.562932 16.373084 5.07326 16.44134 4.56782 16.44134 4.210988 16.44134 3.863876 16.406024 3.526484 16.34144c.70524 2.200824 2.750112 3.802356 5.174928 3.8475-1.896264 1.485756-4.284576 2.37114-6.879924 2.37114C1.374476 22.56008.93362 22.534592.5 22.4834c2.451708 1.571076 5.362524 2.488212 8.491284 2.488212"/></svg>
</a><a class=social-icon href=https://www.instagram.com/donofuru/ target=_blank rel=noopener title=Instagram><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M14.0000238 2.00378571c3.2579524.0 3.6664762.0138095300000001 4.946.0721904800000002C20.222881 2.13421429 21.0949286 2.33702381 21.8579762 2.63359524 22.6468333 2.94011905 23.3158333 3.35030952 23.9827857 4.01721429 24.6496905 4.68416667 25.059881 5.35316667 25.3664524 6.14202381 25.6629762 6.90507143 25.8657857 7.77711905 25.9240238 9.05397619 25.9824048 10.3335 25.9962143 10.7420238 25.9962143 14.0000238 25.9962143 17.2579762 25.9824048 17.6665 25.9240238 18.9460238 25.8657857 20.222881 25.6629762 21.0949286 25.3664524 21.8579762 25.059881 22.6468333 24.6496905 23.3158333 23.9827857 23.9827857 23.3158333 24.6496905 22.6468333 25.059881 21.8579762 25.3664524 21.0949286 25.6629762 20.222881 25.8657857 18.9460238 25.9240238 17.6665 25.9824048 17.2579762 25.9962143 14.0000238 25.9962143 10.7420238 25.9962143 10.3335 25.9824048 9.05397619 25.9240238 7.77711905 25.8657857 6.90507143 25.6629762 6.14202381 25.3664524 5.35316667 25.059881 4.68416667 24.6496905 4.01721429 23.9827857c-.66690477-.6669524-1.07709524-1.3359524-1.38361905-2.1248095-.29657143-.7630476-.49938095-1.6350952-.55761905-2.9119524C2.01759524 17.6665 2.00378571 17.2579762 2.00378571 14.0000238 2.00378571 10.7420238 2.01759524 10.3335 2.07597619 9.05397619 2.13421429 7.77711905 2.33702381 6.90507143 2.63359524 6.14202381c.30652381-.78885714.71671428-1.45785714 1.38361905-2.12480952.66695238-.66690477 1.33595238-1.07709524 2.12480952-1.38361905C6.90507143 2.33702381 7.77711905 2.13421429 9.05397619 2.07597619 10.3335 2.01759524 10.7420238 2.00378571 14.0000238 2.00378571zm0 2.16147619C10.796881 4.1652619 10.4174524 4.1775 9.1525 4.23521429 7.98288095 4.28854762 7.34769048 4.48397619 6.92497619 4.6482619 6.36502381 4.86588095 5.96540476 5.12583333 5.54564286 5.54564286c-.41980953.4197619-.67976191.81938095-.89738096 1.37933333-.16428571.42271429-.35971428 1.05790476-.41304761 2.22752381C4.1775 10.4174524 4.1652619 10.796881 4.1652619 14.0000238 4.1652619 17.203119 4.1775 17.5825476 4.23521429 18.8475 4.28854762 20.017119 4.48397619 20.6523095 4.6482619 21.0750238 4.86588095 21.6349762 5.12588095 22.0345952 5.54564286 22.4543571 5.96540476 22.8741667 6.36502381 23.134119 6.92497619 23.3517381 7.34769048 23.5160238 7.98288095 23.7114524 9.1525 23.7647857 10.4173095 23.8225 10.7966429 23.8347381 14.0000238 23.8347381 17.2033571 23.8347381 17.5827381 23.8225 18.8475 23.7647857 20.017119 23.7114524 20.6523095 23.5160238 21.0750238 23.3517381 21.6349762 23.134119 22.0345952 22.8741667 22.4543571 22.4543571 22.8741667 22.0345952 23.134119 21.6349762 23.3517381 21.0750238 23.5160238 20.6523095 23.7114524 20.017119 23.7647857 18.8475 23.8225 17.5825476 23.8347381 17.203119 23.8347381 14.0000238 23.8347381 10.796881 23.8225 10.4174524 23.7647857 9.1525 23.7114524 7.98288095 23.5160238 7.34769048 23.3517381 6.92497619 23.134119 6.36502381 22.8741667 5.96540476 22.4543571 5.54564286 22.0345952 5.12583333 21.6349762 4.86588095 21.0750238 4.6482619 20.6523095 4.48397619 20.017119 4.28854762 18.8475 4.23521429 17.5825476 4.1775 17.203119 4.1652619 14.0000238 4.1652619zm0 13.8334762c2.2084286.0 3.9987143-1.7902857 3.9987143-3.9987143.0-2.2084762-1.7902857-3.9987619-3.9987143-3.9987619-2.2084762.0-3.9987619 1.7902857-3.9987619 3.9987619.0 2.2084286 1.7902857 3.9987143 3.9987619 3.9987143zm0-10.15895239c3.4021905.0 6.1601905 2.75799999 6.1601905 6.16023809.0 3.4021905-2.758 6.1601905-6.1601905 6.1601905-3.4022381.0-6.16023809-2.758-6.16023809-6.1601905.0-3.4022381 2.75799999-6.16023809 6.16023809-6.16023809zm7.8431429-.24338095c0 .79504762-.644523800000002 1.43952381-1.4395715 1.43952381C19.6085952 9.03592857 18.9640714 8.39145238 18.9640714 7.59640476S19.6085952 6.15683333 20.4035952 6.15683333c.795047699999998.0 1.4395715.64452381 1.4395715 1.43957143z"/></svg>
</a><a class=social-icon href=https://www.linkedin.com/in/naoya-furudono target=_blank rel=noopener title=LinkedIn><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M2 3.654102c0-.95502059.79442509-1.73012354 1.77383592-1.73012354H24.2261641C25.2058917 1.92397846 26 2.69908141 26 3.654102V24.3462148C26 25.3015521 25.2058917 26.0760215 24.2261641 26.0760215H3.77383592C2.79442509 26.0760215 2 25.3015521 2 24.3465315V3.65378524 3.654102zM9.27526132 22.1415901V11.2356668H5.65030092V22.1415901H9.27557808 9.27526132zM7.46341463 9.74691162c1.2638581.0 2.05068103-.83750395 2.05068103-1.88406715C9.49033893 6.79252455 8.72727273 5.97846056 7.48748812 5.97846056c-1.24073487.0-2.05099778.81406399-2.05099778 1.88438391.0 1.0465632.78650618 1.88406715 2.00316756 1.88406715h.02343998H7.46341463zM11.2815965 22.1415901h3.6246436v-6.089642C14.9062401 15.7263225 14.9299968 15.4000634 15.0256573 15.1675641c.261957499999999-.6515679.8584099-1.3259423 1.8599936-1.3259423 1.3113716.0 1.836237 1 1.836237 2.4662654v5.8337029h3.6246436V15.8885017c0-3.349699-1.7880899-4.9084574-4.172949-4.9084574-1.9553373.0-2.814064 1.0928097-3.2910991 1.8371872H14.9065569v-1.581248H11.2819132C11.3291099 12.2591067 11.2815965 22.1419069 11.2815965 22.1419069V22.1415901z"/></svg>
</a><a class=social-icon href=https://github.com/naoyafurudono target=_blank rel=noopener title=GitHub><svg width="28" height="28" viewBox="0 0 28 28" fill="#ABABAB" xmlns:xlink="https://www.w3.org/1999/xlink"><path d="M13.9988029 1.32087331C6.82105037 1.32087331 1 7.14112562 1 14.3212723c0 5.7436386 3.72454649 10.6157955 8.89038951 12.3348169C10.5408085 26.7757983 10.7778323 26.374374 10.7778323 26.0296121 10.7778323 25.7215609 10.7666595 24.9035493 10.760275 23.8189856 7.14426471 24.6042767 6.38131925 22.0760223 6.38131925 22.0760223c-.59136253-1.5019491-1.44369072-1.9017772-1.44369072-1.9017772C3.75729765 19.3682044 5.02701126 19.3841656 5.02701126 19.3841656 6.33183953 19.4759425 7.01817121 20.7241085 7.01817121 20.7241085c1.15958133 1.9863716 3.04300319 1.4125664 3.78360289 1.0797753.1181129-.8395592.4540962-1.4125663.8251942-1.7373768C8.74038491 19.7385043 5.70536235 18.6228163 5.70536235 13.6413251c0-1.4189508.50676816-2.5801283 1.33834679-3.4883207C6.90963504 9.82420367 6.46351945 8.50181809 7.17139875 6.71256734c0 0 1.09094816-.34955032 3.57451115 1.33276037C11.78259 7.75642995 12.8950858 7.61277914 14.000399 7.60719272 15.1049142 7.61277914 16.2166119 7.75642995 17.2548881 8.04532771c2.4819669-1.68231069 3.571319-1.33276037 3.571319-1.33276037C21.5356825 8.50181809 21.0895669 9.82420367 20.9562909 10.1530044 21.7894656 11.0611968 22.2922435 12.2223743 22.2922435 13.6413251c0 4.9942601-3.039811 6.0931889-5.935173 6.4148071.4660671.401424200000001.8818564 1.194696.8818564 2.4077473C17.2389269 24.2012564 17.2229657 25.603448 17.2229657 26.0296121 17.2229657 26.3775663 17.4575954 26.7821827 18.116793 26.6552912 23.2786458 24.9322794 27 20.0633148 27 14.3212723 27 7.14112562 21.1789496 1.32087331 13.9988029 1.32087331"/></svg></a></div><div class=footer-mobile-links><p><a href=https://github.com/naoyafurudono/naoyafurudono.github.io target=_blank rel=noopener>Source of
this site</a></p><span class=divider-bar>|</span><p><a href=https://gohugo.io target=_blank rel=noopener></a></p><p>©2025 Naoya Furudono</p></div><script src=https://blog.nfurudono.com/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin=anonymous></script><a target=_blank rel="noopener noreferrer" href=https://github.com/naoyafurudono/naoyafurudono.github.io/actions><img src=https://github.com/naoyafurudono/naoyafurudono.github.io/actions/workflows/gh-pages.yml/badge.svg alt="github pages deploy status" style=max-width:100%></a><p><a href="https://www.amazon.jp/hz/wishlist/ls/1JBRXP4JZZ21T?ref_=wl_share">欲しい本リスト</a></p><p><a href="https://www.amazon.jp/hz/wishlist/ls/3TT5GR81VZPHP?ref_=wl_share">欲しいものリスト</a></p></footer></body></html>