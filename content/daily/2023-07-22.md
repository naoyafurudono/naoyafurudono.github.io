---
title: "2023-07-22"
date: 2023-07-22T11:56:59+09:00
author: "Naoya Furudono"
draft: false
tags: [
    "daily"
    ,"PL"
    ,"comp"
    ,"tech"
]
---

# ふにゃっとしてる

コンパイラの実装で、次はポインタ算術をやる。
演算子がオーバーローディングされているので型検査が必要。
今は環境とかのデータ構造を設計する気力がなくて、パソコンを前にふにゃっとしている。
お昼ご飯食べたら考える。

興味本位でコンパイルしたプログラムの実行速度を測ってみた。
時間計算量が試数時間なfibの実装（あのみんな大好きなナイーブなやつ）で、
fib(40)を計算してみた。自作コンパイラだとuser時間が1.3secくらいなのに対して、
gccのO3でuser時間が0.3secくらいだった。
O3を指定しないと（多分O2）0.5secくらい。
Inliningとかは効かないだろうし、ループ周りでの最適化もできないはず。
スタックマシンではなくレジスタマシンとして動かすことで（無駄なpush/popを排除することで）
O2くらいの速さになってる感じかな。
O3では何が早くなってるんだろう。気が向いたら調べるか、実装するかしたい。

# がんばった

お昼を食べて買い物に行ったあと、型検査器を実装した。がんばった。
strcmpがboolを返すと思い込むやつをやって時間を溶かした。
ランニングをしてオーバーロードに取り組む。
今はintもポインタも64bitにしているけど、abiをみたらintは32bitっぽいので合わせる。
オーバーロードは楽しそうだけどintを32bitにするのが面倒。
ASTに型を行き渡らせたので難しくはないはず。

買い物ではズボンを買いに行った。涼しい長ズボンが欲しかったので。
初めて買う感じのやつを変えて満足している。
サンダルも欲しかったけど、僕の期待が矛盾していることに気がついたので断念。
来年は期待を変えられることを願って今年はスニーカを履き続ける。

