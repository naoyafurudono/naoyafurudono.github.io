---
title: "DDDをしたいのだけど、ドメインエキスパートを見つけられずにいた話"
emoji: "😎"
type: "idea"
topics: ["DDD", "設計"]
published: false
---

# ドメイン駆動設計（DDD, Domain Driven Design）は良さそう

フリーレンで「魔法を使うためにはイメージできないと無理」みたいなことを言っていた。目標を見据えられてなければそれを達成できない、みたいな話だろう。ソフトウェアでも同じことが言えると思っている。例えばDDDではドメインエキスパートと議論して発見するドメインモデルを手にいれることで作るもののイメージを獲得し、それをソフトウェアとして実現する。反対にドメインへの理解が甘い状態でソフトウェアを作っても泥団子を作ることになるだとか、顧客の本当に求めていたものはどうとかみたいな話はまあどこかで聞いた気がする。

ここで主張したいのは、DDDは何を作るか理解したうえでソフトウェアを設計する技法っぽいので筋が良いだろうということ。これだけみんなDDDって言っているし、今更主張することではないかもしれないが、この記事はそういうスタンスで書いている。

# ぼくにはうまくDDDがはまらない

DDDはよさそうなのだが仕事でやろうと思うと**ドメインエキスパートを見つけられなくて**うまくはまらない。

## DDDは既存業務を仮定する

DDDではドメインエキスパートの話をよく聞いて、ドメインを理解し議論することを通じてシステムを設計していくのだ、というような主張をよく見ると思っている（エリックエヴァンスの本とか実践ドメイン駆動設計ではそのような主張をするはず）。もともと業務を回している人がいて、彼らの業務を助けたり取って代わったりするためにシステムを作る文脈を想定しているのだろう。

## ぼくたちのサービスはぼくたちが業務を作り出す

しかし僕たちが開発するシステムは、これまでこの会社が提供していなかったサービスを提供するために作るものだ。そのため既存業務もなければドメインエキスパートもいない。そういうわけで僕たちがやる設計は、ドメインに駆動されて行うものではなく、ドメイン自体の設計も含んでいるのだと思う。

## 業務の設計は難しい

ドメイン自体の設計は難しい。ドメインの設計には業務やその業務が回すサービスの設計が含まれる。通常それはエンジニアではなく企画や生産管理を行うような人が選任でいるケースが多いのではないだろうか。そのようなドメインエキスパートの仕事をエンジニアが一から設計しようとしているのだから難しいと感じるのは当然に思える。

## うまく業務を設計する方策

せっかく難しいことに直面しているのだから、それをうまくこなせるようになりたい。どうすればうまくいくだろうか。

### ディレクタ、PdM、PMをドメインの設計にもっと巻き込む

大まかなプロダクトの方針を決めるために彼らが関わったとしても、ドメインの詳細には関知しないケースもあるだろう。ドメインの設計とソフトウェアの設計を切り分けて議論することで、もっと巻き込みやすくなるのではないだろうか。
  
### ドメインの設計スキルを上げる

全部やるってこと。

# ユーザからドメインエキスパートを発掘する

ここで手のひらを返そうと思う。「ぼくたちのサービスはぼくたちが業務を作り出す」と述べたが、それは本当だろうか。

サービスのユーザはドメインエキスパートではないだろうか。そのサービスを使うユーザは今までとは全く違うことをそのサービスを使ってやるのだろうか。おそらくそんなことはないはずで、彼らの既存の営みをもっと便利にすることでサービスは収益を上げるだろう。彼らの既存の営みがドメインであり、ユーザ（潜在的なユーザかもしれない）がドメインエキスパートなのだろう。

そのため潜在的なユーザの営みを理解して、それに駆動されて設計をすればDDDをできて幸せなはずだ。

## ユーザとドメインエキスパートは異なる

とはいえユーザをDDDでいうドメインエキスパートとみなして、そのままDDDするのは無理があるだろう。

## 開発組織との利害関係

ドメインエキスパートのために作るサービスと、ぼくたち開発組織が売り込んでいくサービスとでは利害関係が異なり、達成すべき目標が異なる。

例えば、ぼくたちが作るサービスはユーザ数が増えないとなかなか続けられない。もちろんそれだけが目標ではないけれど、事業をやるうえで無視することはないだろう。また、サービスをユーザが使うことで我々は利益を得ないといけないが、ドメインエキスパートが使うシステムでは、業務の生産性が上がることがそれにとって変わるだろう。

## ユーザの変化

サービス開発ではユーザは移り変わる。年月の流れで変わることもあれば、事業判断で変わることもあるだろう。モデルにするべきエキスパートは流動するのだ。
 
## ユーザとDDDをするために

そういう関係性の違いから、ユーザインタビュー、ABテスト、アジャイルに作ってみるとかするんでしょうね。じゃあそれらを踏まえて僕たちはどのようにソフトウェアを設計するのが良いのだろうか。

# まとめ

つらつら書いてきたのでまとめる。

DDDの本に書いてある通りにDDDできない環境の開発者はぼく以外にもそれなりにいると思っている。少し認識をずらして、ドメインエキスパートとユーザの間に関係性を見出すと色々うまくいくのではないだろうか。

この辺りに悩んだ先人がきっといるので折に触れて探そうと思うし、インターネットで（直接会える方は直接）コンタクトを取ったり紹介していただけるとありがたい。
