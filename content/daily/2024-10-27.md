---
title: "2024-10-27"
date: 2024-10-27T01:20:03+09:00
author: "Naoya Furudono"
draft: false
tags:
    - daily
    - tech
    - tool
---

# 結婚式準備

友達の結婚式に今度出席するので真面目に準備してみる。普段スーツを着ないので礼服を着るのはコスプレみたいでドキドキする。

- [x] 礼服が入るか検証
- [x] シャツを買う
- [ ] ネクタイと胸につけるハンカチ買う
  - ネクタイの練習もしておかないとな
- [ ] 靴を手入れする
- [ ] ワックス買って練習する
- [ ] 髪をいい感じに切ってもらうための店を見つける
  - 人に聞くのがいいかな
- その他マナーを学んでおく

# SQLのユーザ管理

アプリケーションの開発・運用をしているとSQLのユーザをそれなりに作ることになる。
データベースもしかり。それらをIaCな感じで管理したいがベストプラクティスをまだ知らない。

管理したいユーザの情報は以下の通り

- ユーザ名（ホストを含む）
- Grant
- パスワード

簡単なのは、ユーザ名とパスワードだけ1Passとかで管理して、他は動いているものを見に行く方法。管理しない考え方。
実態と齟齬がないことは良いことだが、設定を見るためには管理者権限が必要だしいちいち接続するのも面倒。
また、複製が面倒なのも問題だし、設定の経緯をコメントに残したりバージョン管理したりできないので組織としてスケールしない。

Terraformで管理するのはいい線行きそう。ネックはパスワードかな。
パスワードを平文で保持しないことを達成しようと思うと途端にややこしくなりそう。
運用ではパスワードにシュッとアクセスしたいケースがあるため、他の解決策と併用するのが良いだろう。
Grantとユーザ名、変更の経緯の管理には向いていそう。

Terraformと1passを組み合わせるのが綺麗だろうと思った。
ユーザ名は不変（変更したくなったら作り直す）にしておけば、色々いい感じになるんじゃないかな。

# OAuthのベストプラクティス

<https://datatracker.ietf.org/doc/html/draft-ietf-oauth-security-topics> が良さげ。
Refresh tokenをどこにどれくらいの期間保持するとか、どういうインターバルで無効化するとかで悩む。
あとaccess tokenはauthorizationヘッダに突っ込むのが吉？とか。

# about: A Philosophy of Software Design

ソフトウェア設計の指針をまとめた本で定番だけど日本語訳されてない（はず、2022年に買ったときはそうだった）。
APIを実装・設計したりそれに付随してコードレベルのモジュール（クラスとかで表現するようなレイヤ）を設計するときに役立つ指針をくれる。

僕がプログラミングのレビューをしたり、自分でプログラミングしたりするときに気にすることは割とここから学んだ（言語化しただけ？）と思う。
インターネットでHTMLが公開されてたらどんなに嬉しいだろうと思う。レビューのときに「ここを読んでください」をできるので。

言語とかパラダイムに依存しない、プログラミング一般について使える知見が書かれているので繰り返し読む価値のあるものだと思うし、実際そうしている。
以下のそれぞれのタイミングで読んだが、毎回楽しく思っている。

1. がっつりプログラミング始める前
1. 自分でコードを書くようになってから
1. レビューをするようになってから

広くいろんな人に使われるAPIを設計するようになるとまた見える世界が違うのだろうと思う。
